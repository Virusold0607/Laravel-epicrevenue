{"version":3,"sources":["ui-bootstrap.js","angular-route.js","ui-select.js","angular-sanitize.js","ng-file-upload.js","chart.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/iCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACv4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpuBA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin.js","sourcesContent":["/*\r\n * angular-ui-bootstrap\r\n * http://angular-ui.github.io/bootstrap/\r\n\r\n * Version: 0.14.3 - 2015-10-23\r\n * License: MIT\r\n */\r\nangular.module(\"ui.bootstrap\",[\"ui.bootstrap.tpls\",\"ui.bootstrap.collapse\",\"ui.bootstrap.accordion\",\"ui.bootstrap.alert\",\"ui.bootstrap.buttons\",\"ui.bootstrap.carousel\",\"ui.bootstrap.dateparser\",\"ui.bootstrap.position\",\"ui.bootstrap.datepicker\",\"ui.bootstrap.dropdown\",\"ui.bootstrap.stackedMap\",\"ui.bootstrap.modal\",\"ui.bootstrap.pagination\",\"ui.bootstrap.tooltip\",\"ui.bootstrap.popover\",\"ui.bootstrap.progressbar\",\"ui.bootstrap.rating\",\"ui.bootstrap.tabs\",\"ui.bootstrap.timepicker\",\"ui.bootstrap.typeahead\"]),angular.module(\"ui.bootstrap.tpls\",[\"template/accordion/accordion-group.html\",\"template/accordion/accordion.html\",\"template/alert/alert.html\",\"template/carousel/carousel.html\",\"template/carousel/slide.html\",\"template/datepicker/datepicker.html\",\"template/datepicker/day.html\",\"template/datepicker/month.html\",\"template/datepicker/popup.html\",\"template/datepicker/year.html\",\"template/modal/backdrop.html\",\"template/modal/window.html\",\"template/pagination/pager.html\",\"template/pagination/pagination.html\",\"template/tooltip/tooltip-html-popup.html\",\"template/tooltip/tooltip-popup.html\",\"template/tooltip/tooltip-template-popup.html\",\"template/popover/popover-html.html\",\"template/popover/popover-template.html\",\"template/popover/popover.html\",\"template/progressbar/bar.html\",\"template/progressbar/progress.html\",\"template/progressbar/progressbar.html\",\"template/rating/rating.html\",\"template/tabs/tab.html\",\"template/tabs/tabset.html\",\"template/timepicker/timepicker.html\",\"template/typeahead/typeahead-match.html\",\"template/typeahead/typeahead-popup.html\"]),angular.module(\"ui.bootstrap.collapse\",[]).directive(\"uibCollapse\",[\"$animate\",\"$injector\",function(a,b){var c=b.has(\"$animateCss\")?b.get(\"$animateCss\"):null;return{link:function(b,d,e){function f(){d.removeClass(\"collapse\").addClass(\"collapsing\").attr(\"aria-expanded\",!0).attr(\"aria-hidden\",!1),c?c(d,{addClass:\"in\",easing:\"ease\",to:{height:d[0].scrollHeight+\"px\"}}).start()[\"finally\"](g):a.addClass(d,\"in\",{to:{height:d[0].scrollHeight+\"px\"}}).then(g)}function g(){d.removeClass(\"collapsing\").addClass(\"collapse\").css({height:\"auto\"})}function h(){return d.hasClass(\"collapse\")||d.hasClass(\"in\")?(d.css({height:d[0].scrollHeight+\"px\"}).removeClass(\"collapse\").addClass(\"collapsing\").attr(\"aria-expanded\",!1).attr(\"aria-hidden\",!0),void(c?c(d,{removeClass:\"in\",to:{height:\"0\"}}).start()[\"finally\"](i):a.removeClass(d,\"in\",{to:{height:\"0\"}}).then(i))):i()}function i(){d.css({height:\"0\"}),d.removeClass(\"collapsing\").addClass(\"collapse\")}b.$watch(e.uibCollapse,function(a){a?h():f()})}}}]),angular.module(\"ui.bootstrap.collapse\").value(\"$collapseSuppressWarning\",!1).directive(\"collapse\",[\"$animate\",\"$injector\",\"$log\",\"$collapseSuppressWarning\",function(a,b,c,d){var e=b.has(\"$animateCss\")?b.get(\"$animateCss\"):null;return{link:function(b,f,g){function h(){f.removeClass(\"collapse\").addClass(\"collapsing\").attr(\"aria-expanded\",!0).attr(\"aria-hidden\",!1),e?e(f,{easing:\"ease\",to:{height:f[0].scrollHeight+\"px\"}}).start().done(i):a.animate(f,{},{height:f[0].scrollHeight+\"px\"}).then(i)}function i(){f.removeClass(\"collapsing\").addClass(\"collapse in\").css({height:\"auto\"})}function j(){return f.hasClass(\"collapse\")||f.hasClass(\"in\")?(f.css({height:f[0].scrollHeight+\"px\"}).removeClass(\"collapse in\").addClass(\"collapsing\").attr(\"aria-expanded\",!1).attr(\"aria-hidden\",!0),void(e?e(f,{to:{height:\"0\"}}).start().done(k):a.animate(f,{},{height:\"0\"}).then(k))):k()}function k(){f.css({height:\"0\"}),f.removeClass(\"collapsing\").addClass(\"collapse\")}d||c.warn(\"collapse is now deprecated. Use uib-collapse instead.\"),b.$watch(g.collapse,function(a){a?j():h()})}}}]),angular.module(\"ui.bootstrap.accordion\",[\"ui.bootstrap.collapse\"]).constant(\"uibAccordionConfig\",{closeOthers:!0}).controller(\"UibAccordionController\",[\"$scope\",\"$attrs\",\"uibAccordionConfig\",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on(\"$destroy\",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive(\"uibAccordion\",function(){return{controller:\"UibAccordionController\",controllerAs:\"accordion\",transclude:!0,templateUrl:function(a,b){return b.templateUrl||\"template/accordion/accordion.html\"}}}).directive(\"uibAccordionGroup\",function(){return{require:\"^uibAccordion\",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/accordion/accordion-group.html\"},scope:{heading:\"@\",isOpen:\"=?\",isDisabled:\"=?\"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.openClass=c.openClass||\"panel-open\",a.panelClass=c.panelClass,a.$watch(\"isOpen\",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)}}}}).directive(\"uibAccordionHeading\",function(){return{transclude:!0,template:\"\",replace:!0,require:\"^uibAccordionGroup\",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive(\"uibAccordionTransclude\",function(){return{require:[\"?^uibAccordionGroup\",\"?^accordionGroup\"],link:function(a,b,c,d){d=d[0]?d[0]:d[1],a.$watch(function(){return d[c.uibAccordionTransclude]},function(a){a&&(b.find(\"span\").html(\"\"),b.find(\"span\").append(a))})}}}),angular.module(\"ui.bootstrap.accordion\").value(\"$accordionSuppressWarning\",!1).controller(\"AccordionController\",[\"$scope\",\"$attrs\",\"$controller\",\"$log\",\"$accordionSuppressWarning\",function(a,b,c,d,e){e||d.warn(\"AccordionController is now deprecated. Use UibAccordionController instead.\"),angular.extend(this,c(\"UibAccordionController\",{$scope:a,$attrs:b}))}]).directive(\"accordion\",[\"$log\",\"$accordionSuppressWarning\",function(a,b){return{restrict:\"EA\",controller:\"AccordionController\",controllerAs:\"accordion\",transclude:!0,replace:!1,templateUrl:function(a,b){return b.templateUrl||\"template/accordion/accordion.html\"},link:function(){b||a.warn(\"accordion is now deprecated. Use uib-accordion instead.\")}}}]).directive(\"accordionGroup\",[\"$log\",\"$accordionSuppressWarning\",function(a,b){return{require:\"^accordion\",restrict:\"EA\",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/accordion/accordion-group.html\"},scope:{heading:\"@\",isOpen:\"=?\",isDisabled:\"=?\"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(c,d,e,f){b||a.warn(\"accordion-group is now deprecated. Use uib-accordion-group instead.\"),f.addGroup(c),c.openClass=e.openClass||\"panel-open\",c.panelClass=e.panelClass,c.$watch(\"isOpen\",function(a){d.toggleClass(c.openClass,!!a),a&&f.closeOthers(c)}),c.toggleOpen=function(a){c.isDisabled||a&&32!==a.which||(c.isOpen=!c.isOpen)}}}}]).directive(\"accordionHeading\",[\"$log\",\"$accordionSuppressWarning\",function(a,b){return{restrict:\"EA\",transclude:!0,template:\"\",replace:!0,require:\"^accordionGroup\",link:function(c,d,e,f,g){b||a.warn(\"accordion-heading is now deprecated. Use uib-accordion-heading instead.\"),f.setHeading(g(c,angular.noop))}}}]).directive(\"accordionTransclude\",[\"$log\",\"$accordionSuppressWarning\",function(a,b){return{require:\"^accordionGroup\",link:function(c,d,e,f){b||a.warn(\"accordion-transclude is now deprecated. Use uib-accordion-transclude instead.\"),c.$watch(function(){return f[e.accordionTransclude]},function(a){a&&(d.find(\"span\").html(\"\"),d.find(\"span\").append(a))})}}}]),angular.module(\"ui.bootstrap.alert\",[]).controller(\"UibAlertController\",[\"$scope\",\"$attrs\",\"$interpolate\",\"$timeout\",function(a,b,c,d){a.closeable=!!b.close;var e=angular.isDefined(b.dismissOnTimeout)?c(b.dismissOnTimeout)(a.$parent):null;e&&d(function(){a.close()},parseInt(e,10))}]).directive(\"uibAlert\",function(){return{controller:\"UibAlertController\",controllerAs:\"alert\",templateUrl:function(a,b){return b.templateUrl||\"template/alert/alert.html\"},transclude:!0,replace:!0,scope:{type:\"@\",close:\"&\"}}}),angular.module(\"ui.bootstrap.alert\").value(\"$alertSuppressWarning\",!1).controller(\"AlertController\",[\"$scope\",\"$attrs\",\"$controller\",\"$log\",\"$alertSuppressWarning\",function(a,b,c,d,e){e||d.warn(\"AlertController is now deprecated. Use UibAlertController instead.\"),angular.extend(this,c(\"UibAlertController\",{$scope:a,$attrs:b}))}]).directive(\"alert\",[\"$log\",\"$alertSuppressWarning\",function(a,b){return{controller:\"AlertController\",controllerAs:\"alert\",templateUrl:function(a,b){return b.templateUrl||\"template/alert/alert.html\"},transclude:!0,replace:!0,scope:{type:\"@\",close:\"&\"},link:function(){b||a.warn(\"alert is now deprecated. Use uib-alert instead.\")}}}]),angular.module(\"ui.bootstrap.buttons\",[]).constant(\"uibButtonConfig\",{activeClass:\"active\",toggleEvent:\"click\"}).controller(\"UibButtonsController\",[\"uibButtonConfig\",function(a){this.activeClass=a.activeClass||\"active\",this.toggleEvent=a.toggleEvent||\"click\"}]).directive(\"uibBtnRadio\",function(){return{require:[\"uibBtnRadio\",\"ngModel\"],controller:\"UibButtonsController\",controllerAs:\"buttons\",link:function(a,b,c,d){var e=d[0],f=d[1];b.find(\"input\").css({display:\"none\"}),f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.uibBtnRadio)))},b.on(e.toggleEvent,function(){if(!c.disabled){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.uibBtnRadio)),f.$render()})}})}}}).directive(\"uibBtnCheckbox\",function(){return{require:[\"uibBtnCheckbox\",\"ngModel\"],controller:\"UibButtonsController\",controllerAs:\"button\",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find(\"input\").css({display:\"none\"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module(\"ui.bootstrap.buttons\").value(\"$buttonsSuppressWarning\",!1).controller(\"ButtonsController\",[\"$controller\",\"$log\",\"$buttonsSuppressWarning\",function(a,b,c){c||b.warn(\"ButtonsController is now deprecated. Use UibButtonsController instead.\"),angular.extend(this,a(\"UibButtonsController\"))}]).directive(\"btnRadio\",[\"$log\",\"$buttonsSuppressWarning\",function(a,b){return{require:[\"btnRadio\",\"ngModel\"],controller:\"ButtonsController\",controllerAs:\"buttons\",link:function(c,d,e,f){b||a.warn(\"btn-radio is now deprecated. Use uib-btn-radio instead.\");var g=f[0],h=f[1];d.find(\"input\").css({display:\"none\"}),h.$render=function(){d.toggleClass(g.activeClass,angular.equals(h.$modelValue,c.$eval(e.btnRadio)))},d.bind(g.toggleEvent,function(){if(!e.disabled){var a=d.hasClass(g.activeClass);(!a||angular.isDefined(e.uncheckable))&&c.$apply(function(){h.$setViewValue(a?null:c.$eval(e.btnRadio)),h.$render()})}})}}}]).directive(\"btnCheckbox\",[\"$document\",\"$log\",\"$buttonsSuppressWarning\",function(a,b,c){return{require:[\"btnCheckbox\",\"ngModel\"],controller:\"ButtonsController\",controllerAs:\"button\",link:function(d,e,f,g){function h(){return j(f.btnCheckboxTrue,!0)}function i(){return j(f.btnCheckboxFalse,!1)}function j(a,b){var c=d.$eval(a);return angular.isDefined(c)?c:b}c||b.warn(\"btn-checkbox is now deprecated. Use uib-btn-checkbox instead.\");var k=g[0],l=g[1];e.find(\"input\").css({display:\"none\"}),l.$render=function(){e.toggleClass(k.activeClass,angular.equals(l.$modelValue,h()))},e.bind(k.toggleEvent,function(){f.disabled||d.$apply(function(){l.$setViewValue(e.hasClass(k.activeClass)?i():h()),l.$render()})}),e.on(\"keypress\",function(b){f.disabled||32!==b.which||a[0].activeElement!==e[0]||d.$apply(function(){l.$setViewValue(e.hasClass(k.activeClass)?i():h()),l.$render()})})}}}]),angular.module(\"ui.bootstrap.carousel\",[]).controller(\"UibCarouselController\",[\"$scope\",\"$element\",\"$interval\",\"$animate\",function(a,b,c,d){function e(b,c,e){s||(angular.extend(b,{direction:e,active:!0}),angular.extend(m.currentSlide||{},{direction:e,active:!1}),d.enabled()&&!a.noTransition&&!a.$currentTransition&&b.$element&&m.slides.length>1&&(b.$element.data(q,b.direction),m.currentSlide&&m.currentSlide.$element&&m.currentSlide.$element.data(q,b.direction),a.$currentTransition=!0,o?d.on(\"addClass\",b.$element,function(b,c){\"close\"===c&&(a.$currentTransition=null,d.off(\"addClass\",b))}):b.$element.one(\"$animate:close\",function(){a.$currentTransition=null})),m.currentSlide=b,r=c,g())}function f(a){if(angular.isUndefined(n[a].index))return n[a];var b;n.length;for(b=0;b<n.length;++b)if(n[b].index==a)return n[b]}function g(){h();var b=+a.interval;!isNaN(b)&&b>0&&(k=c(i,b))}function h(){k&&(c.cancel(k),k=null)}function i(){var b=+a.interval;l&&!isNaN(b)&&b>0&&n.length?a.next():a.pause()}function j(b){b.length||(a.$currentTransition=null)}var k,l,m=this,n=m.slides=a.slides=[],o=angular.version.minor>=4,p=\"uib-noTransition\",q=\"uib-slideDirection\",r=-1;m.currentSlide=null;var s=!1;m.select=a.select=function(b,c){var d=a.indexOfSlide(b);void 0===c&&(c=d>m.getCurrentIndex()?\"next\":\"prev\"),b&&b!==m.currentSlide&&!a.$currentTransition&&e(b,d,c)},a.$on(\"$destroy\",function(){s=!0}),m.getCurrentIndex=function(){return m.currentSlide&&angular.isDefined(m.currentSlide.index)?+m.currentSlide.index:r},a.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:n.indexOf(a)},a.next=function(){var b=(m.getCurrentIndex()+1)%n.length;return 0===b&&a.noWrap()?void a.pause():m.select(f(b),\"next\")},a.prev=function(){var b=m.getCurrentIndex()-1<0?n.length-1:m.getCurrentIndex()-1;return a.noWrap()&&b===n.length-1?void a.pause():m.select(f(b),\"prev\")},a.isActive=function(a){return m.currentSlide===a},a.$watch(\"interval\",g),a.$watchCollection(\"slides\",j),a.$on(\"$destroy\",h),a.play=function(){l||(l=!0,g())},a.pause=function(){a.noPause||(l=!1,h())},m.addSlide=function(b,c){b.$element=c,n.push(b),1===n.length||b.active?(m.select(n[n.length-1]),1===n.length&&a.play()):b.active=!1},m.removeSlide=function(a){angular.isDefined(a.index)&&n.sort(function(a,b){return+a.index>+b.index});var b=n.indexOf(a);n.splice(b,1),n.length>0&&a.active?b>=n.length?m.select(n[b-1]):m.select(n[b]):r>b&&r--,0===n.length&&(m.currentSlide=null)},a.$watch(\"noTransition\",function(a){b.data(p,a)})}]).directive(\"uibCarousel\",[function(){return{transclude:!0,replace:!0,controller:\"UibCarouselController\",controllerAs:\"carousel\",require:\"carousel\",templateUrl:function(a,b){return b.templateUrl||\"template/carousel/carousel.html\"},scope:{interval:\"=\",noTransition:\"=\",noPause:\"=\",noWrap:\"&\"}}}]).directive(\"uibSlide\",function(){return{require:\"^uibCarousel\",restrict:\"EA\",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/carousel/slide.html\"},scope:{active:\"=?\",actual:\"=?\",index:\"=?\"},link:function(a,b,c,d){d.addSlide(a,b),a.$on(\"$destroy\",function(){d.removeSlide(a)}),a.$watch(\"active\",function(b){b&&d.select(a)})}}}).animation(\".item\",[\"$injector\",\"$animate\",function(a,b){function c(a,b,c){a.removeClass(b),c&&c()}var d=\"uib-noTransition\",e=\"uib-slideDirection\",f=null;return a.has(\"$animateCss\")&&(f=a.get(\"$animateCss\")),{beforeAddClass:function(a,g,h){if(\"active\"==g&&a.parent()&&a.parent().parent()&&!a.parent().parent().data(d)){var i=!1,j=a.data(e),k=\"next\"==j?\"left\":\"right\",l=c.bind(this,a,k+\" \"+j,h);return a.addClass(j),f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()},beforeRemoveClass:function(a,g,h){if(\"active\"===g&&a.parent()&&a.parent().parent()&&!a.parent().parent().data(d)){var i=!1,j=a.data(e),k=\"next\"==j?\"left\":\"right\",l=c.bind(this,a,k,h);return f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()}}}]),angular.module(\"ui.bootstrap.carousel\").value(\"$carouselSuppressWarning\",!1).controller(\"CarouselController\",[\"$scope\",\"$element\",\"$controller\",\"$log\",\"$carouselSuppressWarning\",function(a,b,c,d,e){e||d.warn(\"CarouselController is now deprecated. Use UibCarouselController instead.\"),angular.extend(this,c(\"UibCarouselController\",{$scope:a,$element:b}))}]).directive(\"carousel\",[\"$log\",\"$carouselSuppressWarning\",function(a,b){return{transclude:!0,replace:!0,controller:\"CarouselController\",controllerAs:\"carousel\",require:\"carousel\",templateUrl:function(a,b){return b.templateUrl||\"template/carousel/carousel.html\"},scope:{interval:\"=\",noTransition:\"=\",noPause:\"=\",noWrap:\"&\"},link:function(){b||a.warn(\"carousel is now deprecated. Use uib-carousel instead.\")}}}]).directive(\"slide\",[\"$log\",\"$carouselSuppressWarning\",function(a,b){return{require:\"^carousel\",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/carousel/slide.html\"},scope:{active:\"=?\",actual:\"=?\",index:\"=?\"},link:function(c,d,e,f){b||a.warn(\"slide is now deprecated. Use uib-slide instead.\"),f.addSlide(c,d),c.$on(\"$destroy\",function(){f.removeSlide(c)}),c.$watch(\"active\",function(a){a&&f.select(c)})}}}]),angular.module(\"ui.bootstrap.dateparser\",[]).service(\"uibDateParser\",[\"$log\",\"$locale\",\"orderByFilter\",function(a,b,c){function d(a){var b=[],d=a.split(\"\");return angular.forEach(g,function(c,e){var f=a.indexOf(e);if(f>-1){a=a.split(\"\"),d[f]=\"(\"+c.regex+\")\",a[f]=\"$\";for(var g=f+1,h=f+e.length;h>g;g++)d[g]=\"\",a[g]=\"$\";a=a.join(\"\"),b.push({index:f,apply:c.apply})}}),{regex:new RegExp(\"^\"+d.join(\"\")+\"$\"),map:c(b,\"index\")}}function e(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}var f,g,h=/[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;this.init=function(){f=b.id,this.parsers={},g={yyyy:{regex:\"\\\\d{4}\",apply:function(a){this.year=+a}},yy:{regex:\"\\\\d{2}\",apply:function(a){this.year=+a+2e3}},y:{regex:\"\\\\d{1,4}\",apply:function(a){this.year=+a}},MMMM:{regex:b.DATETIME_FORMATS.MONTH.join(\"|\"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)}},MMM:{regex:b.DATETIME_FORMATS.SHORTMONTH.join(\"|\"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)}},MM:{regex:\"0[1-9]|1[0-2]\",apply:function(a){this.month=a-1}},M:{regex:\"[1-9]|1[0-2]\",apply:function(a){this.month=a-1}},dd:{regex:\"[0-2][0-9]{1}|3[0-1]{1}\",apply:function(a){this.date=+a}},d:{regex:\"[1-2]?[0-9]{1}|3[0-1]{1}\",apply:function(a){this.date=+a}},EEEE:{regex:b.DATETIME_FORMATS.DAY.join(\"|\")},EEE:{regex:b.DATETIME_FORMATS.SHORTDAY.join(\"|\")},HH:{regex:\"(?:0|1)[0-9]|2[0-3]\",apply:function(a){this.hours=+a}},hh:{regex:\"0[0-9]|1[0-2]\",apply:function(a){this.hours=+a}},H:{regex:\"1?[0-9]|2[0-3]\",apply:function(a){this.hours=+a}},h:{regex:\"[0-9]|1[0-2]\",apply:function(a){this.hours=+a}},mm:{regex:\"[0-5][0-9]\",apply:function(a){this.minutes=+a}},m:{regex:\"[0-9]|[1-5][0-9]\",apply:function(a){this.minutes=+a}},sss:{regex:\"[0-9][0-9][0-9]\",apply:function(a){this.milliseconds=+a}},ss:{regex:\"[0-5][0-9]\",apply:function(a){this.seconds=+a}},s:{regex:\"[0-9]|[1-5][0-9]\",apply:function(a){this.seconds=+a}},a:{regex:b.DATETIME_FORMATS.AMPMS.join(\"|\"),apply:function(a){12===this.hours&&(this.hours=0),\"PM\"===a&&(this.hours+=12)}}}},this.init(),this.parse=function(c,g,i){if(!angular.isString(c)||!g)return c;g=b.DATETIME_FORMATS[g]||g,g=g.replace(h,\"\\\\$&\"),b.id!==f&&this.init(),this.parsers[g]||(this.parsers[g]=d(g));var j=this.parsers[g],k=j.regex,l=j.map,m=c.match(k);if(m&&m.length){var n,o;angular.isDate(i)&&!isNaN(i.getTime())?n={year:i.getFullYear(),month:i.getMonth(),date:i.getDate(),hours:i.getHours(),minutes:i.getMinutes(),seconds:i.getSeconds(),milliseconds:i.getMilliseconds()}:(i&&a.warn(\"dateparser:\",\"baseDate is not a valid date\"),n={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var p=1,q=m.length;q>p;p++){var r=l[p-1];r.apply&&r.apply.call(n,m[p])}return e(n.year,n.month,n.date)&&(angular.isDate(i)&&!isNaN(i.getTime())?(o=new Date(i),o.setFullYear(n.year,n.month,n.date,n.hours,n.minutes,n.seconds,n.milliseconds||0)):o=new Date(n.year,n.month,n.date,n.hours,n.minutes,n.seconds,n.milliseconds||0)),o}}}]),angular.module(\"ui.bootstrap.dateparser\").value(\"$dateParserSuppressWarning\",!1).service(\"dateParser\",[\"$log\",\"$dateParserSuppressWarning\",\"uibDateParser\",function(a,b,c){b||a.warn(\"dateParser is now deprecated. Use uibDateParser instead.\"),angular.extend(this,c)}]),angular.module(\"ui.bootstrap.position\",[]).factory(\"$uibPosition\",[\"$document\",\"$window\",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return\"static\"===(c(a,\"position\")||\"static\")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop(\"offsetWidth\"),height:g.height||b.prop(\"offsetHeight\"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop(\"offsetWidth\"),height:d.height||c.prop(\"offsetHeight\"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split(\"-\"),j=i[0],k=i[1]||\"center\";e=d?this.offset(a):this.position(a),f=b.prop(\"offsetWidth\"),g=b.prop(\"offsetHeight\");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case\"right\":h={top:m[k](),left:l[j]()};break;case\"left\":h={top:m[k](),left:e.left-f};break;case\"bottom\":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module(\"ui.bootstrap.position\").value(\"$positionSuppressWarning\",!1).service(\"$position\",[\"$log\",\"$positionSuppressWarning\",\"$uibPosition\",function(a,b,c){b||a.warn(\"$position is now deprecated. Use $uibPosition instead.\"),angular.extend(this,c)}]),angular.module(\"ui.bootstrap.datepicker\",[\"ui.bootstrap.dateparser\",\"ui.bootstrap.position\"]).value(\"$datepickerSuppressError\",!1).constant(\"uibDatepickerConfig\",{formatDay:\"dd\",formatMonth:\"MMMM\",formatYear:\"yyyy\",formatDayHeader:\"EEE\",formatDayTitle:\"MMMM yyyy\",formatMonthTitle:\"yyyy\",datepickerMode:\"day\",minMode:\"day\",maxMode:\"year\",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller(\"UibDatepickerController\",[\"$scope\",\"$attrs\",\"$parse\",\"$interpolate\",\"$log\",\"dateFilter\",\"uibDatepickerConfig\",\"$datepickerSuppressError\",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=[\"day\",\"month\",\"year\"],angular.forEach([\"formatDay\",\"formatMonth\",\"formatYear\",\"formatDayHeader\",\"formatDayTitle\",\"formatMonthTitle\",\"showWeeks\",\"startingDay\",\"yearRange\",\"shortcutPropagation\"],function(c,e){i[c]=angular.isDefined(b[c])?6>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):g[c]}),angular.forEach([\"minDate\",\"maxDate\"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=g[d]?new Date(g[d]):null}),angular.forEach([\"minMode\",\"maxMode\"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(c){i[d]=angular.isDefined(c)?c:b[d],a[d]=i[d],(\"minMode\"==d&&i.modes.indexOf(a.datepickerMode)<i.modes.indexOf(i[d])||\"maxMode\"==d&&i.modes.indexOf(a.datepickerMode)>i.modes.indexOf(i[d]))&&(a.datepickerMode=i[d])}):(i[d]=g[d]||null,a[d]=i[d])}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId=\"datepicker-\"+a.$id+\"-\"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(j.$isEmpty(j.$modelValue)||j.$invalid)&&(i.activeDate=a,i.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$viewValue){var a=new Date(j.$viewValue),b=!isNaN(a);b?this.activeDate=a:h||e.error('Datepicker directive: \"ng-model\" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$viewValue?new Date(j.$viewValue):null;j.$setValidity(\"dateDisabled\",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$viewValue?new Date(j.$viewValue):null;return{date:a,label:f(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$viewValue?new Date(j.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:\"enter\",32:\"space\",33:\"pageup\",34:\"pagedown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\"};var k=function(){i.element[0].focus()};a.$on(\"uib:datepicker.focus\",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),i.shortcutPropagation||b.stopPropagation(),\"enter\"===c||\"space\"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate)}else!b.ctrlKey||\"up\"!==c&&\"down\"!==c?(i.handleKeyDown(c,b),i.refreshView()):a.toggleMode(\"up\"===c?1:-1)}}]).controller(\"UibDaypickerController\",[\"$scope\",\"$element\",\"dateFilter\",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+\"-\"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,\"EEEE\")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if(\"left\"===a)c-=1;else if(\"up\"===a)c-=7;else if(\"right\"===a)c+=1;else if(\"down\"===a)c+=7;else if(\"pageup\"===a||\"pagedown\"===a){var e=this.activeDate.getMonth()+(\"pageup\"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else\"home\"===a?c=1:\"end\"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller(\"UibMonthpickerController\",[\"$scope\",\"$element\",\"dateFilter\",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+\"-\"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,3)},this.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if(\"left\"===a)c-=1;else if(\"up\"===a)c-=3;else if(\"right\"===a)c+=1;else if(\"down\"===a)c+=3;else if(\"pageup\"===a||\"pagedown\"===a){var d=this.activeDate.getFullYear()+(\"pageup\"===a?-1:1);this.activeDate.setFullYear(d)}else\"home\"===a?c=0:\"end\"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller(\"UibYearpickerController\",[\"$scope\",\"$element\",\"dateFilter\",function(a,b,c){function d(a){return parseInt((a-1)/e,10)*e+1}var e;this.element=b,this.yearpickerInit=function(){e=this.yearRange,this.step={years:e}},this._refreshView=function(){for(var b,c=new Array(e),f=0,g=d(this.activeDate.getFullYear());e>f;f++)b=new Date(this.activeDate),b.setFullYear(g+f,0,1),c[f]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+\"-\"+f});a.title=[c[0].label,c[e-1].label].join(\" - \"),a.rows=this.split(c,5)},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();\"left\"===a?c-=1:\"up\"===a?c-=5:\"right\"===a?c+=1:\"down\"===a?c+=5:\"pageup\"===a||\"pagedown\"===a?c+=(\"pageup\"===a?-1:1)*this.step.years:\"home\"===a?c=d(this.activeDate.getFullYear()):\"end\"===a&&(c=d(this.activeDate.getFullYear())+e-1),this.activeDate.setFullYear(c)}}]).directive(\"uibDatepicker\",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/datepicker/datepicker.html\"},scope:{datepickerMode:\"=?\",dateDisabled:\"&\",customClass:\"&\",shortcutPropagation:\"&?\"},require:[\"uibDatepicker\",\"^ngModel\"],controller:\"UibDatepickerController\",controllerAs:\"datepicker\",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive(\"uibDaypicker\",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/datepicker/day.html\"},require:[\"^?uibDatepicker\",\"uibDaypicker\",\"^?datepicker\"],controller:\"UibDaypickerController\",link:function(a,b,c,d){var e=d[0]||d[2],f=d[1];f.init(e)}}}).directive(\"uibMonthpicker\",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/datepicker/month.html\"},require:[\"^?uibDatepicker\",\"uibMonthpicker\",\"^?datepicker\"],controller:\"UibMonthpickerController\",link:function(a,b,c,d){var e=d[0]||d[2],f=d[1];f.init(e)}}}).directive(\"uibYearpicker\",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/datepicker/year.html\"},require:[\"^?uibDatepicker\",\"uibYearpicker\",\"^?datepicker\"],controller:\"UibYearpickerController\",link:function(a,b,c,d){var e=d[0]||d[2];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}).constant(\"uibDatepickerPopupConfig\",{datepickerPopup:\"yyyy-MM-dd\",datepickerPopupTemplateUrl:\"template/datepicker/popup.html\",datepickerTemplateUrl:\"template/datepicker/datepicker.html\",html5Types:{date:\"yyyy-MM-dd\",\"datetime-local\":\"yyyy-MM-ddTHH:mm:ss.sss\",month:\"yyyy-MM\"},currentText:\"Today\",clearText:\"Clear\",closeText:\"Done\",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).controller(\"UibDatepickerPopupController\",[\"$scope\",\"$element\",\"$attrs\",\"$compile\",\"$parse\",\"$document\",\"$rootScope\",\"$uibPosition\",\"dateFilter\",\"uibDateParser\",\"uibDatepickerPopupConfig\",\"$timeout\",function(a,b,c,d,e,f,g,h,i,j,k,l){\r\nfunction m(a){return a.replace(/([A-Z])/g,function(a){return\"-\"+a.toLowerCase()})}function n(b){if(angular.isNumber(b)&&(b=new Date(b)),b){if(angular.isDate(b)&&!isNaN(b))return b;if(angular.isString(b)){var c=j.parse(b,r,a.date);return isNaN(c)?void 0:c}return void 0}return null}function o(a,b){var d=a||b;if(!c.ngRequired&&!d)return!0;if(angular.isNumber(d)&&(d=new Date(d)),d){if(angular.isDate(d)&&!isNaN(d))return!0;if(angular.isString(d)){var e=j.parse(d,r);return!isNaN(e)}return!1}return!0}function p(c){var d=A[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}function q(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}var r,s,t,u,v,w,x,y,z,A,B={},C=!1;a.watchData={},this.init=function(h){if(z=h,s=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):k.closeOnDateSelection,t=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):k.appendToBody,u=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):k.onOpenFocus,v=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:k.datepickerPopupTemplateUrl,w=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:k.datepickerTemplateUrl,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):k.showButtonBar,k.html5Types[c.type]?(r=k.html5Types[c.type],C=!0):(r=c.datepickerPopup||c.uibDatepickerPopup||k.datepickerPopup,c.$observe(\"uibDatepickerPopup\",function(a,b){var c=a||k.datepickerPopup;if(c!==r&&(r=c,z.$modelValue=null,!r))throw new Error(\"uibDatepickerPopup must have a date format specified.\")})),!r)throw new Error(\"uibDatepickerPopup must have a date format specified.\");if(C&&c.datepickerPopup)throw new Error(\"HTML5 date input types do not support custom formats.\");if(x=angular.element(\"<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>\"),x.attr({\"ng-model\":\"date\",\"ng-change\":\"dateSelection(date)\",\"template-url\":v}),y=angular.element(x.children()[0]),y.attr(\"template-url\",w),C&&\"month\"===c.type&&(y.attr(\"datepicker-mode\",'\"month\"'),y.attr(\"min-mode\",\"month\")),c.datepickerOptions){var l=a.$parent.$eval(c.datepickerOptions);l&&l.initDate&&(a.initDate=l.initDate,y.attr(\"init-date\",\"initDate\"),delete l.initDate),angular.forEach(l,function(a,b){y.attr(m(b),a)})}angular.forEach([\"minMode\",\"maxMode\",\"minDate\",\"maxDate\",\"datepickerMode\",\"initDate\",\"shortcutPropagation\"],function(b){if(c[b]){var d=e(c[b]);if(a.$parent.$watch(d,function(c){a.watchData[b]=c,(\"minDate\"===b||\"maxDate\"===b)&&(B[b]=new Date(c))}),y.attr(m(b),\"watchData.\"+b),\"datepickerMode\"===b){var f=d.assign;a.$watch(\"watchData.\"+b,function(b,c){angular.isFunction(f)&&b!==c&&f(a.$parent,b)})}}}),c.dateDisabled&&y.attr(\"date-disabled\",\"dateDisabled({ date: date, mode: mode })\"),c.showWeeks&&y.attr(\"show-weeks\",c.showWeeks),c.customClass&&y.attr(\"custom-class\",\"customClass({ date: date, mode: mode })\"),C?z.$formatters.push(function(b){return a.date=b,b}):(z.$$parserName=\"date\",z.$validators.date=o,z.$parsers.unshift(n),z.$formatters.push(function(b){return a.date=b,z.$isEmpty(b)?b:i(b,r)})),z.$viewChangeListeners.push(function(){a.date=j.parse(z.$viewValue,r,a.date)}),b.bind(\"keydown\",q),A=d(x)(a),x.remove(),t?f.find(\"body\").append(A):b.after(A),a.$on(\"$destroy\",function(){a.isOpen===!0&&(g.$$phase||a.$apply(function(){a.isOpen=!1})),A.remove(),b.unbind(\"keydown\",q),f.unbind(\"click\",p)})},a.getText=function(b){return a[b+\"Text\"]||k[b+\"Text\"]},a.isDisabled=function(b){return\"today\"===b&&(b=new Date),a.watchData.minDate&&a.compare(b,B.minDate)<0||a.watchData.maxDate&&a.compare(b,B.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){angular.isDefined(c)&&(a.date=c);var d=a.date?i(a.date,r):null;b.val(d),z.$setViewValue(d),s&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(a.isOpen=!1,b[0].focus())},a.select=function(b){if(\"today\"===b){var c=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(c.getFullYear(),c.getMonth(),c.getDate())):b=new Date(c.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(){a.isOpen=!1,b[0].focus()},a.$watch(\"isOpen\",function(c){c?(a.position=t?h.offset(b):h.position(b),a.position.top=a.position.top+b.prop(\"offsetHeight\"),l(function(){u&&a.$broadcast(\"uib:datepicker.focus\"),f.bind(\"click\",p)},0,!1)):f.unbind(\"click\",p)})}]).directive(\"uibDatepickerPopup\",function(){return{require:[\"ngModel\",\"uibDatepickerPopup\"],controller:\"UibDatepickerPopupController\",scope:{isOpen:\"=?\",currentText:\"@\",clearText:\"@\",closeText:\"@\",dateDisabled:\"&\",customClass:\"&\"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive(\"uibDatepickerPopupWrap\",function(){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||\"template/datepicker/popup.html\"}}}),angular.module(\"ui.bootstrap.datepicker\").value(\"$datepickerSuppressWarning\",!1).controller(\"DatepickerController\",[\"$scope\",\"$attrs\",\"$parse\",\"$interpolate\",\"$log\",\"dateFilter\",\"uibDatepickerConfig\",\"$datepickerSuppressError\",\"$datepickerSuppressWarning\",function(a,b,c,d,e,f,g,h,i){i||e.warn(\"DatepickerController is now deprecated. Use UibDatepickerController instead.\");var j=this,k={$setViewValue:angular.noop};this.modes=[\"day\",\"month\",\"year\"],angular.forEach([\"formatDay\",\"formatMonth\",\"formatYear\",\"formatDayHeader\",\"formatDayTitle\",\"formatMonthTitle\",\"showWeeks\",\"startingDay\",\"yearRange\",\"shortcutPropagation\"],function(c,e){j[c]=angular.isDefined(b[c])?6>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):g[c]}),angular.forEach([\"minDate\",\"maxDate\"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){j[d]=a?new Date(a):null,j.refreshView()}):j[d]=g[d]?new Date(g[d]):null}),angular.forEach([\"minMode\",\"maxMode\"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(c){j[d]=angular.isDefined(c)?c:b[d],a[d]=j[d],(\"minMode\"==d&&j.modes.indexOf(a.datepickerMode)<j.modes.indexOf(j[d])||\"maxMode\"==d&&j.modes.indexOf(a.datepickerMode)>j.modes.indexOf(j[d]))&&(a.datepickerMode=j[d])}):(j[d]=g[d]||null,a[d]=j[d])}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId=\"datepicker-\"+a.$id+\"-\"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(k.$isEmpty(k.$modelValue)||k.$invalid)&&(j.activeDate=a,j.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===j.compare(b.date,j.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){k=a,k.$render=function(){j.render()}},this.render=function(){if(k.$viewValue){var a=new Date(k.$viewValue),b=!isNaN(a);b?this.activeDate=a:h||e.error('Datepicker directive: \"ng-model\" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=k.$viewValue?new Date(k.$viewValue):null;k.$setValidity(\"dateDisabled\",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=k.$viewValue?new Date(k.$viewValue):null;return{date:a,label:f(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},this.fixTimeZone=function(a){var b=a.getHours();a.setHours(23===b?b+2:0)},a.select=function(b){if(a.datepickerMode===j.minMode){var c=k.$viewValue?new Date(k.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),k.$setViewValue(c),k.$render()}else j.activeDate=b,a.datepickerMode=j.modes[j.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=j.activeDate.getFullYear()+a*(j.step.years||0),c=j.activeDate.getMonth()+a*(j.step.months||0);j.activeDate.setFullYear(b,c,1),j.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===j.maxMode&&1===b||a.datepickerMode===j.minMode&&-1===b||(a.datepickerMode=j.modes[j.modes.indexOf(a.datepickerMode)+b])},a.keys={13:\"enter\",32:\"space\",33:\"pageup\",34:\"pagedown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\"};var l=function(){j.element[0].focus()};a.$on(\"uib:datepicker.focus\",l),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),j.shortcutPropagation||b.stopPropagation(),\"enter\"===c||\"space\"===c){if(j.isDisabled(j.activeDate))return;a.select(j.activeDate)}else!b.ctrlKey||\"up\"!==c&&\"down\"!==c?(j.handleKeyDown(c,b),j.refreshView()):a.toggleMode(\"up\"===c?1:-1)}}]).directive(\"datepicker\",[\"$log\",\"$datepickerSuppressWarning\",function(a,b){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||\"template/datepicker/datepicker.html\"},scope:{datepickerMode:\"=?\",dateDisabled:\"&\",customClass:\"&\",shortcutPropagation:\"&?\"},require:[\"datepicker\",\"^ngModel\"],controller:\"DatepickerController\",controllerAs:\"datepicker\",link:function(c,d,e,f){b||a.warn(\"datepicker is now deprecated. Use uib-datepicker instead.\");var g=f[0],h=f[1];g.init(h)}}}]).directive(\"daypicker\",[\"$log\",\"$datepickerSuppressWarning\",function(a,b){return{replace:!0,templateUrl:\"template/datepicker/day.html\",require:[\"^datepicker\",\"daypicker\"],controller:\"UibDaypickerController\",link:function(c,d,e,f){b||a.warn(\"daypicker is now deprecated. Use uib-daypicker instead.\");var g=f[0],h=f[1];h.init(g)}}}]).directive(\"monthpicker\",[\"$log\",\"$datepickerSuppressWarning\",function(a,b){return{replace:!0,templateUrl:\"template/datepicker/month.html\",require:[\"^datepicker\",\"monthpicker\"],controller:\"UibMonthpickerController\",link:function(c,d,e,f){b||a.warn(\"monthpicker is now deprecated. Use uib-monthpicker instead.\");var g=f[0],h=f[1];h.init(g)}}}]).directive(\"yearpicker\",[\"$log\",\"$datepickerSuppressWarning\",function(a,b){return{replace:!0,templateUrl:\"template/datepicker/year.html\",require:[\"^datepicker\",\"yearpicker\"],controller:\"UibYearpickerController\",link:function(c,d,e,f){b||a.warn(\"yearpicker is now deprecated. Use uib-yearpicker instead.\");var g=f[0];angular.extend(g,f[1]),g.yearpickerInit(),g.refreshView()}}}]).directive(\"datepickerPopup\",[\"$log\",\"$datepickerSuppressWarning\",function(a,b){return{require:[\"ngModel\",\"datepickerPopup\"],controller:\"UibDatepickerPopupController\",scope:{isOpen:\"=?\",currentText:\"@\",clearText:\"@\",closeText:\"@\",dateDisabled:\"&\",customClass:\"&\"},link:function(c,d,e,f){b||a.warn(\"datepicker-popup is now deprecated. Use uib-datepicker-popup instead.\");var g=f[0],h=f[1];h.init(g)}}}]).directive(\"datepickerPopupWrap\",[\"$log\",\"$datepickerSuppressWarning\",function(a,b){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||\"template/datepicker/popup.html\"},link:function(){b||a.warn(\"datepicker-popup-wrap is now deprecated. Use uib-datepicker-popup-wrap instead.\")}}}]),angular.module(\"ui.bootstrap.dropdown\",[\"ui.bootstrap.position\"]).constant(\"uibDropdownConfig\",{openClass:\"open\"}).service(\"uibDropdownService\",[\"$document\",\"$rootScope\",function(a,b){var c=null;this.open=function(b){c||(a.bind(\"click\",d),a.bind(\"keydown\",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.unbind(\"click\",d),a.unbind(\"keydown\",e))};var d=function(a){if(c&&(!a||\"disabled\"!==c.getAutoClose())){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&\"outsideClick\"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):c.isKeynavEnabled()&&/(38|40)/.test(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller(\"UibDropdownController\",[\"$scope\",\"$element\",\"$attrs\",\"$parse\",\"uibDropdownConfig\",\"uibDropdownService\",\"$animate\",\"$uibPosition\",\"$document\",\"$compile\",\"$templateRequest\",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=a.$new(),p=e.openClass,q=angular.noop,r=c.onToggle?d(c.onToggle):angular.noop,s=!1,t=!1;b.addClass(\"dropdown\"),this.init=function(){c.isOpen&&(m=d(c.isOpen),q=m.assign,a.$watch(m,function(a){o.isOpen=!!a})),s=angular.isDefined(c.dropdownAppendToBody),t=angular.isDefined(c.uibKeyboardNav),s&&n.dropdownMenu&&(i.find(\"body\").append(n.dropdownMenu),b.on(\"$destroy\",function(){n.dropdownMenu.remove()}))},this.toggle=function(a){return o.isOpen=arguments.length?!!a:!o.isOpen},this.isOpen=function(){return o.isOpen},o.getToggleElement=function(){return n.toggleElement},o.getAutoClose=function(){return c.autoClose||\"always\"},o.getElement=function(){return b},o.isKeynavEnabled=function(){return t},o.focusDropdownEntry=function(a){var c=n.dropdownMenu?angular.element(n.dropdownMenu).find(\"a\"):angular.element(b).find(\"ul\").eq(0).find(\"a\");switch(a){case 40:angular.isNumber(n.selectedOption)?n.selectedOption=n.selectedOption===c.length-1?n.selectedOption:n.selectedOption+1:n.selectedOption=0;break;case 38:angular.isNumber(n.selectedOption)?n.selectedOption=0===n.selectedOption?0:n.selectedOption-1:n.selectedOption=c.length-1}c[n.selectedOption].focus()},o.getDropdownElement=function(){return n.dropdownMenu},o.focusToggleElement=function(){n.toggleElement&&n.toggleElement[0].focus()},o.$watch(\"isOpen\",function(c,d){if(s&&n.dropdownMenu){var e=h.positionElements(b,n.dropdownMenu,\"bottom-left\",!0),i={top:e.top+\"px\",display:c?\"block\":\"none\"},m=n.dropdownMenu.hasClass(\"dropdown-menu-right\");m?(i.left=\"auto\",i.right=window.innerWidth-(e.left+b.prop(\"offsetWidth\"))+\"px\"):(i.left=e.left+\"px\",i.right=\"auto\"),n.dropdownMenu.css(i)}if(g[c?\"addClass\":\"removeClass\"](b,p).then(function(){angular.isDefined(c)&&c!==d&&r(a,{open:!!c})}),c)n.dropdownMenuTemplateUrl&&k(n.dropdownMenuTemplateUrl).then(function(a){l=o.$new(),j(a.trim())(l,function(a){var b=a;n.dropdownMenu.replaceWith(b),n.dropdownMenu=b})}),o.focusToggleElement(),f.open(o);else{if(n.dropdownMenuTemplateUrl){l&&l.$destroy();var t=angular.element('<ul class=\"dropdown-menu\"></ul>');n.dropdownMenu.replaceWith(t),n.dropdownMenu=t}f.close(o),n.selectedOption=null}angular.isFunction(q)&&q(a,c)}),a.$on(\"$locationChangeSuccess\",function(){\"disabled\"!==o.getAutoClose()&&(o.isOpen=!1)});var u=a.$on(\"$destroy\",function(){o.$destroy()});o.$on(\"$destroy\",u)}]).directive(\"uibDropdown\",function(){return{controller:\"UibDropdownController\",link:function(a,b,c,d){d.init()}}}).directive(\"uibDropdownMenu\",function(){return{restrict:\"AC\",require:\"?^uibDropdown\",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass(\"dropdown-menu\");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive(\"uibKeyboardNav\",function(){return{restrict:\"A\",require:\"?^uibDropdown\",link:function(a,b,c,d){b.bind(\"keydown\",function(a){if(-1!==[38,40].indexOf(a.which)){a.preventDefault(),a.stopPropagation();var b=d.dropdownMenu.find(\"a\");switch(a.which){case 40:angular.isNumber(d.selectedOption)?d.selectedOption=d.selectedOption===b.length-1?d.selectedOption:d.selectedOption+1:d.selectedOption=0;break;case 38:angular.isNumber(d.selectedOption)?d.selectedOption=0===d.selectedOption?0:d.selectedOption-1:d.selectedOption=b.length-1}b[d.selectedOption].focus()}})}}}).directive(\"uibDropdownToggle\",function(){return{require:\"?^uibDropdown\",link:function(a,b,c,d){if(d){b.addClass(\"dropdown-toggle\"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass(\"disabled\")||c.disabled||a.$apply(function(){d.toggle()})};b.bind(\"click\",e),b.attr({\"aria-haspopup\":!0,\"aria-expanded\":!1}),a.$watch(d.isOpen,function(a){b.attr(\"aria-expanded\",!!a)}),a.$on(\"$destroy\",function(){b.unbind(\"click\",e)})}}}}),angular.module(\"ui.bootstrap.dropdown\").value(\"$dropdownSuppressWarning\",!1).service(\"dropdownService\",[\"$log\",\"$dropdownSuppressWarning\",\"uibDropdownService\",function(a,b,c){b||a.warn(\"dropdownService is now deprecated. Use uibDropdownService instead.\"),angular.extend(this,c)}]).controller(\"DropdownController\",[\"$scope\",\"$element\",\"$attrs\",\"$parse\",\"uibDropdownConfig\",\"uibDropdownService\",\"$animate\",\"$uibPosition\",\"$document\",\"$compile\",\"$templateRequest\",\"$log\",\"$dropdownSuppressWarning\",function(a,b,c,d,e,f,g,h,i,j,k,l,m){m||l.warn(\"DropdownController is now deprecated. Use UibDropdownController instead.\");var n,o,p=this,q=a.$new(),r=e.openClass,s=angular.noop,t=c.onToggle?d(c.onToggle):angular.noop,u=!1,v=!1;b.addClass(\"dropdown\"),this.init=function(){c.isOpen&&(o=d(c.isOpen),s=o.assign,a.$watch(o,function(a){q.isOpen=!!a})),u=angular.isDefined(c.dropdownAppendToBody),v=angular.isDefined(c.uibKeyboardNav),u&&p.dropdownMenu&&(i.find(\"body\").append(p.dropdownMenu),b.on(\"$destroy\",function(){p.dropdownMenu.remove()}))},this.toggle=function(a){return q.isOpen=arguments.length?!!a:!q.isOpen},this.isOpen=function(){return q.isOpen},q.getToggleElement=function(){return p.toggleElement},q.getAutoClose=function(){return c.autoClose||\"always\"},q.getElement=function(){return b},q.isKeynavEnabled=function(){return v},q.focusDropdownEntry=function(a){var c=p.dropdownMenu?angular.element(p.dropdownMenu).find(\"a\"):angular.element(b).find(\"ul\").eq(0).find(\"a\");switch(a){case 40:angular.isNumber(p.selectedOption)?p.selectedOption=p.selectedOption===c.length-1?p.selectedOption:p.selectedOption+1:p.selectedOption=0;break;case 38:angular.isNumber(p.selectedOption)?p.selectedOption=0===p.selectedOption?0:p.selectedOption-1:p.selectedOption=c.length-1}c[p.selectedOption].focus()},q.getDropdownElement=function(){return p.dropdownMenu},q.focusToggleElement=function(){p.toggleElement&&p.toggleElement[0].focus()},q.$watch(\"isOpen\",function(c,d){if(u&&p.dropdownMenu){var e=h.positionElements(b,p.dropdownMenu,\"bottom-left\",!0),i={top:e.top+\"px\",display:c?\"block\":\"none\"},l=p.dropdownMenu.hasClass(\"dropdown-menu-right\");l?(i.left=\"auto\",i.right=window.innerWidth-(e.left+b.prop(\"offsetWidth\"))+\"px\"):(i.left=e.left+\"px\",i.right=\"auto\"),p.dropdownMenu.css(i)}if(g[c?\"addClass\":\"removeClass\"](b,r).then(function(){angular.isDefined(c)&&c!==d&&t(a,{open:!!c})}),c)p.dropdownMenuTemplateUrl&&k(p.dropdownMenuTemplateUrl).then(function(a){n=q.$new(),j(a.trim())(n,function(a){var b=a;p.dropdownMenu.replaceWith(b),p.dropdownMenu=b})}),q.focusToggleElement(),f.open(q);else{if(p.dropdownMenuTemplateUrl){n&&n.$destroy();var m=angular.element('<ul class=\"dropdown-menu\"></ul>');p.dropdownMenu.replaceWith(m),p.dropdownMenu=m}f.close(q),p.selectedOption=null}angular.isFunction(s)&&s(a,c)}),a.$on(\"$locationChangeSuccess\",function(){\"disabled\"!==q.getAutoClose()&&(q.isOpen=!1)});var w=a.$on(\"$destroy\",function(){q.$destroy()});q.$on(\"$destroy\",w)}]).directive(\"dropdown\",[\"$log\",\"$dropdownSuppressWarning\",function(a,b){return{controller:\"DropdownController\",link:function(c,d,e,f){b||a.warn(\"dropdown is now deprecated. Use uib-dropdown instead.\"),f.init()}}}]).directive(\"dropdownMenu\",[\"$log\",\"$dropdownSuppressWarning\",function(a,b){return{restrict:\"AC\",require:\"?^dropdown\",link:function(c,d,e,f){if(f&&!angular.isDefined(e.dropdownNested)){b||a.warn(\"dropdown-menu is now deprecated. Use uib-dropdown-menu instead.\"),d.addClass(\"dropdown-menu\");var g=e.templateUrl;g&&(f.dropdownMenuTemplateUrl=g),f.dropdownMenu||(f.dropdownMenu=d)}}}}]).directive(\"keyboardNav\",[\"$log\",\"$dropdownSuppressWarning\",function(a,b){return{restrict:\"A\",require:\"?^dropdown\",link:function(c,d,e,f){b||a.warn(\"keyboard-nav is now deprecated. Use uib-keyboard-nav instead.\"),d.bind(\"keydown\",function(a){if(-1!==[38,40].indexOf(a.which)){a.preventDefault(),a.stopPropagation();var b=f.dropdownMenu.find(\"a\");switch(a.which){case 40:angular.isNumber(f.selectedOption)?f.selectedOption=f.selectedOption===b.length-1?f.selectedOption:f.selectedOption+1:f.selectedOption=0;break;case 38:angular.isNumber(f.selectedOption)?f.selectedOption=0===f.selectedOption?0:f.selectedOption-1:f.selectedOption=b.length-1}b[f.selectedOption].focus()}})}}}]).directive(\"dropdownToggle\",[\"$log\",\"$dropdownSuppressWarning\",function(a,b){return{require:\"?^dropdown\",link:function(c,d,e,f){if(b||a.warn(\"dropdown-toggle is now deprecated. Use uib-dropdown-toggle instead.\"),f){d.addClass(\"dropdown-toggle\"),f.toggleElement=d;var g=function(a){a.preventDefault(),d.hasClass(\"disabled\")||e.disabled||c.$apply(function(){f.toggle()})};d.bind(\"click\",g),d.attr({\"aria-haspopup\":!0,\"aria-expanded\":!1}),c.$watch(f.isOpen,function(a){d.attr(\"aria-expanded\",!!a)}),c.$on(\"$destroy\",function(){d.unbind(\"click\",g)})}}}}]),angular.module(\"ui.bootstrap.stackedMap\",[]).factory(\"$$stackedMap\",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}),angular.module(\"ui.bootstrap.modal\",[\"ui.bootstrap.stackedMap\"]).factory(\"$$multiMap\",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).directive(\"uibModalBackdrop\",[\"$animate\",\"$injector\",\"$uibModalStack\",function(a,b,c){function d(b,d,f){d.addClass(\"modal-backdrop\"),f.modalInClass&&(e?e(d,{addClass:f.modalInClass}).start():a.addClass(d,f.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(b,c){var g=c();e?e(d,{removeClass:f.modalInClass}).start().then(g):a.removeClass(d,f.modalInClass).then(g)}))}var e=null;return b.has(\"$animateCss\")&&(e=b.get(\"$animateCss\")),{replace:!0,templateUrl:\"template/modal/backdrop.html\",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive(\"uibModalWindow\",[\"$uibModalStack\",\"$q\",\"$animate\",\"$injector\",function(a,b,c,d){var e=null;return d.has(\"$animateCss\")&&(e=d.get(\"$animateCss\")),{scope:{index:\"@\"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||\"template/modal/window.html\"},link:function(d,f,g){f.addClass(g.windowClass||\"\"),f.addClass(g.windowTopClass||\"\"),d.size=g.size,d.close=function(b){var c=a.getTop();c&&c.value.backdrop&&\"static\"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,\"backdrop click\"))},f.on(\"click\",d.close),d.$isRendered=!0;var h=b.defer();g.$observe(\"modalRender\",function(a){\"true\"==a&&h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=e?e(f,{addClass:g.modalInClass}).start():c.addClass(f,g.modalInClass),d.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();e?e(f,{removeClass:g.modalInClass}).start().then(d):c.removeClass(f,g.modalInClass).then(d)})),b.when(h).then(function(){var a=f[0].querySelector(\"[autofocus]\");a?a.focus():f[0].focus()});var i=a.getTop();i&&a.modalRendered(i.key)})}}}]).directive(\"uibModalAnimationClass\",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive(\"uibModalTransclude\",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory(\"$uibModalStack\",[\"$animate\",\"$timeout\",\"$document\",\"$compile\",\"$rootScope\",\"$q\",\"$injector\",\"$$multiMap\",\"$$stackedMap\",function(a,b,c,d,e,f,g,h,i){function j(){for(var a=-1,b=u.keys(),c=0;c<b.length;c++)u.get(b[c]).value.backdrop&&(a=c);return a}function k(a,b){var d=c.find(\"body\").eq(0),e=u.get(a).value;u.remove(a),n(e.modalDomEl,e.modalScope,function(){var b=e.openedClass||t;v.remove(b,a),d.toggleClass(b,v.hasKey(b)),l(!0)}),m(),b&&b.focus?b.focus():d.focus()}function l(a){var b;u.length()>0&&(b=u.top().value,b.modalDomEl.toggleClass(b.windowTopClass||\"\",a))}function m(){if(q&&-1==j()){var a=r;n(q,r,function(){a=null}),q=void 0,r=void 0}}function n(b,c,d){function e(){e.done||(e.done=!0,p?p(b,{event:\"leave\"}).start().then(function(){b.remove()}):a.leave(b),c.$destroy(),d&&d())}var g,h=null,i=function(){return g||(g=f.defer(),h=g.promise),function(){g.resolve()}};return c.$broadcast(w.NOW_CLOSING_EVENT,i),f.when(h).then(e)}function o(a,b,c){return!a.value.modalScope.$broadcast(\"modal.closing\",b,c).defaultPrevented}var p=null;g.has(\"$animateCss\")&&(p=g.get(\"$animateCss\"));var q,r,s,t=\"modal-open\",u=i.createNew(),v=h.createNew(),w={NOW_CLOSING_EVENT:\"modal.stack.now-closing\"},x=0,y=\"a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]\";return e.$watch(j,function(a){r&&(r.index=a)}),c.bind(\"keydown\",function(a){if(a.isDefaultPrevented())return a;var b=u.top();if(b&&b.value.keyboard)switch(a.which){case 27:a.preventDefault(),e.$apply(function(){w.dismiss(b.key,\"escape key press\")});break;case 9:w.loadFocusElementList(b);var c=!1;a.shiftKey?w.isFocusInFirstItem(a)&&(c=w.focusLastFocusableElement()):w.isFocusInLastItem(a)&&(c=w.focusFirstFocusableElement()),c&&(a.preventDefault(),a.stopPropagation())}}),w.open=function(a,b){var f=c[0].activeElement,g=b.openedClass||t;l(!1),u.add(a,{deferred:b.deferred,renderDeferred:b.renderDeferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard,openedClass:b.openedClass,windowTopClass:b.windowTopClass}),v.put(g,a);var h=c.find(\"body\").eq(0),i=j();if(i>=0&&!q){r=e.$new(!0),r.index=i;var k=angular.element('<div uib-modal-backdrop=\"modal-backdrop\"></div>');k.attr(\"backdrop-class\",b.backdropClass),b.animation&&k.attr(\"modal-animation\",\"true\"),q=d(k)(r),h.append(q)}var m=angular.element('<div uib-modal-window=\"modal-window\"></div>');m.attr({\"template-url\":b.windowTemplateUrl,\"window-class\":b.windowClass,\"window-top-class\":b.windowTopClass,size:b.size,index:u.length()-1,animate:\"animate\"}).html(b.content),b.animation&&m.attr(\"modal-animation\",\"true\");var n=d(m)(b.scope);u.top().value.modalDomEl=n,u.top().value.modalOpener=f,h.append(n),h.addClass(g),w.clearFocusListCache()},w.close=function(a,b){var c=u.get(a);return c&&o(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),k(a,c.value.modalOpener),!0):!c},w.dismiss=function(a,b){var c=u.get(a);return c&&o(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),k(a,c.value.modalOpener),!0):!c},w.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},w.getTop=function(){return u.top()},w.modalRendered=function(a){var b=u.get(a);b&&b.value.renderDeferred.resolve()},w.focusFirstFocusableElement=function(){return s.length>0?(s[0].focus(),!0):!1},w.focusLastFocusableElement=function(){return s.length>0?(s[s.length-1].focus(),!0):!1},w.isFocusInFirstItem=function(a){return s.length>0?(a.target||a.srcElement)==s[0]:!1},w.isFocusInLastItem=function(a){return s.length>0?(a.target||a.srcElement)==s[s.length-1]:!1},w.clearFocusListCache=function(){s=[],x=0},w.loadFocusElementList=function(a){if((void 0===s||!s.length)&&a){var b=a.value.modalDomEl;b&&b.length&&(s=b[0].querySelectorAll(y))}},w}]).provider(\"$uibModal\",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:[\"$injector\",\"$rootScope\",\"$q\",\"$templateRequest\",\"$controller\",\"$uibModalStack\",\"$modalSuppressWarning\",\"$log\",function(b,c,d,e,f,g,h,i){function j(a){return a.template?d.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}function k(a){var c=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?c.push(d.when(b.invoke(a))):angular.isString(a)?c.push(d.when(b.get(a))):c.push(d.when(a))}),c}var l={},m=null;return l.getPromiseChain=function(){return m},l.open=function(b){function e(){return r}var l=d.defer(),n=d.defer(),o=d.defer(),p={result:l.promise,opened:n.promise,rendered:o.promise,close:function(a){return g.close(p,a)},dismiss:function(a){return g.dismiss(p,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error(\"One of template or templateUrl options is required.\");var q,r=d.all([j(b)].concat(k(b.resolve)));return q=m=d.all([m]).then(e,e).then(function(a){var d=(b.scope||c).$new();d.$close=p.close,d.$dismiss=p.dismiss,d.$on(\"$destroy\",function(){d.$$uibDestructionScheduled||d.$dismiss(\"$uibUnscheduledDestruction\")});var e,j={},k=1;b.controller&&(j.$scope=d,j.$uibModalInstance=p,Object.defineProperty(j,\"$modalInstance\",{get:function(){return h||i.warn(\"$modalInstance is now deprecated. Use $uibModalInstance instead.\"),p}}),angular.forEach(b.resolve,function(b,c){j[c]=a[k++]}),e=f(b.controller,j),b.controllerAs&&(b.bindToController&&angular.extend(e,d),d[b.controllerAs]=e)),g.open(p,{scope:d,deferred:l,renderDeferred:o,content:a[0],animation:b.animation,backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowTopClass:b.windowTopClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size,openedClass:b.openedClass}),n.resolve(!0)},function(a){n.reject(a),l.reject(a)})[\"finally\"](function(){m===q&&(m=null)}),p},l}]};return a}),angular.module(\"ui.bootstrap.modal\").value(\"$modalSuppressWarning\",!1).directive(\"modalBackdrop\",[\"$animate\",\"$injector\",\"$modalStack\",\"$log\",\"$modalSuppressWarning\",function(a,b,c,d,e){function f(b,f,h){e||d.warn(\"modal-backdrop is now deprecated. Use uib-modal-backdrop instead.\"),f.addClass(\"modal-backdrop\"),h.modalInClass&&(g?g(f,{addClass:h.modalInClass}).start():a.addClass(f,h.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(b,c){var d=c();g?g(f,{removeClass:h.modalInClass}).start().then(d):a.removeClass(f,h.modalInClass).then(d)}))}var g=null;return b.has(\"$animateCss\")&&(g=b.get(\"$animateCss\")),{replace:!0,templateUrl:\"template/modal/backdrop.html\",compile:function(a,b){return a.addClass(b.backdropClass),f}}}]).directive(\"modalWindow\",[\"$modalStack\",\"$q\",\"$animate\",\"$injector\",\"$log\",\"$modalSuppressWarning\",function(a,b,c,d,e,f){var g=null;return d.has(\"$animateCss\")&&(g=d.get(\"$animateCss\")),{scope:{index:\"@\"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||\"template/modal/window.html\"},link:function(d,h,i){f||e.warn(\"modal-window is now deprecated. Use uib-modal-window instead.\"),h.addClass(i.windowClass||\"\"),h.addClass(i.windowTopClass||\"\"),d.size=i.size,d.close=function(b){var c=a.getTop();c&&c.value.backdrop&&\"static\"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,\"backdrop click\"))},h.on(\"click\",d.close),d.$isRendered=!0;var j=b.defer();i.$observe(\"modalRender\",function(a){\"true\"==a&&j.resolve()}),j.promise.then(function(){var e=null;i.modalInClass&&(e=g?g(h,{addClass:i.modalInClass}).start():c.addClass(h,i.modalInClass),d.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();g?g(h,{removeClass:i.modalInClass}).start().then(d):c.removeClass(h,i.modalInClass).then(d)})),b.when(e).then(function(){var a=h[0].querySelector(\"[autofocus]\");a?a.focus():h[0].focus()});var f=a.getTop();f&&a.modalRendered(f.key)})}}}]).directive(\"modalAnimationClass\",[\"$log\",\"$modalSuppressWarning\",function(a,b){return{compile:function(c,d){b||a.warn(\"modal-animation-class is now deprecated. Use uib-modal-animation-class instead.\"),d.modalAnimation&&c.addClass(d.modalAnimationClass)}}}]).directive(\"modalTransclude\",[\"$log\",\"$modalSuppressWarning\",function(a,b){return{link:function(c,d,e,f,g){\r\nb||a.warn(\"modal-transclude is now deprecated. Use uib-modal-transclude instead.\"),g(c.$parent,function(a){d.empty(),d.append(a)})}}}]).service(\"$modalStack\",[\"$animate\",\"$timeout\",\"$document\",\"$compile\",\"$rootScope\",\"$q\",\"$injector\",\"$$multiMap\",\"$$stackedMap\",\"$uibModalStack\",\"$log\",\"$modalSuppressWarning\",function(a,b,c,d,e,f,g,h,i,j,k,l){l||k.warn(\"$modalStack is now deprecated. Use $uibModalStack instead.\"),angular.extend(this,j)}]).provider(\"$modal\",[\"$uibModalProvider\",function(a){angular.extend(this,a),this.$get=[\"$injector\",\"$log\",\"$modalSuppressWarning\",function(b,c,d){return d||c.warn(\"$modal is now deprecated. Use $uibModal instead.\"),b.invoke(a.$get)}]}]),angular.module(\"ui.bootstrap.pagination\",[]).controller(\"UibPaginationController\",[\"$scope\",\"$attrs\",\"$parse\",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(g,h){e=g,this.config=h,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=h.itemsPerPage,a.$watch(\"totalItems\",function(){a.totalPages=d.calculateTotalPages()}),a.$watch(\"totalPages\",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b,c){c&&c.preventDefault();var d=!a.ngDisabled||!c;d&&a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+\"Text\"]||d.config[b+\"Text\"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).constant(\"uibPaginationConfig\",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:\"First\",previousText:\"Previous\",nextText:\"Next\",lastText:\"Last\",rotate:!0}).directive(\"uibPagination\",[\"$parse\",\"uibPaginationConfig\",function(a,b){return{restrict:\"EA\",scope:{totalItems:\"=\",firstText:\"@\",previousText:\"@\",nextText:\"@\",lastText:\"@\",ngDisabled:\"=\"},require:[\"uibPagination\",\"?ngModel\"],controller:\"UibPaginationController\",controllerAs:\"pagination\",templateUrl:function(a,b){return b.templateUrl||\"template/pagination/pagination.html\"},replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,\"...\",!1);c.unshift(j)}if(b>e){var m=g(e+1,\"...\",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant(\"uibPagerConfig\",{itemsPerPage:10,previousText:\"« Previous\",nextText:\"Next »\",align:!0}).directive(\"uibPager\",[\"uibPagerConfig\",function(a){return{restrict:\"EA\",scope:{totalItems:\"=\",previousText:\"@\",nextText:\"@\",ngDisabled:\"=\"},require:[\"uibPager\",\"?ngModel\"],controller:\"UibPaginationController\",controllerAs:\"pagination\",templateUrl:function(a,b){return b.templateUrl||\"template/pagination/pager.html\"},replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module(\"ui.bootstrap.pagination\").value(\"$paginationSuppressWarning\",!1).controller(\"PaginationController\",[\"$scope\",\"$attrs\",\"$parse\",\"$log\",\"$paginationSuppressWarning\",function(a,b,c,d,e){e||d.warn(\"PaginationController is now deprecated. Use UibPaginationController instead.\");var f=this,g={$setViewValue:angular.noop},h=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d,e){g=d,this.config=e,g.$render=function(){f.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){f.itemsPerPage=parseInt(b,10),a.totalPages=f.calculateTotalPages()}):this.itemsPerPage=e.itemsPerPage,a.$watch(\"totalItems\",function(){a.totalPages=f.calculateTotalPages()}),a.$watch(\"totalPages\",function(b){h(a.$parent,b),a.page>b?a.selectPage(b):g.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(g.$viewValue,10)||1},a.selectPage=function(b,c){c&&c.preventDefault();var d=!a.ngDisabled||!c;d&&a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),g.$setViewValue(b),g.$render())},a.getText=function(b){return a[b+\"Text\"]||f.config[b+\"Text\"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).directive(\"pagination\",[\"$parse\",\"uibPaginationConfig\",\"$log\",\"$paginationSuppressWarning\",function(a,b,c,d){return{restrict:\"EA\",scope:{totalItems:\"=\",firstText:\"@\",previousText:\"@\",nextText:\"@\",lastText:\"@\",ngDisabled:\"=\"},require:[\"pagination\",\"?ngModel\"],controller:\"PaginationController\",controllerAs:\"pagination\",templateUrl:function(a,b){return b.templateUrl||\"template/pagination/pagination.html\"},replace:!0,link:function(e,f,g,h){function i(a,b,c){return{number:a,text:b,active:c}}function j(a,b){var c=[],d=1,e=b,f=angular.isDefined(m)&&b>m;f&&(n?(d=Math.max(a-Math.floor(m/2),1),e=d+m-1,e>b&&(e=b,d=e-m+1)):(d=(Math.ceil(a/m)-1)*m+1,e=Math.min(d+m-1,b)));for(var g=d;e>=g;g++){var h=i(g,g,g===a);c.push(h)}if(f&&!n){if(d>1){var j=i(d-1,\"...\",!1);c.unshift(j)}if(b>e){var k=i(e+1,\"...\",!1);c.push(k)}}return c}d||c.warn(\"pagination is now deprecated. Use uib-pagination instead.\");var k=h[0],l=h[1];if(l){var m=angular.isDefined(g.maxSize)?e.$parent.$eval(g.maxSize):b.maxSize,n=angular.isDefined(g.rotate)?e.$parent.$eval(g.rotate):b.rotate;e.boundaryLinks=angular.isDefined(g.boundaryLinks)?e.$parent.$eval(g.boundaryLinks):b.boundaryLinks,e.directionLinks=angular.isDefined(g.directionLinks)?e.$parent.$eval(g.directionLinks):b.directionLinks,k.init(l,b),g.maxSize&&e.$parent.$watch(a(g.maxSize),function(a){m=parseInt(a,10),k.render()});var o=k.render;k.render=function(){o(),e.page>0&&e.page<=e.totalPages&&(e.pages=j(e.page,e.totalPages))}}}}}]).directive(\"pager\",[\"uibPagerConfig\",\"$log\",\"$paginationSuppressWarning\",function(a,b,c){return{restrict:\"EA\",scope:{totalItems:\"=\",previousText:\"@\",nextText:\"@\",ngDisabled:\"=\"},require:[\"pager\",\"?ngModel\"],controller:\"PaginationController\",controllerAs:\"pagination\",templateUrl:function(a,b){return b.templateUrl||\"template/pagination/pager.html\"},replace:!0,link:function(d,e,f,g){c||b.warn(\"pager is now deprecated. Use uib-pager instead.\");var h=g[0],i=g[1];i&&(d.align=angular.isDefined(f.align)?d.$parent.$eval(f.align):a.align,h.init(i,a))}}}]),angular.module(\"ui.bootstrap.tooltip\",[\"ui.bootstrap.position\",\"ui.bootstrap.stackedMap\"]).provider(\"$uibTooltip\",function(){function a(a){var b=/[A-Z]/g,c=\"-\";return a.replace(b,function(a,b){return(b?c:\"\")+a.toLowerCase()})}var b={placement:\"top\",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:\"mouseleave\",click:\"click\",focus:\"blur\",none:\"\"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=[\"$window\",\"$compile\",\"$timeout\",\"$document\",\"$uibPosition\",\"$interpolate\",\"$rootScope\",\"$parse\",\"$$stackedMap\",function(e,f,g,h,i,j,k,l,m){var n=m.createNew();return h.on(\"keypress\",function(a){if(27===a.which){var b=n.top();b&&(b.value.close(),n.removeTop(),b=null)}}),function(e,k,m,o){function p(a){var b=(a||o.trigger||m).split(\" \"),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}o=angular.extend({},b,d,o);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t=\"<div \"+q+'-popup title=\"'+r+\"title\"+s+'\" '+(o.useContentExp?'content-exp=\"contentExp()\" ':'content=\"'+r+\"content\"+s+'\" ')+'placement=\"'+r+\"placement\"+s+'\" popup-class=\"'+r+\"popupClass\"+s+'\" animation=\"animation\" is-open=\"isOpen\"origin-scope=\"origScope\" style=\"visibility: hidden; display: block; top: -9999px; left: -9999px;\"></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){L.isOpen?q():m()}function m(){(!K||a.$eval(d[k+\"Enable\"]))&&(u(),x(),L.popupDelay?F||(F=g(r,L.popupDelay,!1)):r())}function q(){s(),L.popupCloseDelay?G||(G=g(t,L.popupCloseDelay,!1)):t()}function r(){return s(),u(),L.content?(v(),void L.$evalAsync(function(){L.isOpen=!0,y(!0),Q()})):angular.noop}function s(){F&&(g.cancel(F),F=null),H&&(g.cancel(H),H=null)}function t(){s(),u(),L&&L.$evalAsync(function(){L.isOpen=!1,y(!1),L.animation?E||(E=g(w,150,!1)):w()})}function u(){G&&(g.cancel(G),G=null),E&&(g.cancel(E),E=null)}function v(){C||(D=L.$new(),C=c(D,function(a){I?h.find(\"body\").append(a):b.after(a)}),z())}function w(){A(),E=null,C&&(C.remove(),C=null),D&&(D.$destroy(),D=null)}function x(){L.title=d[k+\"Title\"],O?L.content=O(a):L.content=d[e],L.popupClass=d[k+\"Class\"],L.placement=angular.isDefined(d[k+\"Placement\"])?d[k+\"Placement\"]:o.placement;var b=parseInt(d[k+\"PopupDelay\"],10),c=parseInt(d[k+\"PopupCloseDelay\"],10);L.popupDelay=isNaN(b)?o.popupDelay:b,L.popupCloseDelay=isNaN(c)?o.popupCloseDelay:c}function y(b){N&&angular.isFunction(N.assign)&&N.assign(a,b)}function z(){P.length=0,O?(P.push(a.$watch(O,function(a){L.content=a,!a&&L.isOpen&&t()})),P.push(D.$watch(function(){M||(M=!0,D.$$postDigest(function(){M=!1,L&&L.isOpen&&Q()}))}))):P.push(d.$observe(e,function(a){L.content=a,!a&&L.isOpen?t():Q()})),P.push(d.$observe(k+\"Title\",function(a){L.title=a,L.isOpen&&Q()})),P.push(d.$observe(k+\"Placement\",function(a){L.placement=a?a:o.placement,L.isOpen&&Q()}))}function A(){P.length&&(angular.forEach(P,function(a){a()}),P.length=0)}function B(){var a=d[k+\"Trigger\"];R(),J=p(a),\"none\"!==J.show&&J.show.forEach(function(a,c){a===J.hide[c]?b[0].addEventListener(a,j):a&&(b[0].addEventListener(a,m),J.hide[c].split(\" \").forEach(function(a){b[0].addEventListener(a,q)})),b.on(\"keypress\",function(a){27===a.which&&q()})})}var C,D,E,F,G,H,I=angular.isDefined(o.appendToBody)?o.appendToBody:!1,J=p(void 0),K=angular.isDefined(d[k+\"Enable\"]),L=a.$new(!0),M=!1,N=angular.isDefined(d[k+\"IsOpen\"])?l(d[k+\"IsOpen\"]):!1,O=o.useContentExp?l(d[e]):!1,P=[],Q=function(){C&&C.html()&&(H||(H=g(function(){C.css({top:0,left:0});var a=i.positionElements(b,C,L.placement,I);a.top+=\"px\",a.left+=\"px\",a.visibility=\"visible\",C.css(a),H=null},0,!1)))};L.origScope=a,L.isOpen=!1,n.add(L,{close:t}),L.contentExp=function(){return L.content},d.$observe(\"disabled\",function(a){a&&s(),a&&L.isOpen&&t()}),N&&a.$watch(N,function(a){L&&!a===L.isOpen&&j()});var R=function(){J.show.forEach(function(a){b.unbind(a,m)}),J.hide.forEach(function(a){a.split(\" \").forEach(function(a){b[0].removeEventListener(a,q)})})};B();var S=a.$eval(d[k+\"Animation\"]);L.animation=angular.isDefined(S)?!!S:o.animation;var T=a.$eval(d[k+\"AppendToBody\"]);I=angular.isDefined(T)?T:I,I&&a.$on(\"$locationChangeSuccess\",function(){L.isOpen&&t()}),a.$on(\"$destroy\",function(){s(),u(),R(),w(),n.remove(L),L=null})}}}}}]}).directive(\"uibTooltipTemplateTransclude\",[\"$animate\",\"$sce\",\"$compile\",\"$templateRequest\",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit(\"$includeContentLoaded\",b)}},function(){g===l&&(m(),e.$emit(\"$includeContentError\",b))}),e.$emit(\"$includeContentRequested\",b)):m()}),e.$on(\"$destroy\",m)}}}]).directive(\"uibTooltipClasses\",function(){return{restrict:\"A\",link:function(a,b,c){a.placement&&b.addClass(a.placement),a.popupClass&&b.addClass(a.popupClass),a.animation()&&b.addClass(c.tooltipAnimationClass)}}}).directive(\"uibTooltipPopup\",function(){return{replace:!0,scope:{content:\"@\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\"},templateUrl:\"template/tooltip/tooltip-popup.html\",link:function(a,b){b.addClass(\"tooltip\")}}}).directive(\"uibTooltip\",[\"$uibTooltip\",function(a){return a(\"uibTooltip\",\"tooltip\",\"mouseenter\")}]).directive(\"uibTooltipTemplatePopup\",function(){return{replace:!0,scope:{contentExp:\"&\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\",originScope:\"&\"},templateUrl:\"template/tooltip/tooltip-template-popup.html\",link:function(a,b){b.addClass(\"tooltip\")}}}).directive(\"uibTooltipTemplate\",[\"$uibTooltip\",function(a){return a(\"uibTooltipTemplate\",\"tooltip\",\"mouseenter\",{useContentExp:!0})}]).directive(\"uibTooltipHtmlPopup\",function(){return{replace:!0,scope:{contentExp:\"&\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\"},templateUrl:\"template/tooltip/tooltip-html-popup.html\",link:function(a,b){b.addClass(\"tooltip\")}}}).directive(\"uibTooltipHtml\",[\"$uibTooltip\",function(a){return a(\"uibTooltipHtml\",\"tooltip\",\"mouseenter\",{useContentExp:!0})}]),angular.module(\"ui.bootstrap.tooltip\").value(\"$tooltipSuppressWarning\",!1).provider(\"$tooltip\",[\"$uibTooltipProvider\",function(a){angular.extend(this,a),this.$get=[\"$log\",\"$tooltipSuppressWarning\",\"$injector\",function(b,c,d){return c||b.warn(\"$tooltip is now deprecated. Use $uibTooltip instead.\"),d.invoke(a.$get)}]}]).directive(\"tooltipTemplateTransclude\",[\"$animate\",\"$sce\",\"$compile\",\"$templateRequest\",\"$log\",\"$tooltipSuppressWarning\",function(a,b,c,d,e,f){return{link:function(g,h,i){f||e.warn(\"tooltip-template-transclude is now deprecated. Use uib-tooltip-template-transclude instead.\");var j,k,l,m=g.$eval(i.tooltipTemplateTranscludeScope),n=0,o=function(){k&&(k.remove(),k=null),j&&(j.$destroy(),j=null),l&&(a.leave(l).then(function(){k=null}),k=l,l=null)};g.$watch(b.parseAsResourceUrl(i.tooltipTemplateTransclude),function(b){var e=++n;b?(d(b,!0).then(function(d){if(e===n){var f=m.$new(),g=d,i=c(g)(f,function(b){o(),a.enter(b,h)});j=f,l=i,j.$emit(\"$includeContentLoaded\",b)}},function(){e===n&&(o(),g.$emit(\"$includeContentError\",b))}),g.$emit(\"$includeContentRequested\",b)):o()}),g.$on(\"$destroy\",o)}}}]).directive(\"tooltipClasses\",[\"$log\",\"$tooltipSuppressWarning\",function(a,b){return{restrict:\"A\",link:function(c,d,e){b||a.warn(\"tooltip-classes is now deprecated. Use uib-tooltip-classes instead.\"),c.placement&&d.addClass(c.placement),c.popupClass&&d.addClass(c.popupClass),c.animation()&&d.addClass(e.tooltipAnimationClass)}}}]).directive(\"tooltipPopup\",[\"$log\",\"$tooltipSuppressWarning\",function(a,b){return{replace:!0,scope:{content:\"@\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\"},templateUrl:\"template/tooltip/tooltip-popup.html\",link:function(c,d){b||a.warn(\"tooltip-popup is now deprecated. Use uib-tooltip-popup instead.\"),d.addClass(\"tooltip\")}}}]).directive(\"tooltip\",[\"$tooltip\",function(a){return a(\"tooltip\",\"tooltip\",\"mouseenter\")}]).directive(\"tooltipTemplatePopup\",[\"$log\",\"$tooltipSuppressWarning\",function(a,b){return{replace:!0,scope:{contentExp:\"&\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\",originScope:\"&\"},templateUrl:\"template/tooltip/tooltip-template-popup.html\",link:function(c,d){b||a.warn(\"tooltip-template-popup is now deprecated. Use uib-tooltip-template-popup instead.\"),d.addClass(\"tooltip\")}}}]).directive(\"tooltipTemplate\",[\"$tooltip\",function(a){return a(\"tooltipTemplate\",\"tooltip\",\"mouseenter\",{useContentExp:!0})}]).directive(\"tooltipHtmlPopup\",[\"$log\",\"$tooltipSuppressWarning\",function(a,b){return{replace:!0,scope:{contentExp:\"&\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\"},templateUrl:\"template/tooltip/tooltip-html-popup.html\",link:function(c,d){b||a.warn(\"tooltip-html-popup is now deprecated. Use uib-tooltip-html-popup instead.\"),d.addClass(\"tooltip\")}}}]).directive(\"tooltipHtml\",[\"$tooltip\",function(a){return a(\"tooltipHtml\",\"tooltip\",\"mouseenter\",{useContentExp:!0})}]),angular.module(\"ui.bootstrap.popover\",[\"ui.bootstrap.tooltip\"]).directive(\"uibPopoverTemplatePopup\",function(){return{replace:!0,scope:{title:\"@\",contentExp:\"&\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\",originScope:\"&\"},templateUrl:\"template/popover/popover-template.html\",link:function(a,b){b.addClass(\"popover\")}}}).directive(\"uibPopoverTemplate\",[\"$uibTooltip\",function(a){return a(\"uibPopoverTemplate\",\"popover\",\"click\",{useContentExp:!0})}]).directive(\"uibPopoverHtmlPopup\",function(){return{replace:!0,scope:{contentExp:\"&\",title:\"@\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\"},templateUrl:\"template/popover/popover-html.html\",link:function(a,b){b.addClass(\"popover\")}}}).directive(\"uibPopoverHtml\",[\"$uibTooltip\",function(a){return a(\"uibPopoverHtml\",\"popover\",\"click\",{useContentExp:!0})}]).directive(\"uibPopoverPopup\",function(){return{replace:!0,scope:{title:\"@\",content:\"@\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\"},templateUrl:\"template/popover/popover.html\",link:function(a,b){b.addClass(\"popover\")}}}).directive(\"uibPopover\",[\"$uibTooltip\",function(a){return a(\"uibPopover\",\"popover\",\"click\")}]),angular.module(\"ui.bootstrap.popover\").value(\"$popoverSuppressWarning\",!1).directive(\"popoverTemplatePopup\",[\"$log\",\"$popoverSuppressWarning\",function(a,b){return{replace:!0,scope:{title:\"@\",contentExp:\"&\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\",originScope:\"&\"},templateUrl:\"template/popover/popover-template.html\",link:function(c,d){b||a.warn(\"popover-template-popup is now deprecated. Use uib-popover-template-popup instead.\"),d.addClass(\"popover\")}}}]).directive(\"popoverTemplate\",[\"$tooltip\",function(a){return a(\"popoverTemplate\",\"popover\",\"click\",{useContentExp:!0})}]).directive(\"popoverHtmlPopup\",[\"$log\",\"$popoverSuppressWarning\",function(a,b){return{replace:!0,scope:{contentExp:\"&\",title:\"@\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\"},templateUrl:\"template/popover/popover-html.html\",link:function(c,d){b||a.warn(\"popover-html-popup is now deprecated. Use uib-popover-html-popup instead.\"),d.addClass(\"popover\")}}}]).directive(\"popoverHtml\",[\"$tooltip\",function(a){return a(\"popoverHtml\",\"popover\",\"click\",{useContentExp:!0})}]).directive(\"popoverPopup\",[\"$log\",\"$popoverSuppressWarning\",function(a,b){return{replace:!0,scope:{title:\"@\",content:\"@\",placement:\"@\",popupClass:\"@\",animation:\"&\",isOpen:\"&\"},templateUrl:\"template/popover/popover.html\",link:function(c,d){b||a.warn(\"popover-popup is now deprecated. Use uib-popover-popup instead.\"),d.addClass(\"popover\")}}}]).directive(\"popover\",[\"$tooltip\",function(a){return a(\"popover\",\"popover\",\"click\")}]),angular.module(\"ui.bootstrap.progressbar\",[]).constant(\"uibProgressConfig\",{animate:!0,max:100}).controller(\"UibProgressController\",[\"$scope\",\"$attrs\",\"uibProgressConfig\",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c,f){e||c.css({transition:\"none\"}),this.bars.push(b),b.max=a.max,b.title=f&&angular.isDefined(f.title)?f.title:\"progressbar\",b.$watch(\"value\",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){var a=d.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on(\"$destroy\",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch(\"max\",function(b){d.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive(\"uibProgress\",function(){return{replace:!0,transclude:!0,controller:\"UibProgressController\",require:\"uibProgress\",scope:{max:\"=?\"},templateUrl:\"template/progressbar/progress.html\"}}).directive(\"uibBar\",function(){return{replace:!0,transclude:!0,require:\"^uibProgress\",scope:{value:\"=\",type:\"@\"},templateUrl:\"template/progressbar/bar.html\",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive(\"uibProgressbar\",function(){return{replace:!0,transclude:!0,controller:\"UibProgressController\",scope:{value:\"=\",max:\"=?\",type:\"@\"},templateUrl:\"template/progressbar/progressbar.html\",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module(\"ui.bootstrap.progressbar\").value(\"$progressSuppressWarning\",!1).controller(\"ProgressController\",[\"$scope\",\"$attrs\",\"uibProgressConfig\",\"$log\",\"$progressSuppressWarning\",function(a,b,c,d,e){e||d.warn(\"ProgressController is now deprecated. Use UibProgressController instead.\");var f=this,g=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c,d){g||c.css({transition:\"none\"}),this.bars.push(b),b.max=a.max,b.title=d&&angular.isDefined(d.title)?d.title:\"progressbar\",b.$watch(\"value\",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){b.percent=+(100*b.value/b.max).toFixed(2);var a=f.bars.reduce(function(a,b){return a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on(\"$destroy\",function(){c=null,f.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)},a.$watch(\"max\",function(b){f.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive(\"progress\",[\"$log\",\"$progressSuppressWarning\",function(a,b){return{replace:!0,transclude:!0,controller:\"ProgressController\",require:\"progress\",scope:{max:\"=?\",title:\"@?\"},templateUrl:\"template/progressbar/progress.html\",link:function(){b||a.warn(\"progress is now deprecated. Use uib-progress instead.\")}}}]).directive(\"bar\",[\"$log\",\"$progressSuppressWarning\",function(a,b){return{replace:!0,transclude:!0,require:\"^progress\",scope:{value:\"=\",type:\"@\"},templateUrl:\"template/progressbar/bar.html\",link:function(c,d,e,f){b||a.warn(\"bar is now deprecated. Use uib-bar instead.\"),f.addBar(c,d)}}}]).directive(\"progressbar\",[\"$log\",\"$progressSuppressWarning\",function(a,b){return{replace:!0,transclude:!0,controller:\"ProgressController\",scope:{value:\"=\",max:\"=?\",type:\"@\"},templateUrl:\"template/progressbar/progressbar.html\",link:function(c,d,e,f){b||a.warn(\"progressbar is now deprecated. Use uib-progressbar instead.\"),f.addBar(c,angular.element(d.children()[0]),{title:e.title})}}}]),angular.module(\"ui.bootstrap.rating\",[]).constant(\"uibRatingConfig\",{max:5,stateOn:null,stateOff:null,titles:[\"one\",\"two\",\"three\",\"four\",\"five\"]}).controller(\"UibRatingController\",[\"$scope\",\"$attrs\",\"uibRatingConfig\",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive(\"uibRating\",function(){return{require:[\"uibRating\",\"ngModel\"],scope:{readonly:\"=?\",onHover:\"&\",onLeave:\"&\"},controller:\"UibRatingController\",templateUrl:\"template/rating/rating.html\",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module(\"ui.bootstrap.rating\").value(\"$ratingSuppressWarning\",!1).controller(\"RatingController\",[\"$scope\",\"$attrs\",\"$controller\",\"$log\",\"$ratingSuppressWarning\",function(a,b,c,d,e){e||d.warn(\"RatingController is now deprecated. Use UibRatingController instead.\"),angular.extend(this,c(\"UibRatingController\",{$scope:a,$attrs:b}))}]).directive(\"rating\",[\"$log\",\"$ratingSuppressWarning\",function(a,b){return{require:[\"rating\",\"ngModel\"],scope:{readonly:\"=?\",onHover:\"&\",onLeave:\"&\"},controller:\"RatingController\",templateUrl:\"template/rating/rating.html\",replace:!0,link:function(c,d,e,f){b||a.warn(\"rating is now deprecated. Use uib-rating instead.\");var g=f[0],h=f[1];g.init(h)}}}]),angular.module(\"ui.bootstrap.tabs\",[]).controller(\"UibTabsetController\",[\"$scope\",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on(\"$destroy\",function(){d=!0})}]).directive(\"uibTabset\",function(){return{restrict:\"EA\",transclude:!0,replace:!0,scope:{type:\"@\"},controller:\"UibTabsetController\",templateUrl:\"template/tabs/tabset.html\",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive(\"uibTab\",[\"$parse\",function(a){return{require:\"^uibTabset\",restrict:\"EA\",replace:!0,templateUrl:\"template/tabs/tab.html\",transclude:!0,scope:{active:\"=?\",heading:\"@\",onSelect:\"&select\",onDeselect:\"&deselect\"},controller:function(){},link:function(b,c,d,e,f){b.$watch(\"active\",function(a){a&&e.select(b)}),b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},e.addTab(b),b.$on(\"$destroy\",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive(\"uibTabHeadingTransclude\",function(){return{restrict:\"A\",require:[\"?^uibTab\",\"?^tab\"],link:function(a,b){a.$watch(\"headingElement\",function(a){a&&(b.html(\"\"),b.append(a))})}}}).directive(\"uibTabContentTransclude\",function(){function a(a){return a.tagName&&(a.hasAttribute(\"tab-heading\")||a.hasAttribute(\"data-tab-heading\")||a.hasAttribute(\"x-tab-heading\")||a.hasAttribute(\"uib-tab-heading\")||a.hasAttribute(\"data-uib-tab-heading\")||a.hasAttribute(\"x-uib-tab-heading\")||\"tab-heading\"===a.tagName.toLowerCase()||\"data-tab-heading\"===a.tagName.toLowerCase()||\"x-tab-heading\"===a.tagName.toLowerCase()||\"uib-tab-heading\"===a.tagName.toLowerCase()||\"data-uib-tab-heading\"===a.tagName.toLowerCase()||\"x-uib-tab-heading\"===a.tagName.toLowerCase())}return{restrict:\"A\",require:[\"?^uibTabset\",\"?^tabset\"],link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module(\"ui.bootstrap.tabs\").value(\"$tabsSuppressWarning\",!1).controller(\"TabsetController\",[\"$scope\",\"$controller\",\"$log\",\"$tabsSuppressWarning\",function(a,b,c,d){d||c.warn(\"TabsetController is now deprecated. Use UibTabsetController instead.\"),angular.extend(this,b(\"UibTabsetController\",{$scope:a}))}]).directive(\"tabset\",[\"$log\",\"$tabsSuppressWarning\",function(a,b){return{restrict:\"EA\",transclude:!0,replace:!0,scope:{type:\"@\"},controller:\"TabsetController\",templateUrl:\"template/tabs/tabset.html\",link:function(c,d,e){b||a.warn(\"tabset is now deprecated. Use uib-tabset instead.\"),c.vertical=angular.isDefined(e.vertical)?c.$parent.$eval(e.vertical):!1,c.justified=angular.isDefined(e.justified)?c.$parent.$eval(e.justified):!1}}}]).directive(\"tab\",[\"$parse\",\"$log\",\"$tabsSuppressWarning\",function(a,b,c){return{require:\"^tabset\",restrict:\"EA\",replace:!0,templateUrl:\"template/tabs/tab.html\",transclude:!0,scope:{active:\"=?\",heading:\"@\",onSelect:\"&select\",onDeselect:\"&deselect\"},controller:function(){},link:function(d,e,f,g,h){c||b.warn(\"tab is now deprecated. Use uib-tab instead.\"),d.$watch(\"active\",function(a){a&&g.select(d)}),d.disabled=!1,f.disable&&d.$parent.$watch(a(f.disable),function(a){d.disabled=!!a}),d.select=function(){d.disabled||(d.active=!0)},g.addTab(d),d.$on(\"$destroy\",function(){g.removeTab(d)}),d.$transcludeFn=h}}}]).directive(\"tabHeadingTransclude\",[\"$log\",\"$tabsSuppressWarning\",function(a,b){return{restrict:\"A\",require:\"^tab\",link:function(c,d){b||a.warn(\"tab-heading-transclude is now deprecated. Use uib-tab-heading-transclude instead.\"),c.$watch(\"headingElement\",function(a){a&&(d.html(\"\"),d.append(a))})}}}]).directive(\"tabContentTransclude\",[\"$log\",\"$tabsSuppressWarning\",function(a,b){function c(a){return a.tagName&&(a.hasAttribute(\"tab-heading\")||a.hasAttribute(\"data-tab-heading\")||a.hasAttribute(\"x-tab-heading\")||\"tab-heading\"===a.tagName.toLowerCase()||\"data-tab-heading\"===a.tagName.toLowerCase()||\"x-tab-heading\"===a.tagName.toLowerCase())}return{restrict:\"A\",require:\"^tabset\",link:function(d,e,f){b||a.warn(\"tab-content-transclude is now deprecated. Use uib-tab-content-transclude instead.\");var g=d.$eval(f.tabContentTransclude);g.$transcludeFn(g.$parent,function(a){angular.forEach(a,function(a){c(a)?g.headingElement=a:e.append(a)})})}}}]),angular.module(\"ui.bootstrap.timepicker\",[]).constant(\"uibTimepickerConfig\",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller(\"UibTimepickerController\",[\"$scope\",\"$element\",\"$attrs\",\"$parse\",\"$log\",\"$locale\",\"uibTimepickerConfig\",function(a,b,c,d,e,f,g){function h(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===r[1]&&(b+=12)),b):void 0}function i(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function j(a){return angular.isDefined(a)&&a.toString().length<2?\"0\"+a:a.toString()}function k(a){l(),q.$setViewValue(new Date(p)),m(a)}function l(){q.$setValidity(\"time\",!0),a.invalidHours=!1,a.invalidMinutes=!1}function m(b){var c=p.getHours(),d=p.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours=\"h\"===b?c:j(c),\"m\"!==b&&(a.minutes=j(d)),a.meridian=p.getHours()<12?r[0]:r[1]}function n(a,b){var c=new Date(a.getTime()+6e4*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes()),d}function o(a){p=n(p,a),k()}var p=new Date,q={$setViewValue:angular.noop},r=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr(\"tabindex\"),this.init=function(b,d){q=b,q.$render=this.render,q.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;h&&this.setupMousewheelEvents(e,f);var i=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;i&&this.setupArrowkeyEvents(e,f),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f)};var s=g.hourStep;c.hourStep&&a.$parent.$watch(d(c.hourStep),function(a){s=parseInt(a,10)});var t=g.minuteStep;c.minuteStep&&a.$parent.$watch(d(c.minuteStep),function(a){t=parseInt(a,10)});var u;a.$parent.$watch(d(c.min),function(a){var b=new Date(a);u=isNaN(b)?void 0:b});var v;a.$parent.$watch(d(c.max),function(a){var b=new Date(a);v=isNaN(b)?void 0:b}),a.noIncrementHours=function(){var a=n(p,60*s);\r\nreturn a>v||p>a&&u>a},a.noDecrementHours=function(){var a=n(p,60*-s);return u>a||a>p&&a>v},a.noIncrementMinutes=function(){var a=n(p,t);return a>v||p>a&&u>a},a.noDecrementMinutes=function(){var a=n(p,-t);return u>a||a>p&&a>v},a.noToggleMeridian=function(){return p.getHours()<13?n(p,720)>v:n(p,-720)<u},a.showMeridian=g.showMeridian,c.showMeridian&&a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,q.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(p.setHours(c),k())}else m()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind(\"mousewheel wheel\",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind(\"mousewheel wheel\",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c){b.bind(\"keydown\",function(b){38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply())}),c.bind(\"keydown\",function(b){38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply())})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){q.$setViewValue(null),q.$setValidity(\"time\",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=h(),b=i();angular.isDefined(a)&&angular.isDefined(b)?(p.setHours(a),u>p||p>v?d(!0):k(\"h\")):d(!0)},b.bind(\"blur\",function(b){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=j(a.hours)})}),a.updateMinutes=function(){var a=i(),b=h();angular.isDefined(a)&&angular.isDefined(b)?(p.setMinutes(a),u>p||p>v?d(void 0,!0):k(\"m\")):d(void 0,!0)},c.bind(\"blur\",function(b){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=j(a.minutes)})})},this.render=function(){var b=q.$viewValue;isNaN(b)?(q.$setValidity(\"time\",!1),e.error('Timepicker directive: \"ng-model\" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(p=b),u>p||p>v?(q.$setValidity(\"time\",!1),a.invalidHours=!0,a.invalidMinutes=!0):l(),m())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*s)},a.decrementHours=function(){a.noDecrementHours()||o(60*-s)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(t)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(-t)},a.toggleMeridian=function(){a.noToggleMeridian()||o(720*(p.getHours()<12?1:-1))}}]).directive(\"uibTimepicker\",function(){return{restrict:\"EA\",require:[\"uibTimepicker\",\"?^ngModel\"],controller:\"UibTimepickerController\",controllerAs:\"timepicker\",replace:!0,scope:{},templateUrl:function(a,b){return b.templateUrl||\"template/timepicker/timepicker.html\"},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find(\"input\"))}}}),angular.module(\"ui.bootstrap.timepicker\").value(\"$timepickerSuppressWarning\",!1).controller(\"TimepickerController\",[\"$scope\",\"$element\",\"$attrs\",\"$controller\",\"$log\",\"$timepickerSuppressWarning\",function(a,b,c,d,e,f){f||e.warn(\"TimepickerController is now deprecated. Use UibTimepickerController instead.\"),angular.extend(this,d(\"UibTimepickerController\",{$scope:a,$element:b,$attrs:c}))}]).directive(\"timepicker\",[\"$log\",\"$timepickerSuppressWarning\",function(a,b){return{restrict:\"EA\",require:[\"timepicker\",\"?^ngModel\"],controller:\"TimepickerController\",controllerAs:\"timepicker\",replace:!0,scope:{},templateUrl:function(a,b){return b.templateUrl||\"template/timepicker/timepicker.html\"},link:function(c,d,e,f){b||a.warn(\"timepicker is now deprecated. Use uib-timepicker instead.\");var g=f[0],h=f[1];h&&g.init(h,d.find(\"input\"))}}}]),angular.module(\"ui.bootstrap.typeahead\",[\"ui.bootstrap.position\"]).factory(\"uibTypeaheadParser\",[\"$parse\",function(a){var b=/^\\s*([\\s\\S]+?)(?:\\s+as\\s+([\\s\\S]+?))?\\s+for\\s+(?:([\\$\\w][\\$\\w\\d]*))\\s+in\\s+([\\s\\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of \"_modelValue_ (as _label_)? for _item_ in _collection_\" but got \"'+c+'\".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller(\"UibTypeaheadController\",[\"$scope\",\"$element\",\"$attrs\",\"$compile\",\"$parse\",\"$q\",\"$timeout\",\"$document\",\"$window\",\"$rootScope\",\"$uibPosition\",\"uibTypeaheadParser\",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){K.moveInProgress||(K.moveInProgress=!0,K.$digest()),S&&g.cancel(S),S=g(function(){K.matches.length&&n(),K.moveInProgress=!1},r)}function n(){K.position=C?k.offset(b):k.position(b),K.position.top+=b.prop(\"offsetHeight\")}var o,p,q=[9,13,27,38,40],r=200,s=a.$eval(c.typeaheadMinLength);s||0===s||(s=1);var t,u,v=a.$eval(c.typeaheadWaitMs)||0,w=a.$eval(c.typeaheadEditable)!==!1,x=e(c.typeaheadLoading).assign||angular.noop,y=e(c.typeaheadOnSelect),z=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,A=e(c.typeaheadNoResults).assign||angular.noop,B=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,C=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,D=c.typeaheadAppendToElementId||!1,E=a.$eval(c.typeaheadFocusFirst)!==!1,F=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,G=e(c.ngModel),H=e(c.ngModel+\"($$$p)\"),I=function(b,c){return angular.isFunction(G(a))&&p&&p.$options&&p.$options.getterSetter?H(b,{$$$p:c}):G.assign(b,c)},J=l.parse(c.uibTypeahead),K=a.$new(),L=a.$on(\"$destroy\",function(){K.$destroy()});K.$on(\"$destroy\",L);var M=\"typeahead-\"+K.$id+\"-\"+Math.floor(1e4*Math.random());b.attr({\"aria-autocomplete\":\"list\",\"aria-expanded\":!1,\"aria-owns\":M});var N=angular.element(\"<div uib-typeahead-popup></div>\");N.attr({id:M,matches:\"matches\",active:\"activeIdx\",select:\"select(activeIdx)\",\"move-in-progress\":\"moveInProgress\",query:\"query\",position:\"position\"}),angular.isDefined(c.typeaheadTemplateUrl)&&N.attr(\"template-url\",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&N.attr(\"popup-template-url\",c.typeaheadPopupTemplateUrl);var O=function(){K.matches=[],K.activeIdx=-1,b.attr(\"aria-expanded\",!1)},P=function(a){return M+\"-option-\"+a};K.$watch(\"activeIdx\",function(a){0>a?b.removeAttr(\"aria-activedescendant\"):b.attr(\"aria-activedescendant\",P(a))});var Q=function(a,b){return K.matches.length>b&&a?a.toUpperCase()===K.matches[b].label.toUpperCase():!1},R=function(c){var d={$viewValue:c};x(a,!0),A(a,!1),f.when(J.source(a,d)).then(function(e){var f=c===o.$viewValue;if(f&&t)if(e&&e.length>0){K.activeIdx=E?0:-1,A(a,!1),K.matches.length=0;for(var g=0;g<e.length;g++)d[J.itemName]=e[g],K.matches.push({id:P(g),label:J.viewMapper(K,d),model:e[g]});K.query=c,n(),b.attr(\"aria-expanded\",!0),F&&1===K.matches.length&&Q(c,0)&&K.select(0)}else O(),A(a,!0);f&&x(a,!1)},function(){O(),x(a,!1),A(a,!0)})};C&&(angular.element(i).bind(\"resize\",m),h.find(\"body\").bind(\"scroll\",m));var S;K.moveInProgress=!1,K.query=void 0;var T,U=function(a){T=g(function(){R(a)},v)},V=function(){T&&g.cancel(T)};O(),K.select=function(d){var e,f,h={};u=!0,h[J.itemName]=f=K.matches[d].model,e=J.modelMapper(a,h),I(a,e),o.$setValidity(\"editable\",!0),o.$setValidity(\"parse\",!0),y(a,{$item:f,$model:e,$label:J.viewMapper(a,h)}),O(),K.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.bind(\"keydown\",function(a){if(0!==K.matches.length&&-1!==q.indexOf(a.which)){if(-1===K.activeIdx&&(9===a.which||13===a.which))return O(),void K.$digest();a.preventDefault(),40===a.which?(K.activeIdx=(K.activeIdx+1)%K.matches.length,K.$digest()):38===a.which?(K.activeIdx=(K.activeIdx>0?K.activeIdx:K.matches.length)-1,K.$digest()):13===a.which||9===a.which?K.$apply(function(){K.select(K.activeIdx)}):27===a.which&&(a.stopPropagation(),O(),K.$digest())}}),b.bind(\"blur\",function(){z&&K.matches.length&&-1!==K.activeIdx&&!u&&(u=!0,K.$apply(function(){K.select(K.activeIdx)})),t=!1,u=!1});var W=function(a){b[0]!==a.target&&3!==a.which&&0!==K.matches.length&&(O(),j.$$phase||K.$digest())};h.bind(\"click\",W),a.$on(\"$destroy\",function(){h.unbind(\"click\",W),(C||D)&&X.remove(),C&&(angular.element(i).unbind(\"resize\",m),h.find(\"body\").unbind(\"scroll\",m)),N.remove()});var X=d(N)(K);C?h.find(\"body\").append(X):D!==!1?angular.element(h[0].getElementById(D)).append(X):b.after(X),this.init=function(b,c){o=b,p=c,o.$parsers.unshift(function(b){return t=!0,0===s||b&&b.length>=s?v>0?(V(),U(b)):R(b):(x(a,!1),V(),O()),w?b:b?void o.$setValidity(\"editable\",!1):(o.$setValidity(\"editable\",!0),null)}),o.$formatters.push(function(b){var c,d,e={};return w||o.$setValidity(\"editable\",!0),B?(e.$model=b,B(a,e)):(e[J.itemName]=b,c=J.viewMapper(a,e),e[J.itemName]=void 0,d=J.viewMapper(a,e),c!==d?c:b)})}}]).directive(\"uibTypeahead\",function(){return{controller:\"UibTypeaheadController\",require:[\"ngModel\",\"^?ngModelOptions\",\"uibTypeahead\"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive(\"uibTypeaheadPopup\",function(){return{scope:{matches:\"=\",query:\"=\",active:\"=\",position:\"&\",moveInProgress:\"=\",select:\"&\"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||\"template/typeahead/typeahead-popup.html\"},link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive(\"uibTypeaheadMatch\",[\"$templateRequest\",\"$compile\",\"$parse\",function(a,b,c){return{scope:{index:\"=\",match:\"=\",query:\"=\"},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||\"template/typeahead/typeahead-match.html\";a(g).then(function(a){b(a.trim())(d,function(a){e.replaceWith(a)})})}}}]).filter(\"uibTypeaheadHighlight\",[\"$sce\",\"$injector\",\"$log\",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\\]\\\\(){}|-])/g,\"\\\\$1\")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has(\"$sanitize\"),function(b,g){return!f&&e(b)&&c.warn(\"Unsafe use of typeahead please use ngSanitize\"),b=g?(\"\"+b).replace(new RegExp(d(g),\"gi\"),\"<strong>$&</strong>\"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module(\"ui.bootstrap.typeahead\").value(\"$typeaheadSuppressWarning\",!1).service(\"typeaheadParser\",[\"$parse\",\"uibTypeaheadParser\",\"$log\",\"$typeaheadSuppressWarning\",function(a,b,c,d){return d||c.warn(\"typeaheadParser is now deprecated. Use uibTypeaheadParser instead.\"),b}]).directive(\"typeahead\",[\"$compile\",\"$parse\",\"$q\",\"$timeout\",\"$document\",\"$window\",\"$rootScope\",\"$uibPosition\",\"typeaheadParser\",\"$log\",\"$typeaheadSuppressWarning\",function(a,b,c,d,e,f,g,h,i,j,k){var l=[9,13,27,38,40],m=200;return{require:[\"ngModel\",\"^?ngModelOptions\"],link:function(n,o,p,q){function r(){N.moveInProgress||(N.moveInProgress=!0,N.$digest()),V&&d.cancel(V),V=d(function(){N.matches.length&&s(),N.moveInProgress=!1},m)}function s(){N.position=F?h.offset(o):h.position(o),N.position.top+=o.prop(\"offsetHeight\")}k||j.warn(\"typeahead is now deprecated. Use uib-typeahead instead.\");var t=q[0],u=q[1],v=n.$eval(p.typeaheadMinLength);v||0===v||(v=1);var w,x,y=n.$eval(p.typeaheadWaitMs)||0,z=n.$eval(p.typeaheadEditable)!==!1,A=b(p.typeaheadLoading).assign||angular.noop,B=b(p.typeaheadOnSelect),C=angular.isDefined(p.typeaheadSelectOnBlur)?n.$eval(p.typeaheadSelectOnBlur):!1,D=b(p.typeaheadNoResults).assign||angular.noop,E=p.typeaheadInputFormatter?b(p.typeaheadInputFormatter):void 0,F=p.typeaheadAppendToBody?n.$eval(p.typeaheadAppendToBody):!1,G=p.typeaheadAppendToElementId||!1,H=n.$eval(p.typeaheadFocusFirst)!==!1,I=p.typeaheadSelectOnExact?n.$eval(p.typeaheadSelectOnExact):!1,J=b(p.ngModel),K=b(p.ngModel+\"($$$p)\"),L=function(a,b){return angular.isFunction(J(n))&&u&&u.$options&&u.$options.getterSetter?K(a,{$$$p:b}):J.assign(a,b)},M=i.parse(p.typeahead),N=n.$new(),O=n.$on(\"$destroy\",function(){N.$destroy()});N.$on(\"$destroy\",O);var P=\"typeahead-\"+N.$id+\"-\"+Math.floor(1e4*Math.random());o.attr({\"aria-autocomplete\":\"list\",\"aria-expanded\":!1,\"aria-owns\":P});var Q=angular.element(\"<div typeahead-popup></div>\");Q.attr({id:P,matches:\"matches\",active:\"activeIdx\",select:\"select(activeIdx)\",\"move-in-progress\":\"moveInProgress\",query:\"query\",position:\"position\"}),angular.isDefined(p.typeaheadTemplateUrl)&&Q.attr(\"template-url\",p.typeaheadTemplateUrl),angular.isDefined(p.typeaheadPopupTemplateUrl)&&Q.attr(\"popup-template-url\",p.typeaheadPopupTemplateUrl);var R=function(){N.matches=[],N.activeIdx=-1,o.attr(\"aria-expanded\",!1)},S=function(a){return P+\"-option-\"+a};N.$watch(\"activeIdx\",function(a){0>a?o.removeAttr(\"aria-activedescendant\"):o.attr(\"aria-activedescendant\",S(a))});var T=function(a,b){return N.matches.length>b&&a?a.toUpperCase()===N.matches[b].label.toUpperCase():!1},U=function(a){var b={$viewValue:a};A(n,!0),D(n,!1),c.when(M.source(n,b)).then(function(c){var d=a===t.$viewValue;if(d&&w)if(c&&c.length>0){N.activeIdx=H?0:-1,D(n,!1),N.matches.length=0;for(var e=0;e<c.length;e++)b[M.itemName]=c[e],N.matches.push({id:S(e),label:M.viewMapper(N,b),model:c[e]});N.query=a,s(),o.attr(\"aria-expanded\",!0),I&&1===N.matches.length&&T(a,0)&&N.select(0)}else R(),D(n,!0);d&&A(n,!1)},function(){R(),A(n,!1),D(n,!0)})};F&&(angular.element(f).bind(\"resize\",r),e.find(\"body\").bind(\"scroll\",r));var V;N.moveInProgress=!1,R(),N.query=void 0;var W,X=function(a){W=d(function(){U(a)},y)},Y=function(){W&&d.cancel(W)};t.$parsers.unshift(function(a){return w=!0,0===v||a&&a.length>=v?y>0?(Y(),X(a)):U(a):(A(n,!1),Y(),R()),z?a:a?void t.$setValidity(\"editable\",!1):(t.$setValidity(\"editable\",!0),null)}),t.$formatters.push(function(a){var b,c,d={};return z||t.$setValidity(\"editable\",!0),E?(d.$model=a,E(n,d)):(d[M.itemName]=a,b=M.viewMapper(n,d),d[M.itemName]=void 0,c=M.viewMapper(n,d),b!==c?b:a)}),N.select=function(a){var b,c,e={};x=!0,e[M.itemName]=c=N.matches[a].model,b=M.modelMapper(n,e),L(n,b),t.$setValidity(\"editable\",!0),t.$setValidity(\"parse\",!0),B(n,{$item:c,$model:b,$label:M.viewMapper(n,e)}),R(),N.$eval(p.typeaheadFocusOnSelect)!==!1&&d(function(){o[0].focus()},0,!1)},o.bind(\"keydown\",function(a){if(0!==N.matches.length&&-1!==l.indexOf(a.which)){if(-1===N.activeIdx&&(9===a.which||13===a.which))return R(),void N.$digest();a.preventDefault(),40===a.which?(N.activeIdx=(N.activeIdx+1)%N.matches.length,N.$digest()):38===a.which?(N.activeIdx=(N.activeIdx>0?N.activeIdx:N.matches.length)-1,N.$digest()):13===a.which||9===a.which?N.$apply(function(){N.select(N.activeIdx)}):27===a.which&&(a.stopPropagation(),R(),N.$digest())}}),o.bind(\"blur\",function(){C&&N.matches.length&&-1!==N.activeIdx&&!x&&(x=!0,N.$apply(function(){N.select(N.activeIdx)})),w=!1,x=!1});var Z=function(a){o[0]!==a.target&&3!==a.which&&0!==N.matches.length&&(R(),g.$$phase||N.$digest())};e.bind(\"click\",Z),n.$on(\"$destroy\",function(){e.unbind(\"click\",Z),(F||G)&&$.remove(),F&&(angular.element(f).unbind(\"resize\",r),e.find(\"body\").unbind(\"scroll\",r)),Q.remove()});var $=a(Q)(N);F?e.find(\"body\").append($):G!==!1?angular.element(e[0].getElementById(G)).append($):o.after($)}}}]).directive(\"typeaheadPopup\",[\"$typeaheadSuppressWarning\",\"$log\",function(a,b){return{scope:{matches:\"=\",query:\"=\",active:\"=\",position:\"&\",moveInProgress:\"=\",select:\"&\"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||\"template/typeahead/typeahead-popup.html\"},link:function(c,d,e){a||b.warn(\"typeahead-popup is now deprecated. Use uib-typeahead-popup instead.\"),c.templateUrl=e.templateUrl,c.isOpen=function(){return c.matches.length>0},c.isActive=function(a){return c.active==a},c.selectActive=function(a){c.active=a},c.selectMatch=function(a){c.select({activeIdx:a})}}}}]).directive(\"typeaheadMatch\",[\"$templateRequest\",\"$compile\",\"$parse\",\"$typeaheadSuppressWarning\",\"$log\",function(a,b,c,d,e){return{restrict:\"EA\",scope:{index:\"=\",match:\"=\",query:\"=\"},link:function(f,g,h){d||e.warn(\"typeahead-match is now deprecated. Use uib-typeahead-match instead.\");var i=c(h.templateUrl)(f.$parent)||\"template/typeahead/typeahead-match.html\";a(i).then(function(a){b(a.trim())(f,function(a){g.replaceWith(a)})})}}}]).filter(\"typeaheadHighlight\",[\"$sce\",\"$injector\",\"$log\",\"$typeaheadSuppressWarning\",function(a,b,c,d){function e(a){return a.replace(/([.?*+^$[\\]\\\\(){}|-])/g,\"\\\\$1\")}function f(a){return/<.*>/g.test(a)}var g;return g=b.has(\"$sanitize\"),function(b,h){return d||c.warn(\"typeaheadHighlight is now deprecated. Use uibTypeaheadHighlight instead.\"),!g&&f(b)&&c.warn(\"Unsafe use of typeahead please use ngSanitize\"),b=h?(\"\"+b).replace(new RegExp(e(h),\"gi\"),\"<strong>$&</strong>\"):b,g||(b=a.trustAsHtml(b)),b}}]),angular.module(\"template/accordion/accordion-group.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/accordion/accordion-group.html\",'<div class=\"panel {{panelClass || \\'panel-default\\'}}\">\\n  <div class=\"panel-heading\" ng-keypress=\"toggleOpen($event)\">\\n    <h4 class=\"panel-title\">\\n      <a href tabindex=\"0\" class=\"accordion-toggle\" ng-click=\"toggleOpen()\" uib-accordion-transclude=\"heading\"><span ng-class=\"{\\'text-muted\\': isDisabled}\">{{heading}}</span></a>\\n    </h4>\\n  </div>\\n  <div class=\"panel-collapse collapse\" uib-collapse=\"!isOpen\">\\n\t  <div class=\"panel-body\" ng-transclude></div>\\n  </div>\\n</div>\\n')}]),angular.module(\"template/accordion/accordion.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/accordion/accordion.html\",'<div class=\"panel-group\" ng-transclude></div>')}]),angular.module(\"template/alert/alert.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/alert/alert.html\",'<div class=\"alert\" ng-class=\"[\\'alert-\\' + (type || \\'warning\\'), closeable ? \\'alert-dismissible\\' : null]\" role=\"alert\">\\n    <button ng-show=\"closeable\" type=\"button\" class=\"close\" ng-click=\"close({$event: $event})\">\\n        <span aria-hidden=\"true\">&times;</span>\\n        <span class=\"sr-only\">Close</span>\\n    </button>\\n    <div ng-transclude></div>\\n</div>\\n')}]),angular.module(\"template/carousel/carousel.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/carousel/carousel.html\",'<div ng-mouseenter=\"pause()\" ng-mouseleave=\"play()\" class=\"carousel\" ng-swipe-right=\"prev()\" ng-swipe-left=\"next()\">\\n  <div class=\"carousel-inner\" ng-transclude></div>\\n  <a role=\"button\" href class=\"left carousel-control\" ng-click=\"prev()\" ng-show=\"slides.length > 1\">\\n    <span aria-hidden=\"true\" class=\"glyphicon glyphicon-chevron-left\"></span>\\n    <span class=\"sr-only\">previous</span>\\n  </a>\\n  <a role=\"button\" href class=\"right carousel-control\" ng-click=\"next()\" ng-show=\"slides.length > 1\">\\n    <span aria-hidden=\"true\" class=\"glyphicon glyphicon-chevron-right\"></span>\\n    <span class=\"sr-only\">next</span>\\n  </a>\\n  <ol class=\"carousel-indicators\" ng-show=\"slides.length > 1\">\\n    <li ng-repeat=\"slide in slides | orderBy:indexOfSlide track by $index\" ng-class=\"{ active: isActive(slide) }\" ng-click=\"select(slide)\">\\n      <span class=\"sr-only\">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if=\"isActive(slide)\">, currently active</span></span>\\n    </li>\\n  </ol>\\n</div>')}]),angular.module(\"template/carousel/slide.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/carousel/slide.html\",'<div ng-class=\"{\\n    \\'active\\': active\\n  }\" class=\"item text-center\" ng-transclude></div>\\n')}]),angular.module(\"template/datepicker/datepicker.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/datepicker/datepicker.html\",'<div ng-switch=\"datepickerMode\" role=\"application\" ng-keydown=\"keydown($event)\">\\n  <uib-daypicker ng-switch-when=\"day\" tabindex=\"0\"></uib-daypicker>\\n  <uib-monthpicker ng-switch-when=\"month\" tabindex=\"0\"></uib-monthpicker>\\n  <uib-yearpicker ng-switch-when=\"year\" tabindex=\"0\"></uib-yearpicker>\\n</div>')}]),angular.module(\"template/datepicker/day.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/datepicker/day.html\",'<table role=\"grid\" aria-labelledby=\"{{::uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\\n  <thead>\\n    <tr>\\n      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\\n      <th colspan=\"{{::5 + showWeeks}}\"><button id=\"{{::uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" ng-disabled=\"datepickerMode === maxMode\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\\n      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\\n    </tr>\\n    <tr>\\n      <th ng-if=\"showWeeks\" class=\"text-center\"></th>\\n      <th ng-repeat=\"label in ::labels track by $index\" class=\"text-center\"><small aria-label=\"{{::label.full}}\">{{::label.abbr}}</small></th>\\n    </tr>\\n  </thead>\\n  <tbody>\\n    <tr ng-repeat=\"row in rows track by $index\">\\n      <td ng-if=\"showWeeks\" class=\"text-center h6\"><em>{{ weekNumbers[$index] }}</em></td>\\n      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{::dt.uid}}\" ng-class=\"::dt.customClass\">\\n        <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-default btn-sm\" ng-class=\"{\\'btn-info\\': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"::{\\'text-muted\\': dt.secondary, \\'text-info\\': dt.current}\">{{::dt.label}}</span></button>\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n')}]),angular.module(\"template/datepicker/month.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/datepicker/month.html\",'<table role=\"grid\" aria-labelledby=\"{{::uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\\n  <thead>\\n    <tr>\\n      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\\n      <th><button id=\"{{::uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" ng-disabled=\"datepickerMode === maxMode\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\\n      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\\n    </tr>\\n  </thead>\\n  <tbody>\\n    <tr ng-repeat=\"row in rows track by $index\">\\n      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{::dt.uid}}\" ng-class=\"::dt.customClass\">\\n        <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-default\" ng-class=\"{\\'btn-info\\': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"::{\\'text-info\\': dt.current}\">{{::dt.label}}</span></button>\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n')}]),angular.module(\"template/datepicker/popup.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/datepicker/popup.html\",'<ul class=\"dropdown-menu\" dropdown-nested ng-if=\"isOpen\" style=\"display: block\" ng-style=\"{top: position.top+\\'px\\', left: position.left+\\'px\\'}\" ng-keydown=\"keydown($event)\" ng-click=\"$event.stopPropagation()\">\\n\t<li ng-transclude></li>\\n\t<li ng-if=\"showButtonBar\" style=\"padding:10px 9px 2px\">\\n\t\t<span class=\"btn-group pull-left\">\\n\t\t\t<button type=\"button\" class=\"btn btn-sm btn-info\" ng-click=\"select(\\'today\\')\" ng-disabled=\"isDisabled(\\'today\\')\">{{ getText(\\'current\\') }}</button>\\n\t\t\t<button type=\"button\" class=\"btn btn-sm btn-danger\" ng-click=\"select(null)\">{{ getText(\\'clear\\') }}</button>\\n\t\t</span>\\n\t\t<button type=\"button\" class=\"btn btn-sm btn-success pull-right\" ng-click=\"close()\">{{ getText(\\'close\\') }}</button>\\n\t</li>\\n</ul>\\n')}]),angular.module(\"template/datepicker/year.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/datepicker/year.html\",'<table role=\"grid\" aria-labelledby=\"{{::uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\\n  <thead>\\n    <tr>\\n      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\\n      <th colspan=\"3\"><button id=\"{{::uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" ng-disabled=\"datepickerMode === maxMode\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\\n      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\\n    </tr>\\n  </thead>\\n  <tbody>\\n    <tr ng-repeat=\"row in rows track by $index\">\\n      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{::dt.uid}}\" ng-class=\"::dt.customClass\">\\n        <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-default\" ng-class=\"{\\'btn-info\\': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"::{\\'text-info\\': dt.current}\">{{::dt.label}}</span></button>\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n')}]),angular.module(\"template/modal/backdrop.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/modal/backdrop.html\",'<div uib-modal-animation-class=\"fade\"\\n     modal-in-class=\"in\"\\n     ng-style=\"{\\'z-index\\': 1040 + (index && 1 || 0) + index*10}\"\\n></div>\\n')}]),angular.module(\"template/modal/window.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/modal/window.html\",'<div modal-render=\"{{$isRendered}}\" tabindex=\"-1\" role=\"dialog\" class=\"modal\"\\n    uib-modal-animation-class=\"fade\"\\n    modal-in-class=\"in\"\\n    ng-style=\"{\\'z-index\\': 1050 + index*10, display: \\'block\\'}\">\\n    <div class=\"modal-dialog\" ng-class=\"size ? \\'modal-\\' + size : \\'\\'\"><div class=\"modal-content\" uib-modal-transclude></div></div>\\n</div>\\n')}]),angular.module(\"template/pagination/pager.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/pagination/pager.html\",'<ul class=\"pager\">\\n  <li ng-class=\"{disabled: noPrevious()||ngDisabled, previous: align}\"><a href ng-click=\"selectPage(page - 1, $event)\">{{::getText(\\'previous\\')}}</a></li>\\n  <li ng-class=\"{disabled: noNext()||ngDisabled, next: align}\"><a href ng-click=\"selectPage(page + 1, $event)\">{{::getText(\\'next\\')}}</a></li>\\n</ul>\\n')}]),angular.module(\"template/pagination/pagination.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/pagination/pagination.html\",'<ul class=\"pagination\">\\n  <li ng-if=\"::boundaryLinks\" ng-class=\"{disabled: noPrevious()||ngDisabled}\" class=\"pagination-first\"><a href ng-click=\"selectPage(1, $event)\">{{::getText(\\'first\\')}}</a></li>\\n  <li ng-if=\"::directionLinks\" ng-class=\"{disabled: noPrevious()||ngDisabled}\" class=\"pagination-prev\"><a href ng-click=\"selectPage(page - 1, $event)\">{{::getText(\\'previous\\')}}</a></li>\\n  <li ng-repeat=\"page in pages track by $index\" ng-class=\"{active: page.active,disabled: ngDisabled&&!page.active}\" class=\"pagination-page\"><a href ng-click=\"selectPage(page.number, $event)\">{{page.text}}</a></li>\\n  <li ng-if=\"::directionLinks\" ng-class=\"{disabled: noNext()||ngDisabled}\" class=\"pagination-next\"><a href ng-click=\"selectPage(page + 1, $event)\">{{::getText(\\'next\\')}}</a></li>\\n  <li ng-if=\"::boundaryLinks\" ng-class=\"{disabled: noNext()||ngDisabled}\" class=\"pagination-last\"><a href ng-click=\"selectPage(totalPages, $event)\">{{::getText(\\'last\\')}}</a></li>\\n</ul>\\n')}]),angular.module(\"template/tooltip/tooltip-html-popup.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/tooltip/tooltip-html-popup.html\",'<div\\n  tooltip-animation-class=\"fade\"\\n  uib-tooltip-classes\\n  ng-class=\"{ in: isOpen() }\">\\n  <div class=\"tooltip-arrow\"></div>\\n  <div class=\"tooltip-inner\" ng-bind-html=\"contentExp()\"></div>\\n</div>\\n')}]),angular.module(\"template/tooltip/tooltip-popup.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/tooltip/tooltip-popup.html\",'<div\\n  tooltip-animation-class=\"fade\"\\n  uib-tooltip-classes\\n  ng-class=\"{ in: isOpen() }\">\\n  <div class=\"tooltip-arrow\"></div>\\n  <div class=\"tooltip-inner\" ng-bind=\"content\"></div>\\n</div>\\n')}]),angular.module(\"template/tooltip/tooltip-template-popup.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/tooltip/tooltip-template-popup.html\",'<div\\n  tooltip-animation-class=\"fade\"\\n  uib-tooltip-classes\\n  ng-class=\"{ in: isOpen() }\">\\n  <div class=\"tooltip-arrow\"></div>\\n  <div class=\"tooltip-inner\"\\n    uib-tooltip-template-transclude=\"contentExp()\"\\n    tooltip-template-transclude-scope=\"originScope()\"></div>\\n</div>\\n')}]),angular.module(\"template/popover/popover-html.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/popover/popover-html.html\",'<div tooltip-animation-class=\"fade\"\\n  uib-tooltip-classes\\n  ng-class=\"{ in: isOpen() }\">\\n  <div class=\"arrow\"></div>\\n\\n  <div class=\"popover-inner\">\\n      <h3 class=\"popover-title\" ng-bind=\"title\" ng-if=\"title\"></h3>\\n      <div class=\"popover-content\" ng-bind-html=\"contentExp()\"></div>\\n  </div>\\n</div>\\n')}]),angular.module(\"template/popover/popover-template.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/popover/popover-template.html\",'<div tooltip-animation-class=\"fade\"\\n  uib-tooltip-classes\\n  ng-class=\"{ in: isOpen() }\">\\n  <div class=\"arrow\"></div>\\n\\n  <div class=\"popover-inner\">\\n      <h3 class=\"popover-title\" ng-bind=\"title\" ng-if=\"title\"></h3>\\n      <div class=\"popover-content\"\\n        uib-tooltip-template-transclude=\"contentExp()\"\\n        tooltip-template-transclude-scope=\"originScope()\"></div>\\n  </div>\\n</div>\\n')}]),angular.module(\"template/popover/popover.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/popover/popover.html\",'<div tooltip-animation-class=\"fade\"\\n  uib-tooltip-classes\\n  ng-class=\"{ in: isOpen() }\">\\n  <div class=\"arrow\"></div>\\n\\n  <div class=\"popover-inner\">\\n      <h3 class=\"popover-title\" ng-bind=\"title\" ng-if=\"title\"></h3>\\n      <div class=\"popover-content\" ng-bind=\"content\"></div>\\n  </div>\\n</div>\\n')}]),angular.module(\"template/progressbar/bar.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/progressbar/bar.html\",'<div class=\"progress-bar\" ng-class=\"type && \\'progress-bar-\\' + type\" role=\"progressbar\" aria-valuenow=\"{{value}}\" aria-valuemin=\"0\" aria-valuemax=\"{{max}}\" ng-style=\"{width: (percent < 100 ? percent : 100) + \\'%\\'}\" aria-valuetext=\"{{percent | number:0}}%\" aria-labelledby=\"{{::title}}\" style=\"min-width: 0;\" ng-transclude></div>\\n')}]),angular.module(\"template/progressbar/progress.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/progressbar/progress.html\",'<div class=\"progress\" ng-transclude aria-labelledby=\"{{::title}}\"></div>')}]),angular.module(\"template/progressbar/progressbar.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/progressbar/progressbar.html\",'<div class=\"progress\">\\n  <div class=\"progress-bar\" ng-class=\"type && \\'progress-bar-\\' + type\" role=\"progressbar\" aria-valuenow=\"{{value}}\" aria-valuemin=\"0\" aria-valuemax=\"{{max}}\" ng-style=\"{width: (percent < 100 ? percent : 100) + \\'%\\'}\" aria-valuetext=\"{{percent | number:0}}%\" aria-labelledby=\"{{::title}}\" style=\"min-width: 0;\" ng-transclude></div>\\n</div>\\n')}]),angular.module(\"template/rating/rating.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/rating/rating.html\",'<span ng-mouseleave=\"reset()\" ng-keydown=\"onKeydown($event)\" tabindex=\"0\" role=\"slider\" aria-valuemin=\"0\" aria-valuemax=\"{{range.length}}\" aria-valuenow=\"{{value}}\">\\n    <span ng-repeat-start=\"r in range track by $index\" class=\"sr-only\">({{ $index < value ? \\'*\\' : \\' \\' }})</span>\\n    <i ng-repeat-end ng-mouseenter=\"enter($index + 1)\" ng-click=\"rate($index + 1)\" class=\"glyphicon\" ng-class=\"$index < value && (r.stateOn || \\'glyphicon-star\\') || (r.stateOff || \\'glyphicon-star-empty\\')\" ng-attr-title=\"{{r.title}}\" aria-valuetext=\"{{r.title}}\"></i>\\n</span>\\n');\r\n}]),angular.module(\"template/tabs/tab.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/tabs/tab.html\",'<li ng-class=\"{active: active, disabled: disabled}\">\\n  <a href ng-click=\"select()\" uib-tab-heading-transclude>{{heading}}</a>\\n</li>\\n')}]),angular.module(\"template/tabs/tabset.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/tabs/tabset.html\",'<div>\\n  <ul class=\"nav nav-{{type || \\'tabs\\'}}\" ng-class=\"{\\'nav-stacked\\': vertical, \\'nav-justified\\': justified}\" ng-transclude></ul>\\n  <div class=\"tab-content\">\\n    <div class=\"tab-pane\" \\n         ng-repeat=\"tab in tabs\" \\n         ng-class=\"{active: tab.active}\"\\n         uib-tab-content-transclude=\"tab\">\\n    </div>\\n  </div>\\n</div>\\n')}]),angular.module(\"template/timepicker/timepicker.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/timepicker/timepicker.html\",'<table>\\n  <tbody>\\n    <tr class=\"text-center\" ng-show=\"::showSpinners\">\\n      <td><a ng-click=\"incrementHours()\" ng-class=\"{disabled: noIncrementHours()}\" class=\"btn btn-link\" ng-disabled=\"noIncrementHours()\" tabindex=\"{{::tabindex}}\"><span class=\"glyphicon glyphicon-chevron-up\"></span></a></td>\\n      <td>&nbsp;</td>\\n      <td><a ng-click=\"incrementMinutes()\" ng-class=\"{disabled: noIncrementMinutes()}\" class=\"btn btn-link\" ng-disabled=\"noIncrementMinutes()\" tabindex=\"{{::tabindex}}\"><span class=\"glyphicon glyphicon-chevron-up\"></span></a></td>\\n      <td ng-show=\"showMeridian\"></td>\\n    </tr>\\n    <tr>\\n      <td class=\"form-group\" ng-class=\"{\\'has-error\\': invalidHours}\">\\n        <input style=\"width:50px;\" type=\"text\" ng-model=\"hours\" ng-change=\"updateHours()\" class=\"form-control text-center\" ng-readonly=\"::readonlyInput\" maxlength=\"2\" tabindex=\"{{::tabindex}}\">\\n      </td>\\n      <td>:</td>\\n      <td class=\"form-group\" ng-class=\"{\\'has-error\\': invalidMinutes}\">\\n        <input style=\"width:50px;\" type=\"text\" ng-model=\"minutes\" ng-change=\"updateMinutes()\" class=\"form-control text-center\" ng-readonly=\"::readonlyInput\" maxlength=\"2\" tabindex=\"{{::tabindex}}\">\\n      </td>\\n      <td ng-show=\"showMeridian\"><button type=\"button\" ng-class=\"{disabled: noToggleMeridian()}\" class=\"btn btn-default text-center\" ng-click=\"toggleMeridian()\" ng-disabled=\"noToggleMeridian()\" tabindex=\"{{::tabindex}}\">{{meridian}}</button></td>\\n    </tr>\\n    <tr class=\"text-center\" ng-show=\"::showSpinners\">\\n      <td><a ng-click=\"decrementHours()\" ng-class=\"{disabled: noDecrementHours()}\" class=\"btn btn-link\" ng-disabled=\"noDecrementHours()\" tabindex=\"{{::tabindex}}\"><span class=\"glyphicon glyphicon-chevron-down\"></span></a></td>\\n      <td>&nbsp;</td>\\n      <td><a ng-click=\"decrementMinutes()\" ng-class=\"{disabled: noDecrementMinutes()}\" class=\"btn btn-link\" ng-disabled=\"noDecrementMinutes()\" tabindex=\"{{::tabindex}}\"><span class=\"glyphicon glyphicon-chevron-down\"></span></a></td>\\n      <td ng-show=\"showMeridian\"></td>\\n    </tr>\\n  </tbody>\\n</table>\\n')}]),angular.module(\"template/typeahead/typeahead-match.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/typeahead/typeahead-match.html\",'<a href tabindex=\"-1\" ng-bind-html=\"match.label | uibTypeaheadHighlight:query\"></a>\\n')}]),angular.module(\"template/typeahead/typeahead-popup.html\",[]).run([\"$templateCache\",function(a){a.put(\"template/typeahead/typeahead-popup.html\",'<ul class=\"dropdown-menu\" ng-show=\"isOpen() && !moveInProgress\" ng-style=\"{top: position().top+\\'px\\', left: position().left+\\'px\\'}\" style=\"display: block;\" role=\"listbox\" aria-hidden=\"{{!isOpen()}}\">\\n    <li ng-repeat=\"match in matches track by $index\" ng-class=\"{active: isActive($index) }\" ng-mouseenter=\"selectActive($index)\" ng-click=\"selectMatch($index)\" role=\"option\" id=\"{{::match.id}}\">\\n        <div uib-typeahead-match index=\"$index\" match=\"match\" query=\"query\" template-url=\"templateUrl\"></div>\\n    </li>\\n</ul>\\n')}]),!angular.$$csp()&&angular.element(document).find(\"head\").prepend('<style type=\"text/css\">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>');\n//# sourceMappingURL=ui-bootstrap.js.map\n","/**\r\n * @license AngularJS v1.5.8\r\n * (c) 2010-2016 Google, Inc. http://angularjs.org\r\n * License: MIT\r\n */\r\n(function(window, angular) {'use strict';\r\n\r\n/* global shallowCopy: true */\r\n\r\n/**\r\n * Creates a shallow copy of an object, an array or a primitive.\r\n *\r\n * Assumes that there are no proto properties for objects.\r\n */\r\nfunction shallowCopy(src, dst) {\r\n  if (isArray(src)) {\r\n    dst = dst || [];\r\n\r\n    for (var i = 0, ii = src.length; i < ii; i++) {\r\n      dst[i] = src[i];\r\n    }\r\n  } else if (isObject(src)) {\r\n    dst = dst || {};\r\n\r\n    for (var key in src) {\r\n      if (!(key.charAt(0) === '$' && key.charAt(1) === '$')) {\r\n        dst[key] = src[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  return dst || src;\r\n}\r\n\r\n/* global shallowCopy: false */\r\n\r\n// There are necessary for `shallowCopy()` (included via `src/shallowCopy.js`).\r\n// They are initialized inside the `$RouteProvider`, to ensure `window.angular` is available.\r\nvar isArray;\r\nvar isObject;\r\n\r\n/**\r\n * @ngdoc module\r\n * @name ngRoute\r\n * @description\r\n *\r\n * # ngRoute\r\n *\r\n * The `ngRoute` module provides routing and deeplinking services and directives for angular apps.\r\n *\r\n * ## Example\r\n * See {@link ngRoute.$route#example $route} for an example of configuring and using `ngRoute`.\r\n *\r\n *\r\n * <div doc-module-components=\"ngRoute\"></div>\r\n */\r\n /* global -ngRouteModule */\r\nvar ngRouteModule = angular.module('ngRoute', ['ng']).\r\n                        provider('$route', $RouteProvider),\r\n    $routeMinErr = angular.$$minErr('ngRoute');\r\n\r\n/**\r\n * @ngdoc provider\r\n * @name $routeProvider\r\n *\r\n * @description\r\n *\r\n * Used for configuring routes.\r\n *\r\n * ## Example\r\n * See {@link ngRoute.$route#example $route} for an example of configuring and using `ngRoute`.\r\n *\r\n * ## Dependencies\r\n * Requires the {@link ngRoute `ngRoute`} module to be installed.\r\n */\r\nfunction $RouteProvider() {\r\n  isArray = angular.isArray;\r\n  isObject = angular.isObject;\r\n\r\n  function inherit(parent, extra) {\r\n    return angular.extend(Object.create(parent), extra);\r\n  }\r\n\r\n  var routes = {};\r\n\r\n  /**\r\n   * @ngdoc method\r\n   * @name $routeProvider#when\r\n   *\r\n   * @param {string} path Route path (matched against `$location.path`). If `$location.path`\r\n   *    contains redundant trailing slash or is missing one, the route will still match and the\r\n   *    `$location.path` will be updated to add or drop the trailing slash to exactly match the\r\n   *    route definition.\r\n   *\r\n   *    * `path` can contain named groups starting with a colon: e.g. `:name`. All characters up\r\n   *        to the next slash are matched and stored in `$routeParams` under the given `name`\r\n   *        when the route matches.\r\n   *    * `path` can contain named groups starting with a colon and ending with a star:\r\n   *        e.g.`:name*`. All characters are eagerly stored in `$routeParams` under the given `name`\r\n   *        when the route matches.\r\n   *    * `path` can contain optional named groups with a question mark: e.g.`:name?`.\r\n   *\r\n   *    For example, routes like `/color/:color/largecode/:largecode*\\/edit` will match\r\n   *    `/color/brown/largecode/code/with/slashes/edit` and extract:\r\n   *\r\n   *    * `color: brown`\r\n   *    * `largecode: code/with/slashes`.\r\n   *\r\n   *\r\n   * @param {Object} route Mapping information to be assigned to `$route.current` on route\r\n   *    match.\r\n   *\r\n   *    Object properties:\r\n   *\r\n   *    - `controller` – `{(string|function()=}` – Controller fn that should be associated with\r\n   *      newly created scope or the name of a {@link angular.Module#controller registered\r\n   *      controller} if passed as a string.\r\n   *    - `controllerAs` – `{string=}` – An identifier name for a reference to the controller.\r\n   *      If present, the controller will be published to scope under the `controllerAs` name.\r\n   *    - `template` – `{string=|function()=}` – html template as a string or a function that\r\n   *      returns an html template as a string which should be used by {@link\r\n   *      ngRoute.directive:ngView ngView} or {@link ng.directive:ngInclude ngInclude} directives.\r\n   *      This property takes precedence over `templateUrl`.\r\n   *\r\n   *      If `template` is a function, it will be called with the following parameters:\r\n   *\r\n   *      - `{Array.<Object>}` - route parameters extracted from the current\r\n   *        `$location.path()` by applying the current route\r\n   *\r\n   *    - `templateUrl` – `{string=|function()=}` – path or function that returns a path to an html\r\n   *      template that should be used by {@link ngRoute.directive:ngView ngView}.\r\n   *\r\n   *      If `templateUrl` is a function, it will be called with the following parameters:\r\n   *\r\n   *      - `{Array.<Object>}` - route parameters extracted from the current\r\n   *        `$location.path()` by applying the current route\r\n   *\r\n   *    - `resolve` - `{Object.<string, function>=}` - An optional map of dependencies which should\r\n   *      be injected into the controller. If any of these dependencies are promises, the router\r\n   *      will wait for them all to be resolved or one to be rejected before the controller is\r\n   *      instantiated.\r\n   *      If all the promises are resolved successfully, the values of the resolved promises are\r\n   *      injected and {@link ngRoute.$route#$routeChangeSuccess $routeChangeSuccess} event is\r\n   *      fired. If any of the promises are rejected the\r\n   *      {@link ngRoute.$route#$routeChangeError $routeChangeError} event is fired.\r\n   *      For easier access to the resolved dependencies from the template, the `resolve` map will\r\n   *      be available on the scope of the route, under `$resolve` (by default) or a custom name\r\n   *      specified by the `resolveAs` property (see below). This can be particularly useful, when\r\n   *      working with {@link angular.Module#component components} as route templates.<br />\r\n   *      <div class=\"alert alert-warning\">\r\n   *        **Note:** If your scope already contains a property with this name, it will be hidden\r\n   *        or overwritten. Make sure, you specify an appropriate name for this property, that\r\n   *        does not collide with other properties on the scope.\r\n   *      </div>\r\n   *      The map object is:\r\n   *\r\n   *      - `key` – `{string}`: a name of a dependency to be injected into the controller.\r\n   *      - `factory` - `{string|function}`: If `string` then it is an alias for a service.\r\n   *        Otherwise if function, then it is {@link auto.$injector#invoke injected}\r\n   *        and the return value is treated as the dependency. If the result is a promise, it is\r\n   *        resolved before its value is injected into the controller. Be aware that\r\n   *        `ngRoute.$routeParams` will still refer to the previous route within these resolve\r\n   *        functions.  Use `$route.current.params` to access the new route parameters, instead.\r\n   *\r\n   *    - `resolveAs` - `{string=}` - The name under which the `resolve` map will be available on\r\n   *      the scope of the route. If omitted, defaults to `$resolve`.\r\n   *\r\n   *    - `redirectTo` – `{(string|function())=}` – value to update\r\n   *      {@link ng.$location $location} path with and trigger route redirection.\r\n   *\r\n   *      If `redirectTo` is a function, it will be called with the following parameters:\r\n   *\r\n   *      - `{Object.<string>}` - route parameters extracted from the current\r\n   *        `$location.path()` by applying the current route templateUrl.\r\n   *      - `{string}` - current `$location.path()`\r\n   *      - `{Object}` - current `$location.search()`\r\n   *\r\n   *      The custom `redirectTo` function is expected to return a string which will be used\r\n   *      to update `$location.path()` and `$location.search()`.\r\n   *\r\n   *    - `[reloadOnSearch=true]` - `{boolean=}` - reload route when only `$location.search()`\r\n   *      or `$location.hash()` changes.\r\n   *\r\n   *      If the option is set to `false` and url in the browser changes, then\r\n   *      `$routeUpdate` event is broadcasted on the root scope.\r\n   *\r\n   *    - `[caseInsensitiveMatch=false]` - `{boolean=}` - match routes without being case sensitive\r\n   *\r\n   *      If the option is set to `true`, then the particular route can be matched without being\r\n   *      case sensitive\r\n   *\r\n   * @returns {Object} self\r\n   *\r\n   * @description\r\n   * Adds a new route definition to the `$route` service.\r\n   */\r\n  this.when = function(path, route) {\r\n    //copy original route object to preserve params inherited from proto chain\r\n    var routeCopy = shallowCopy(route);\r\n    if (angular.isUndefined(routeCopy.reloadOnSearch)) {\r\n      routeCopy.reloadOnSearch = true;\r\n    }\r\n    if (angular.isUndefined(routeCopy.caseInsensitiveMatch)) {\r\n      routeCopy.caseInsensitiveMatch = this.caseInsensitiveMatch;\r\n    }\r\n    routes[path] = angular.extend(\r\n      routeCopy,\r\n      path && pathRegExp(path, routeCopy)\r\n    );\r\n\r\n    // create redirection for trailing slashes\r\n    if (path) {\r\n      var redirectPath = (path[path.length - 1] == '/')\r\n            ? path.substr(0, path.length - 1)\r\n            : path + '/';\r\n\r\n      routes[redirectPath] = angular.extend(\r\n        {redirectTo: path},\r\n        pathRegExp(redirectPath, routeCopy)\r\n      );\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * @ngdoc property\r\n   * @name $routeProvider#caseInsensitiveMatch\r\n   * @description\r\n   *\r\n   * A boolean property indicating if routes defined\r\n   * using this provider should be matched using a case insensitive\r\n   * algorithm. Defaults to `false`.\r\n   */\r\n  this.caseInsensitiveMatch = false;\r\n\r\n   /**\r\n    * @param path {string} path\r\n    * @param opts {Object} options\r\n    * @return {?Object}\r\n    *\r\n    * @description\r\n    * Normalizes the given path, returning a regular expression\r\n    * and the original path.\r\n    *\r\n    * Inspired by pathRexp in visionmedia/express/lib/utils.js.\r\n    */\r\n  function pathRegExp(path, opts) {\r\n    var insensitive = opts.caseInsensitiveMatch,\r\n        ret = {\r\n          originalPath: path,\r\n          regexp: path\r\n        },\r\n        keys = ret.keys = [];\r\n\r\n    path = path\r\n      .replace(/([().])/g, '\\\\$1')\r\n      .replace(/(\\/)?:(\\w+)(\\*\\?|[\\?\\*])?/g, function(_, slash, key, option) {\r\n        var optional = (option === '?' || option === '*?') ? '?' : null;\r\n        var star = (option === '*' || option === '*?') ? '*' : null;\r\n        keys.push({ name: key, optional: !!optional });\r\n        slash = slash || '';\r\n        return ''\r\n          + (optional ? '' : slash)\r\n          + '(?:'\r\n          + (optional ? slash : '')\r\n          + (star && '(.+?)' || '([^/]+)')\r\n          + (optional || '')\r\n          + ')'\r\n          + (optional || '');\r\n      })\r\n      .replace(/([\\/$\\*])/g, '\\\\$1');\r\n\r\n    ret.regexp = new RegExp('^' + path + '$', insensitive ? 'i' : '');\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * @ngdoc method\r\n   * @name $routeProvider#otherwise\r\n   *\r\n   * @description\r\n   * Sets route definition that will be used on route change when no other route definition\r\n   * is matched.\r\n   *\r\n   * @param {Object|string} params Mapping information to be assigned to `$route.current`.\r\n   * If called with a string, the value maps to `redirectTo`.\r\n   * @returns {Object} self\r\n   */\r\n  this.otherwise = function(params) {\r\n    if (typeof params === 'string') {\r\n      params = {redirectTo: params};\r\n    }\r\n    this.when(null, params);\r\n    return this;\r\n  };\r\n\r\n\r\n  this.$get = ['$rootScope',\r\n               '$location',\r\n               '$routeParams',\r\n               '$q',\r\n               '$injector',\r\n               '$templateRequest',\r\n               '$sce',\r\n      function($rootScope, $location, $routeParams, $q, $injector, $templateRequest, $sce) {\r\n\r\n    /**\r\n     * @ngdoc service\r\n     * @name $route\r\n     * @requires $location\r\n     * @requires $routeParams\r\n     *\r\n     * @property {Object} current Reference to the current route definition.\r\n     * The route definition contains:\r\n     *\r\n     *   - `controller`: The controller constructor as defined in the route definition.\r\n     *   - `locals`: A map of locals which is used by {@link ng.$controller $controller} service for\r\n     *     controller instantiation. The `locals` contain\r\n     *     the resolved values of the `resolve` map. Additionally the `locals` also contain:\r\n     *\r\n     *     - `$scope` - The current route scope.\r\n     *     - `$template` - The current route template HTML.\r\n     *\r\n     *     The `locals` will be assigned to the route scope's `$resolve` property. You can override\r\n     *     the property name, using `resolveAs` in the route definition. See\r\n     *     {@link ngRoute.$routeProvider $routeProvider} for more info.\r\n     *\r\n     * @property {Object} routes Object with all route configuration Objects as its properties.\r\n     *\r\n     * @description\r\n     * `$route` is used for deep-linking URLs to controllers and views (HTML partials).\r\n     * It watches `$location.url()` and tries to map the path to an existing route definition.\r\n     *\r\n     * Requires the {@link ngRoute `ngRoute`} module to be installed.\r\n     *\r\n     * You can define routes through {@link ngRoute.$routeProvider $routeProvider}'s API.\r\n     *\r\n     * The `$route` service is typically used in conjunction with the\r\n     * {@link ngRoute.directive:ngView `ngView`} directive and the\r\n     * {@link ngRoute.$routeParams `$routeParams`} service.\r\n     *\r\n     * @example\r\n     * This example shows how changing the URL hash causes the `$route` to match a route against the\r\n     * URL, and the `ngView` pulls in the partial.\r\n     *\r\n     * <example name=\"$route-service\" module=\"ngRouteExample\"\r\n     *          deps=\"angular-route.js\" fixBase=\"true\">\r\n     *   <file name=\"index.html\">\r\n     *     <div ng-controller=\"MainController\">\r\n     *       Choose:\r\n     *       <a href=\"Book/Moby\">Moby</a> |\r\n     *       <a href=\"Book/Moby/ch/1\">Moby: Ch1</a> |\r\n     *       <a href=\"Book/Gatsby\">Gatsby</a> |\r\n     *       <a href=\"Book/Gatsby/ch/4?key=value\">Gatsby: Ch4</a> |\r\n     *       <a href=\"Book/Scarlet\">Scarlet Letter</a><br/>\r\n     *\r\n     *       <div ng-view></div>\r\n     *\r\n     *       <hr />\r\n     *\r\n     *       <pre>$location.path() = {{$location.path()}}</pre>\r\n     *       <pre>$route.current.templateUrl = {{$route.current.templateUrl}}</pre>\r\n     *       <pre>$route.current.params = {{$route.current.params}}</pre>\r\n     *       <pre>$route.current.scope.name = {{$route.current.scope.name}}</pre>\r\n     *       <pre>$routeParams = {{$routeParams}}</pre>\r\n     *     </div>\r\n     *   </file>\r\n     *\r\n     *   <file name=\"book.html\">\r\n     *     controller: {{name}}<br />\r\n     *     Book Id: {{params.bookId}}<br />\r\n     *   </file>\r\n     *\r\n     *   <file name=\"chapter.html\">\r\n     *     controller: {{name}}<br />\r\n     *     Book Id: {{params.bookId}}<br />\r\n     *     Chapter Id: {{params.chapterId}}\r\n     *   </file>\r\n     *\r\n     *   <file name=\"script.js\">\r\n     *     angular.module('ngRouteExample', ['ngRoute'])\r\n     *\r\n     *      .controller('MainController', function($scope, $route, $routeParams, $location) {\r\n     *          $scope.$route = $route;\r\n     *          $scope.$location = $location;\r\n     *          $scope.$routeParams = $routeParams;\r\n     *      })\r\n     *\r\n     *      .controller('BookController', function($scope, $routeParams) {\r\n     *          $scope.name = \"BookController\";\r\n     *          $scope.params = $routeParams;\r\n     *      })\r\n     *\r\n     *      .controller('ChapterController', function($scope, $routeParams) {\r\n     *          $scope.name = \"ChapterController\";\r\n     *          $scope.params = $routeParams;\r\n     *      })\r\n     *\r\n     *     .config(function($routeProvider, $locationProvider) {\r\n     *       $routeProvider\r\n     *        .when('/Book/:bookId', {\r\n     *         templateUrl: 'book.html',\r\n     *         controller: 'BookController',\r\n     *         resolve: {\r\n     *           // I will cause a 1 second delay\r\n     *           delay: function($q, $timeout) {\r\n     *             var delay = $q.defer();\r\n     *             $timeout(delay.resolve, 1000);\r\n     *             return delay.promise;\r\n     *           }\r\n     *         }\r\n     *       })\r\n     *       .when('/Book/:bookId/ch/:chapterId', {\r\n     *         templateUrl: 'chapter.html',\r\n     *         controller: 'ChapterController'\r\n     *       });\r\n     *\r\n     *       // configure html5 to get links working on jsfiddle\r\n     *       $locationProvider.html5Mode(true);\r\n     *     });\r\n     *\r\n     *   </file>\r\n     *\r\n     *   <file name=\"protractor.js\" type=\"protractor\">\r\n     *     it('should load and compile correct template', function() {\r\n     *       element(by.linkText('Moby: Ch1')).click();\r\n     *       var content = element(by.css('[ng-view]')).getText();\r\n     *       expect(content).toMatch(/controller\\: ChapterController/);\r\n     *       expect(content).toMatch(/Book Id\\: Moby/);\r\n     *       expect(content).toMatch(/Chapter Id\\: 1/);\r\n     *\r\n     *       element(by.partialLinkText('Scarlet')).click();\r\n     *\r\n     *       content = element(by.css('[ng-view]')).getText();\r\n     *       expect(content).toMatch(/controller\\: BookController/);\r\n     *       expect(content).toMatch(/Book Id\\: Scarlet/);\r\n     *     });\r\n     *   </file>\r\n     * </example>\r\n     */\r\n\r\n    /**\r\n     * @ngdoc event\r\n     * @name $route#$routeChangeStart\r\n     * @eventType broadcast on root scope\r\n     * @description\r\n     * Broadcasted before a route change. At this  point the route services starts\r\n     * resolving all of the dependencies needed for the route change to occur.\r\n     * Typically this involves fetching the view template as well as any dependencies\r\n     * defined in `resolve` route property. Once  all of the dependencies are resolved\r\n     * `$routeChangeSuccess` is fired.\r\n     *\r\n     * The route change (and the `$location` change that triggered it) can be prevented\r\n     * by calling `preventDefault` method of the event. See {@link ng.$rootScope.Scope#$on}\r\n     * for more details about event object.\r\n     *\r\n     * @param {Object} angularEvent Synthetic event object.\r\n     * @param {Route} next Future route information.\r\n     * @param {Route} current Current route information.\r\n     */\r\n\r\n    /**\r\n     * @ngdoc event\r\n     * @name $route#$routeChangeSuccess\r\n     * @eventType broadcast on root scope\r\n     * @description\r\n     * Broadcasted after a route change has happened successfully.\r\n     * The `resolve` dependencies are now available in the `current.locals` property.\r\n     *\r\n     * {@link ngRoute.directive:ngView ngView} listens for the directive\r\n     * to instantiate the controller and render the view.\r\n     *\r\n     * @param {Object} angularEvent Synthetic event object.\r\n     * @param {Route} current Current route information.\r\n     * @param {Route|Undefined} previous Previous route information, or undefined if current is\r\n     * first route entered.\r\n     */\r\n\r\n    /**\r\n     * @ngdoc event\r\n     * @name $route#$routeChangeError\r\n     * @eventType broadcast on root scope\r\n     * @description\r\n     * Broadcasted if any of the resolve promises are rejected.\r\n     *\r\n     * @param {Object} angularEvent Synthetic event object\r\n     * @param {Route} current Current route information.\r\n     * @param {Route} previous Previous route information.\r\n     * @param {Route} rejection Rejection of the promise. Usually the error of the failed promise.\r\n     */\r\n\r\n    /**\r\n     * @ngdoc event\r\n     * @name $route#$routeUpdate\r\n     * @eventType broadcast on root scope\r\n     * @description\r\n     * The `reloadOnSearch` property has been set to false, and we are reusing the same\r\n     * instance of the Controller.\r\n     *\r\n     * @param {Object} angularEvent Synthetic event object\r\n     * @param {Route} current Current/previous route information.\r\n     */\r\n\r\n    var forceReload = false,\r\n        preparedRoute,\r\n        preparedRouteIsUpdateOnly,\r\n        $route = {\r\n          routes: routes,\r\n\r\n          /**\r\n           * @ngdoc method\r\n           * @name $route#reload\r\n           *\r\n           * @description\r\n           * Causes `$route` service to reload the current route even if\r\n           * {@link ng.$location $location} hasn't changed.\r\n           *\r\n           * As a result of that, {@link ngRoute.directive:ngView ngView}\r\n           * creates new scope and reinstantiates the controller.\r\n           */\r\n          reload: function() {\r\n            forceReload = true;\r\n\r\n            var fakeLocationEvent = {\r\n              defaultPrevented: false,\r\n              preventDefault: function fakePreventDefault() {\r\n                this.defaultPrevented = true;\r\n                forceReload = false;\r\n              }\r\n            };\r\n\r\n            $rootScope.$evalAsync(function() {\r\n              prepareRoute(fakeLocationEvent);\r\n              if (!fakeLocationEvent.defaultPrevented) commitRoute();\r\n            });\r\n          },\r\n\r\n          /**\r\n           * @ngdoc method\r\n           * @name $route#updateParams\r\n           *\r\n           * @description\r\n           * Causes `$route` service to update the current URL, replacing\r\n           * current route parameters with those specified in `newParams`.\r\n           * Provided property names that match the route's path segment\r\n           * definitions will be interpolated into the location's path, while\r\n           * remaining properties will be treated as query params.\r\n           *\r\n           * @param {!Object<string, string>} newParams mapping of URL parameter names to values\r\n           */\r\n          updateParams: function(newParams) {\r\n            if (this.current && this.current.$$route) {\r\n              newParams = angular.extend({}, this.current.params, newParams);\r\n              $location.path(interpolate(this.current.$$route.originalPath, newParams));\r\n              // interpolate modifies newParams, only query params are left\r\n              $location.search(newParams);\r\n            } else {\r\n              throw $routeMinErr('norout', 'Tried updating route when with no current route');\r\n            }\r\n          }\r\n        };\r\n\r\n    $rootScope.$on('$locationChangeStart', prepareRoute);\r\n    $rootScope.$on('$locationChangeSuccess', commitRoute);\r\n\r\n    return $route;\r\n\r\n    /////////////////////////////////////////////////////\r\n\r\n    /**\r\n     * @param on {string} current url\r\n     * @param route {Object} route regexp to match the url against\r\n     * @return {?Object}\r\n     *\r\n     * @description\r\n     * Check if the route matches the current url.\r\n     *\r\n     * Inspired by match in\r\n     * visionmedia/express/lib/router/router.js.\r\n     */\r\n    function switchRouteMatcher(on, route) {\r\n      var keys = route.keys,\r\n          params = {};\r\n\r\n      if (!route.regexp) return null;\r\n\r\n      var m = route.regexp.exec(on);\r\n      if (!m) return null;\r\n\r\n      for (var i = 1, len = m.length; i < len; ++i) {\r\n        var key = keys[i - 1];\r\n\r\n        var val = m[i];\r\n\r\n        if (key && val) {\r\n          params[key.name] = val;\r\n        }\r\n      }\r\n      return params;\r\n    }\r\n\r\n    function prepareRoute($locationEvent) {\r\n      var lastRoute = $route.current;\r\n\r\n      preparedRoute = parseRoute();\r\n      preparedRouteIsUpdateOnly = preparedRoute && lastRoute && preparedRoute.$$route === lastRoute.$$route\r\n          && angular.equals(preparedRoute.pathParams, lastRoute.pathParams)\r\n          && !preparedRoute.reloadOnSearch && !forceReload;\r\n\r\n      if (!preparedRouteIsUpdateOnly && (lastRoute || preparedRoute)) {\r\n        if ($rootScope.$broadcast('$routeChangeStart', preparedRoute, lastRoute).defaultPrevented) {\r\n          if ($locationEvent) {\r\n            $locationEvent.preventDefault();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function commitRoute() {\r\n      var lastRoute = $route.current;\r\n      var nextRoute = preparedRoute;\r\n\r\n      if (preparedRouteIsUpdateOnly) {\r\n        lastRoute.params = nextRoute.params;\r\n        angular.copy(lastRoute.params, $routeParams);\r\n        $rootScope.$broadcast('$routeUpdate', lastRoute);\r\n      } else if (nextRoute || lastRoute) {\r\n        forceReload = false;\r\n        $route.current = nextRoute;\r\n        if (nextRoute) {\r\n          if (nextRoute.redirectTo) {\r\n            if (angular.isString(nextRoute.redirectTo)) {\r\n              $location.path(interpolate(nextRoute.redirectTo, nextRoute.params)).search(nextRoute.params)\r\n                       .replace();\r\n            } else {\r\n              $location.url(nextRoute.redirectTo(nextRoute.pathParams, $location.path(), $location.search()))\r\n                       .replace();\r\n            }\r\n          }\r\n        }\r\n\r\n        $q.when(nextRoute).\r\n          then(resolveLocals).\r\n          then(function(locals) {\r\n            // after route change\r\n            if (nextRoute == $route.current) {\r\n              if (nextRoute) {\r\n                nextRoute.locals = locals;\r\n                angular.copy(nextRoute.params, $routeParams);\r\n              }\r\n              $rootScope.$broadcast('$routeChangeSuccess', nextRoute, lastRoute);\r\n            }\r\n          }, function(error) {\r\n            if (nextRoute == $route.current) {\r\n              $rootScope.$broadcast('$routeChangeError', nextRoute, lastRoute, error);\r\n            }\r\n          });\r\n      }\r\n    }\r\n\r\n    function resolveLocals(route) {\r\n      if (route) {\r\n        var locals = angular.extend({}, route.resolve);\r\n        angular.forEach(locals, function(value, key) {\r\n          locals[key] = angular.isString(value) ?\r\n              $injector.get(value) :\r\n              $injector.invoke(value, null, null, key);\r\n        });\r\n        var template = getTemplateFor(route);\r\n        if (angular.isDefined(template)) {\r\n          locals['$template'] = template;\r\n        }\r\n        return $q.all(locals);\r\n      }\r\n    }\r\n\r\n\r\n    function getTemplateFor(route) {\r\n      var template, templateUrl;\r\n      if (angular.isDefined(template = route.template)) {\r\n        if (angular.isFunction(template)) {\r\n          template = template(route.params);\r\n        }\r\n      } else if (angular.isDefined(templateUrl = route.templateUrl)) {\r\n        if (angular.isFunction(templateUrl)) {\r\n          templateUrl = templateUrl(route.params);\r\n        }\r\n        if (angular.isDefined(templateUrl)) {\r\n          route.loadedTemplateUrl = $sce.valueOf(templateUrl);\r\n          template = $templateRequest(templateUrl);\r\n        }\r\n      }\r\n      return template;\r\n    }\r\n\r\n\r\n    /**\r\n     * @returns {Object} the current active route, by matching it against the URL\r\n     */\r\n    function parseRoute() {\r\n      // Match a route\r\n      var params, match;\r\n      angular.forEach(routes, function(route, path) {\r\n        if (!match && (params = switchRouteMatcher($location.path(), route))) {\r\n          match = inherit(route, {\r\n            params: angular.extend({}, $location.search(), params),\r\n            pathParams: params});\r\n          match.$$route = route;\r\n        }\r\n      });\r\n      // No route matched; fallback to \"otherwise\" route\r\n      return match || routes[null] && inherit(routes[null], {params: {}, pathParams:{}});\r\n    }\r\n\r\n    /**\r\n     * @returns {string} interpolation of the redirect path with the parameters\r\n     */\r\n    function interpolate(string, params) {\r\n      var result = [];\r\n      angular.forEach((string || '').split(':'), function(segment, i) {\r\n        if (i === 0) {\r\n          result.push(segment);\r\n        } else {\r\n          var segmentMatch = segment.match(/(\\w+)(?:[?*])?(.*)/);\r\n          var key = segmentMatch[1];\r\n          result.push(params[key]);\r\n          result.push(segmentMatch[2] || '');\r\n          delete params[key];\r\n        }\r\n      });\r\n      return result.join('');\r\n    }\r\n  }];\r\n}\r\n\r\nngRouteModule.provider('$routeParams', $RouteParamsProvider);\r\n\r\n\r\n/**\r\n * @ngdoc service\r\n * @name $routeParams\r\n * @requires $route\r\n *\r\n * @description\r\n * The `$routeParams` service allows you to retrieve the current set of route parameters.\r\n *\r\n * Requires the {@link ngRoute `ngRoute`} module to be installed.\r\n *\r\n * The route parameters are a combination of {@link ng.$location `$location`}'s\r\n * {@link ng.$location#search `search()`} and {@link ng.$location#path `path()`}.\r\n * The `path` parameters are extracted when the {@link ngRoute.$route `$route`} path is matched.\r\n *\r\n * In case of parameter name collision, `path` params take precedence over `search` params.\r\n *\r\n * The service guarantees that the identity of the `$routeParams` object will remain unchanged\r\n * (but its properties will likely change) even when a route change occurs.\r\n *\r\n * Note that the `$routeParams` are only updated *after* a route change completes successfully.\r\n * This means that you cannot rely on `$routeParams` being correct in route resolve functions.\r\n * Instead you can use `$route.current.params` to access the new route's parameters.\r\n *\r\n * @example\r\n * ```js\r\n *  // Given:\r\n *  // URL: http://server.com/index.html#/Chapter/1/Section/2?search=moby\r\n *  // Route: /Chapter/:chapterId/Section/:sectionId\r\n *  //\r\n *  // Then\r\n *  $routeParams ==> {chapterId:'1', sectionId:'2', search:'moby'}\r\n * ```\r\n */\r\nfunction $RouteParamsProvider() {\r\n  this.$get = function() { return {}; };\r\n}\r\n\r\nngRouteModule.directive('ngView', ngViewFactory);\r\nngRouteModule.directive('ngView', ngViewFillContentFactory);\r\n\r\n\r\n/**\r\n * @ngdoc directive\r\n * @name ngView\r\n * @restrict ECA\r\n *\r\n * @description\r\n * # Overview\r\n * `ngView` is a directive that complements the {@link ngRoute.$route $route} service by\r\n * including the rendered template of the current route into the main layout (`index.html`) file.\r\n * Every time the current route changes, the included view changes with it according to the\r\n * configuration of the `$route` service.\r\n *\r\n * Requires the {@link ngRoute `ngRoute`} module to be installed.\r\n *\r\n * @animations\r\n * | Animation                        | Occurs                              |\r\n * |----------------------------------|-------------------------------------|\r\n * | {@link ng.$animate#enter enter}  | when the new element is inserted to the DOM |\r\n * | {@link ng.$animate#leave leave}  | when the old element is removed from to the DOM  |\r\n *\r\n * The enter and leave animation occur concurrently.\r\n *\r\n * @knownIssue If `ngView` is contained in an asynchronously loaded template (e.g. in another\r\n *             directive's templateUrl or in a template loaded using `ngInclude`), then you need to\r\n *             make sure that `$route` is instantiated in time to capture the initial\r\n *             `$locationChangeStart` event and load the appropriate view. One way to achieve this\r\n *             is to have it as a dependency in a `.run` block:\r\n *             `myModule.run(['$route', function() {}]);`\r\n *\r\n * @scope\r\n * @priority 400\r\n * @param {string=} onload Expression to evaluate whenever the view updates.\r\n *\r\n * @param {string=} autoscroll Whether `ngView` should call {@link ng.$anchorScroll\r\n *                  $anchorScroll} to scroll the viewport after the view is updated.\r\n *\r\n *                  - If the attribute is not set, disable scrolling.\r\n *                  - If the attribute is set without value, enable scrolling.\r\n *                  - Otherwise enable scrolling only if the `autoscroll` attribute value evaluated\r\n *                    as an expression yields a truthy value.\r\n * @example\r\n    <example name=\"ngView-directive\" module=\"ngViewExample\"\r\n             deps=\"angular-route.js;angular-animate.js\"\r\n             animations=\"true\" fixBase=\"true\">\r\n      <file name=\"index.html\">\r\n        <div ng-controller=\"MainCtrl as main\">\r\n          Choose:\r\n          <a href=\"Book/Moby\">Moby</a> |\r\n          <a href=\"Book/Moby/ch/1\">Moby: Ch1</a> |\r\n          <a href=\"Book/Gatsby\">Gatsby</a> |\r\n          <a href=\"Book/Gatsby/ch/4?key=value\">Gatsby: Ch4</a> |\r\n          <a href=\"Book/Scarlet\">Scarlet Letter</a><br/>\r\n\r\n          <div class=\"view-animate-container\">\r\n            <div ng-view class=\"view-animate\"></div>\r\n          </div>\r\n          <hr />\r\n\r\n          <pre>$location.path() = {{main.$location.path()}}</pre>\r\n          <pre>$route.current.templateUrl = {{main.$route.current.templateUrl}}</pre>\r\n          <pre>$route.current.params = {{main.$route.current.params}}</pre>\r\n          <pre>$routeParams = {{main.$routeParams}}</pre>\r\n        </div>\r\n      </file>\r\n\r\n      <file name=\"book.html\">\r\n        <div>\r\n          controller: {{book.name}}<br />\r\n          Book Id: {{book.params.bookId}}<br />\r\n        </div>\r\n      </file>\r\n\r\n      <file name=\"chapter.html\">\r\n        <div>\r\n          controller: {{chapter.name}}<br />\r\n          Book Id: {{chapter.params.bookId}}<br />\r\n          Chapter Id: {{chapter.params.chapterId}}\r\n        </div>\r\n      </file>\r\n\r\n      <file name=\"animations.css\">\r\n        .view-animate-container {\r\n          position:relative;\r\n          height:100px!important;\r\n          background:white;\r\n          border:1px solid black;\r\n          height:40px;\r\n          overflow:hidden;\r\n        }\r\n\r\n        .view-animate {\r\n          padding:10px;\r\n        }\r\n\r\n        .view-animate.ng-enter, .view-animate.ng-leave {\r\n          transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) 1.5s;\r\n\r\n          display:block;\r\n          width:100%;\r\n          border-left:1px solid black;\r\n\r\n          position:absolute;\r\n          top:0;\r\n          left:0;\r\n          right:0;\r\n          bottom:0;\r\n          padding:10px;\r\n        }\r\n\r\n        .view-animate.ng-enter {\r\n          left:100%;\r\n        }\r\n        .view-animate.ng-enter.ng-enter-active {\r\n          left:0;\r\n        }\r\n        .view-animate.ng-leave.ng-leave-active {\r\n          left:-100%;\r\n        }\r\n      </file>\r\n\r\n      <file name=\"script.js\">\r\n        angular.module('ngViewExample', ['ngRoute', 'ngAnimate'])\r\n          .config(['$routeProvider', '$locationProvider',\r\n            function($routeProvider, $locationProvider) {\r\n              $routeProvider\r\n                .when('/Book/:bookId', {\r\n                  templateUrl: 'book.html',\r\n                  controller: 'BookCtrl',\r\n                  controllerAs: 'book'\r\n                })\r\n                .when('/Book/:bookId/ch/:chapterId', {\r\n                  templateUrl: 'chapter.html',\r\n                  controller: 'ChapterCtrl',\r\n                  controllerAs: 'chapter'\r\n                });\r\n\r\n              $locationProvider.html5Mode(true);\r\n          }])\r\n          .controller('MainCtrl', ['$route', '$routeParams', '$location',\r\n            function($route, $routeParams, $location) {\r\n              this.$route = $route;\r\n              this.$location = $location;\r\n              this.$routeParams = $routeParams;\r\n          }])\r\n          .controller('BookCtrl', ['$routeParams', function($routeParams) {\r\n            this.name = \"BookCtrl\";\r\n            this.params = $routeParams;\r\n          }])\r\n          .controller('ChapterCtrl', ['$routeParams', function($routeParams) {\r\n            this.name = \"ChapterCtrl\";\r\n            this.params = $routeParams;\r\n          }]);\r\n\r\n      </file>\r\n\r\n      <file name=\"protractor.js\" type=\"protractor\">\r\n        it('should load and compile correct template', function() {\r\n          element(by.linkText('Moby: Ch1')).click();\r\n          var content = element(by.css('[ng-view]')).getText();\r\n          expect(content).toMatch(/controller\\: ChapterCtrl/);\r\n          expect(content).toMatch(/Book Id\\: Moby/);\r\n          expect(content).toMatch(/Chapter Id\\: 1/);\r\n\r\n          element(by.partialLinkText('Scarlet')).click();\r\n\r\n          content = element(by.css('[ng-view]')).getText();\r\n          expect(content).toMatch(/controller\\: BookCtrl/);\r\n          expect(content).toMatch(/Book Id\\: Scarlet/);\r\n        });\r\n      </file>\r\n    </example>\r\n */\r\n\r\n\r\n/**\r\n * @ngdoc event\r\n * @name ngView#$viewContentLoaded\r\n * @eventType emit on the current ngView scope\r\n * @description\r\n * Emitted every time the ngView content is reloaded.\r\n */\r\nngViewFactory.$inject = ['$route', '$anchorScroll', '$animate'];\r\nfunction ngViewFactory($route, $anchorScroll, $animate) {\r\n  return {\r\n    restrict: 'ECA',\r\n    terminal: true,\r\n    priority: 400,\r\n    transclude: 'element',\r\n    link: function(scope, $element, attr, ctrl, $transclude) {\r\n        var currentScope,\r\n            currentElement,\r\n            previousLeaveAnimation,\r\n            autoScrollExp = attr.autoscroll,\r\n            onloadExp = attr.onload || '';\r\n\r\n        scope.$on('$routeChangeSuccess', update);\r\n        update();\r\n\r\n        function cleanupLastView() {\r\n          if (previousLeaveAnimation) {\r\n            $animate.cancel(previousLeaveAnimation);\r\n            previousLeaveAnimation = null;\r\n          }\r\n\r\n          if (currentScope) {\r\n            currentScope.$destroy();\r\n            currentScope = null;\r\n          }\r\n          if (currentElement) {\r\n            previousLeaveAnimation = $animate.leave(currentElement);\r\n            previousLeaveAnimation.then(function() {\r\n              previousLeaveAnimation = null;\r\n            });\r\n            currentElement = null;\r\n          }\r\n        }\r\n\r\n        function update() {\r\n          var locals = $route.current && $route.current.locals,\r\n              template = locals && locals.$template;\r\n\r\n          if (angular.isDefined(template)) {\r\n            var newScope = scope.$new();\r\n            var current = $route.current;\r\n\r\n            // Note: This will also link all children of ng-view that were contained in the original\r\n            // html. If that content contains controllers, ... they could pollute/change the scope.\r\n            // However, using ng-view on an element with additional content does not make sense...\r\n            // Note: We can't remove them in the cloneAttchFn of $transclude as that\r\n            // function is called before linking the content, which would apply child\r\n            // directives to non existing elements.\r\n            var clone = $transclude(newScope, function(clone) {\r\n              $animate.enter(clone, null, currentElement || $element).then(function onNgViewEnter() {\r\n                if (angular.isDefined(autoScrollExp)\r\n                  && (!autoScrollExp || scope.$eval(autoScrollExp))) {\r\n                  $anchorScroll();\r\n                }\r\n              });\r\n              cleanupLastView();\r\n            });\r\n\r\n            currentElement = clone;\r\n            currentScope = current.scope = newScope;\r\n            currentScope.$emit('$viewContentLoaded');\r\n            currentScope.$eval(onloadExp);\r\n          } else {\r\n            cleanupLastView();\r\n          }\r\n        }\r\n    }\r\n  };\r\n}\r\n\r\n// This directive is called during the $transclude call of the first `ngView` directive.\r\n// It will replace and compile the content of the element with the loaded template.\r\n// We need this directive so that the element content is already filled when\r\n// the link function of another directive on the same element as ngView\r\n// is called.\r\nngViewFillContentFactory.$inject = ['$compile', '$controller', '$route'];\r\nfunction ngViewFillContentFactory($compile, $controller, $route) {\r\n  return {\r\n    restrict: 'ECA',\r\n    priority: -400,\r\n    link: function(scope, $element) {\r\n      var current = $route.current,\r\n          locals = current.locals;\r\n\r\n      $element.html(locals.$template);\r\n\r\n      var link = $compile($element.contents());\r\n\r\n      if (current.controller) {\r\n        locals.$scope = scope;\r\n        var controller = $controller(current.controller, locals);\r\n        if (current.controllerAs) {\r\n          scope[current.controllerAs] = controller;\r\n        }\r\n        $element.data('$ngControllerController', controller);\r\n        $element.children().data('$ngControllerController', controller);\r\n      }\r\n      scope[current.resolveAs || '$resolve'] = locals;\r\n\r\n      link(scope);\r\n    }\r\n  };\r\n}\r\n\r\n\r\n})(window, window.angular);\r\n\n//# sourceMappingURL=angular-route.js.map\n","/*!\r\n * ui-select\r\n * http://github.com/angular-ui/ui-select\r\n * Version: 0.13.2 - 2015-10-09T15:34:24.040Z\r\n * License: MIT\r\n */\r\n\r\n\r\n(function () { \r\n\"use strict\";\r\n\r\nvar KEY = {\r\n    TAB: 9,\r\n    ENTER: 13,\r\n    ESC: 27,\r\n    SPACE: 32,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n    SHIFT: 16,\r\n    CTRL: 17,\r\n    ALT: 18,\r\n    PAGE_UP: 33,\r\n    PAGE_DOWN: 34,\r\n    HOME: 36,\r\n    END: 35,\r\n    BACKSPACE: 8,\r\n    DELETE: 46,\r\n    COMMAND: 91,\r\n\r\n    MAP: { 91 : \"COMMAND\", 8 : \"BACKSPACE\" , 9 : \"TAB\" , 13 : \"ENTER\" , 16 : \"SHIFT\" , 17 : \"CTRL\" , 18 : \"ALT\" , 19 : \"PAUSEBREAK\" , 20 : \"CAPSLOCK\" , 27 : \"ESC\" , 32 : \"SPACE\" , 33 : \"PAGE_UP\", 34 : \"PAGE_DOWN\" , 35 : \"END\" , 36 : \"HOME\" , 37 : \"LEFT\" , 38 : \"UP\" , 39 : \"RIGHT\" , 40 : \"DOWN\" , 43 : \"+\" , 44 : \"PRINTSCREEN\" , 45 : \"INSERT\" , 46 : \"DELETE\", 48 : \"0\" , 49 : \"1\" , 50 : \"2\" , 51 : \"3\" , 52 : \"4\" , 53 : \"5\" , 54 : \"6\" , 55 : \"7\" , 56 : \"8\" , 57 : \"9\" , 59 : \";\", 61 : \"=\" , 65 : \"A\" , 66 : \"B\" , 67 : \"C\" , 68 : \"D\" , 69 : \"E\" , 70 : \"F\" , 71 : \"G\" , 72 : \"H\" , 73 : \"I\" , 74 : \"J\" , 75 : \"K\" , 76 : \"L\", 77 : \"M\" , 78 : \"N\" , 79 : \"O\" , 80 : \"P\" , 81 : \"Q\" , 82 : \"R\" , 83 : \"S\" , 84 : \"T\" , 85 : \"U\" , 86 : \"V\" , 87 : \"W\" , 88 : \"X\" , 89 : \"Y\" , 90 : \"Z\", 96 : \"0\" , 97 : \"1\" , 98 : \"2\" , 99 : \"3\" , 100 : \"4\" , 101 : \"5\" , 102 : \"6\" , 103 : \"7\" , 104 : \"8\" , 105 : \"9\", 106 : \"*\" , 107 : \"+\" , 109 : \"-\" , 110 : \".\" , 111 : \"/\", 112 : \"F1\" , 113 : \"F2\" , 114 : \"F3\" , 115 : \"F4\" , 116 : \"F5\" , 117 : \"F6\" , 118 : \"F7\" , 119 : \"F8\" , 120 : \"F9\" , 121 : \"F10\" , 122 : \"F11\" , 123 : \"F12\", 144 : \"NUMLOCK\" , 145 : \"SCROLLLOCK\" , 186 : \";\" , 187 : \"=\" , 188 : \",\" , 189 : \"-\" , 190 : \".\" , 191 : \"/\" , 192 : \"`\" , 219 : \"[\" , 220 : \"\\\\\" , 221 : \"]\" , 222 : \"'\"\r\n    },\r\n\r\n    isControl: function (e) {\r\n        var k = e.which;\r\n        switch (k) {\r\n        case KEY.COMMAND:\r\n        case KEY.SHIFT:\r\n        case KEY.CTRL:\r\n        case KEY.ALT:\r\n            return true;\r\n        }\r\n\r\n        if (e.metaKey) return true;\r\n\r\n        return false;\r\n    },\r\n    isFunctionKey: function (k) {\r\n        k = k.which ? k.which : k;\r\n        return k >= 112 && k <= 123;\r\n    },\r\n    isVerticalMovement: function (k){\r\n      return ~[KEY.UP, KEY.DOWN].indexOf(k);\r\n    },\r\n    isHorizontalMovement: function (k){\r\n      return ~[KEY.LEFT,KEY.RIGHT,KEY.BACKSPACE,KEY.DELETE].indexOf(k);\r\n    }\r\n  };\r\n\r\n/**\r\n * Add querySelectorAll() to jqLite.\r\n *\r\n * jqLite find() is limited to lookups by tag name.\r\n * TODO This will change with future versions of AngularJS, to be removed when this happens\r\n *\r\n * See jqLite.find - why not use querySelectorAll? https://github.com/angular/angular.js/issues/3586\r\n * See feat(jqLite): use querySelectorAll instead of getElementsByTagName in jqLite.find https://github.com/angular/angular.js/pull/3598\r\n */\r\nif (angular.element.prototype.querySelectorAll === undefined) {\r\n  angular.element.prototype.querySelectorAll = function(selector) {\r\n    return angular.element(this[0].querySelectorAll(selector));\r\n  };\r\n}\r\n\r\n/**\r\n * Add closest() to jqLite.\r\n */\r\nif (angular.element.prototype.closest === undefined) {\r\n  angular.element.prototype.closest = function( selector) {\r\n    var elem = this[0];\r\n    var matchesSelector = elem.matches || elem.webkitMatchesSelector || elem.mozMatchesSelector || elem.msMatchesSelector;\r\n\r\n    while (elem) {\r\n      if (matchesSelector.bind(elem)(selector)) {\r\n        return elem;\r\n      } else {\r\n        elem = elem.parentElement;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n}\r\n\r\nvar latestId = 0;\r\n\r\nvar uis = angular.module('ui.select', [])\r\n\r\n.constant('uiSelectConfig', {\r\n  theme: 'bootstrap',\r\n  searchEnabled: true,\r\n  sortable: false,\r\n  placeholder: '', // Empty by default, like HTML tag <select>\r\n  refreshDelay: 1000, // In milliseconds\r\n  closeOnSelect: true,\r\n  dropdownPosition: 'auto',\r\n  generateId: function() {\r\n    return latestId++;\r\n  },\r\n  appendToBody: false\r\n})\r\n\r\n// See Rename minErr and make it accessible from outside https://github.com/angular/angular.js/issues/6913\r\n.service('uiSelectMinErr', function() {\r\n  var minErr = angular.$$minErr('ui.select');\r\n  return function() {\r\n    var error = minErr.apply(this, arguments);\r\n    var message = error.message.replace(new RegExp('\\nhttp://errors.angularjs.org/.*'), '');\r\n    return new Error(message);\r\n  };\r\n})\r\n\r\n// Recreates old behavior of ng-transclude. Used internally.\r\n.directive('uisTranscludeAppend', function () {\r\n  return {\r\n    link: function (scope, element, attrs, ctrl, transclude) {\r\n        transclude(scope, function (clone) {\r\n          element.append(clone);\r\n        });\r\n      }\r\n    };\r\n})\r\n\r\n/**\r\n * Highlights text that matches $select.search.\r\n *\r\n * Taken from AngularUI Bootstrap Typeahead\r\n * See https://github.com/angular-ui/bootstrap/blob/0.10.0/src/typeahead/typeahead.js#L340\r\n */\r\n.filter('highlight', function() {\r\n  function escapeRegexp(queryToEscape) {\r\n    return queryToEscape.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n  }\r\n\r\n  return function(matchItem, query) {\r\n    return query && matchItem ? matchItem.replace(new RegExp(escapeRegexp(query), 'gi'), '<span class=\"ui-select-highlight\">$&</span>') : matchItem;\r\n  };\r\n})\r\n\r\n/**\r\n * A read-only equivalent of jQuery's offset function: http://api.jquery.com/offset/\r\n *\r\n * Taken from AngularUI Bootstrap Position:\r\n * See https://github.com/angular-ui/bootstrap/blob/master/src/position/position.js#L70\r\n */\r\n.factory('uisOffset',\r\n  ['$document', '$window',\r\n  function ($document, $window) {\r\n\r\n  return function(element) {\r\n    var boundingClientRect = element[0].getBoundingClientRect();\r\n    return {\r\n      width: boundingClientRect.width || element.prop('offsetWidth'),\r\n      height: boundingClientRect.height || element.prop('offsetHeight'),\r\n      top: boundingClientRect.top + ($window.pageYOffset || $document[0].documentElement.scrollTop),\r\n      left: boundingClientRect.left + ($window.pageXOffset || $document[0].documentElement.scrollLeft)\r\n    };\r\n  };\r\n}]);\r\n\r\nuis.directive('uiSelectChoices',\r\n  ['uiSelectConfig', 'uisRepeatParser', 'uiSelectMinErr', '$compile',\r\n  function(uiSelectConfig, RepeatParser, uiSelectMinErr, $compile) {\r\n\r\n  return {\r\n    restrict: 'EA',\r\n    require: '^uiSelect',\r\n    replace: true,\r\n    transclude: true,\r\n    templateUrl: function(tElement) {\r\n      // Gets theme attribute from parent (ui-select)\r\n      var theme = tElement.parent().attr('theme') || uiSelectConfig.theme;\r\n      return theme + '/choices.tpl.html';\r\n    },\r\n\r\n    compile: function(tElement, tAttrs) {\r\n\r\n      if (!tAttrs.repeat) throw uiSelectMinErr('repeat', \"Expected 'repeat' expression.\");\r\n\r\n      return function link(scope, element, attrs, $select, transcludeFn) {\r\n\r\n        // var repeat = RepeatParser.parse(attrs.repeat);\r\n        var groupByExp = attrs.groupBy;\r\n        var groupFilterExp = attrs.groupFilter;\r\n\r\n        $select.parseRepeatAttr(attrs.repeat, groupByExp, groupFilterExp); //Result ready at $select.parserResult\r\n\r\n        $select.disableChoiceExpression = attrs.uiDisableChoice;\r\n        $select.onHighlightCallback = attrs.onHighlight;\r\n\r\n        $select.dropdownPosition = attrs.position ? attrs.position.toLowerCase() : uiSelectConfig.dropdownPosition;\r\n\r\n        if(groupByExp) {\r\n          var groups = element.querySelectorAll('.ui-select-choices-group');\r\n          if (groups.length !== 1) throw uiSelectMinErr('rows', \"Expected 1 .ui-select-choices-group but got '{0}'.\", groups.length);\r\n          groups.attr('ng-repeat', RepeatParser.getGroupNgRepeatExpression());\r\n        }\r\n\r\n        var choices = element.querySelectorAll('.ui-select-choices-row');\r\n        if (choices.length !== 1) {\r\n          throw uiSelectMinErr('rows', \"Expected 1 .ui-select-choices-row but got '{0}'.\", choices.length);\r\n        }\r\n\r\n        choices.attr('ng-repeat', $select.parserResult.repeatExpression(groupByExp))\r\n            .attr('ng-if', '$select.open') //Prevent unnecessary watches when dropdown is closed\r\n            .attr('ng-click', '$select.select(' + $select.parserResult.itemName + ',false,$event)');\r\n\r\n        var rowsInner = element.querySelectorAll('.ui-select-choices-row-inner');\r\n        if (rowsInner.length !== 1) throw uiSelectMinErr('rows', \"Expected 1 .ui-select-choices-row-inner but got '{0}'.\", rowsInner.length);\r\n        rowsInner.attr('uis-transclude-append', ''); //Adding uisTranscludeAppend directive to row element after choices element has ngRepeat\r\n\r\n        $compile(element, transcludeFn)(scope); //Passing current transcludeFn to be able to append elements correctly from uisTranscludeAppend\r\n\r\n        scope.$watch('$select.search', function(newValue) {\r\n          if(newValue && !$select.open && $select.multiple) $select.activate(false, true);\r\n          $select.activeIndex = $select.tagging.isActivated ? -1 : 0;\r\n          $select.refresh(attrs.refresh);\r\n        });\r\n\r\n        attrs.$observe('refreshDelay', function() {\r\n          // $eval() is needed otherwise we get a string instead of a number\r\n          var refreshDelay = scope.$eval(attrs.refreshDelay);\r\n          $select.refreshDelay = refreshDelay !== undefined ? refreshDelay : uiSelectConfig.refreshDelay;\r\n        });\r\n      };\r\n    }\r\n  };\r\n}]);\r\n\r\n/**\r\n * Contains ui-select \"intelligence\".\r\n *\r\n * The goal is to limit dependency on the DOM whenever possible and\r\n * put as much logic in the controller (instead of the link functions) as possible so it can be easily tested.\r\n */\r\nuis.controller('uiSelectCtrl',\r\n  ['$scope', '$element', '$timeout', '$filter', 'uisRepeatParser', 'uiSelectMinErr', 'uiSelectConfig', '$parse',\r\n  function($scope, $element, $timeout, $filter, RepeatParser, uiSelectMinErr, uiSelectConfig, $parse) {\r\n\r\n  var ctrl = this;\r\n\r\n  var EMPTY_SEARCH = '';\r\n\r\n  ctrl.placeholder = uiSelectConfig.placeholder;\r\n  ctrl.searchEnabled = uiSelectConfig.searchEnabled;\r\n  ctrl.sortable = uiSelectConfig.sortable;\r\n  ctrl.refreshDelay = uiSelectConfig.refreshDelay;\r\n\r\n  ctrl.removeSelected = false; //If selected item(s) should be removed from dropdown list\r\n  ctrl.closeOnSelect = true; //Initialized inside uiSelect directive link function\r\n  ctrl.search = EMPTY_SEARCH;\r\n\r\n  ctrl.activeIndex = 0; //Dropdown of choices\r\n  ctrl.items = []; //All available choices\r\n\r\n  ctrl.open = false;\r\n  ctrl.focus = false;\r\n  ctrl.disabled = false;\r\n  ctrl.selected = undefined;\r\n\r\n  ctrl.dropdownPosition = 'auto';\r\n\r\n  ctrl.focusser = undefined; //Reference to input element used to handle focus events\r\n  ctrl.resetSearchInput = true;\r\n  ctrl.multiple = undefined; // Initialized inside uiSelect directive link function\r\n  ctrl.disableChoiceExpression = undefined; // Initialized inside uiSelectChoices directive link function\r\n  ctrl.tagging = {isActivated: false, fct: undefined};\r\n  ctrl.taggingTokens = {isActivated: false, tokens: undefined};\r\n  ctrl.lockChoiceExpression = undefined; // Initialized inside uiSelectMatch directive link function\r\n  ctrl.clickTriggeredSelect = false;\r\n  ctrl.$filter = $filter;\r\n\r\n  ctrl.searchInput = $element.querySelectorAll('input.ui-select-search');\r\n  if (ctrl.searchInput.length !== 1) {\r\n    throw uiSelectMinErr('searchInput', \"Expected 1 input.ui-select-search but got '{0}'.\", ctrl.searchInput.length);\r\n  }\r\n  \r\n  ctrl.isEmpty = function() {\r\n    return angular.isUndefined(ctrl.selected) || ctrl.selected === null || ctrl.selected === '';\r\n  };\r\n\r\n  // Most of the time the user does not want to empty the search input when in typeahead mode\r\n  function _resetSearchInput() {\r\n    if (ctrl.resetSearchInput || (ctrl.resetSearchInput === undefined && uiSelectConfig.resetSearchInput)) {\r\n      ctrl.search = EMPTY_SEARCH;\r\n      //reset activeIndex\r\n      if (ctrl.selected && ctrl.items.length && !ctrl.multiple) {\r\n        ctrl.activeIndex = ctrl.items.indexOf(ctrl.selected);\r\n      }\r\n    }\r\n  }\r\n\r\n    function _groupsFilter(groups, groupNames) {\r\n      var i, j, result = [];\r\n      for(i = 0; i < groupNames.length ;i++){\r\n        for(j = 0; j < groups.length ;j++){\r\n          if(groups[j].name == [groupNames[i]]){\r\n            result.push(groups[j]);\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n  // When the user clicks on ui-select, displays the dropdown list\r\n  ctrl.activate = function(initSearchValue, avoidReset) {\r\n    if (!ctrl.disabled  && !ctrl.open) {\r\n      if(!avoidReset) _resetSearchInput();\r\n\r\n      $scope.$broadcast('uis:activate');\r\n\r\n      ctrl.open = true;\r\n\r\n      ctrl.activeIndex = ctrl.activeIndex >= ctrl.items.length ? 0 : ctrl.activeIndex;\r\n\r\n      // ensure that the index is set to zero for tagging variants\r\n      // that where first option is auto-selected\r\n      if ( ctrl.activeIndex === -1 && ctrl.taggingLabel !== false ) {\r\n        ctrl.activeIndex = 0;\r\n      }\r\n\r\n      // Give it time to appear before focus\r\n      $timeout(function() {\r\n        ctrl.search = initSearchValue || ctrl.search;\r\n        ctrl.searchInput[0].focus();\r\n        if(!ctrl.tagging.isActivated && ctrl.items.length > 1) {\r\n          _ensureHighlightVisible();\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  ctrl.findGroupByName = function(name) {\r\n    return ctrl.groups && ctrl.groups.filter(function(group) {\r\n      return group.name === name;\r\n    })[0];\r\n  };\r\n\r\n  ctrl.parseRepeatAttr = function(repeatAttr, groupByExp, groupFilterExp) {\r\n    function updateGroups(items) {\r\n      var groupFn = $scope.$eval(groupByExp);\r\n      ctrl.groups = [];\r\n      angular.forEach(items, function(item) {\r\n        var groupName = angular.isFunction(groupFn) ? groupFn(item) : item[groupFn];\r\n        var group = ctrl.findGroupByName(groupName);\r\n        if(group) {\r\n          group.items.push(item);\r\n        }\r\n        else {\r\n          ctrl.groups.push({name: groupName, items: [item]});\r\n        }\r\n      });\r\n      if(groupFilterExp){\r\n        var groupFilterFn = $scope.$eval(groupFilterExp);\r\n        if( angular.isFunction(groupFilterFn)){\r\n          ctrl.groups = groupFilterFn(ctrl.groups);\r\n        } else if(angular.isArray(groupFilterFn)){\r\n          ctrl.groups = _groupsFilter(ctrl.groups, groupFilterFn);\r\n        }\r\n      }\r\n      ctrl.items = [];\r\n      ctrl.groups.forEach(function(group) {\r\n        ctrl.items = ctrl.items.concat(group.items);\r\n      });\r\n    }\r\n\r\n    function setPlainItems(items) {\r\n      ctrl.items = items;\r\n    }\r\n\r\n    ctrl.setItemsFn = groupByExp ? updateGroups : setPlainItems;\r\n\r\n    ctrl.parserResult = RepeatParser.parse(repeatAttr);\r\n\r\n    ctrl.isGrouped = !!groupByExp;\r\n    ctrl.itemProperty = ctrl.parserResult.itemName;\r\n\r\n    //If collection is an Object, convert it to Array\r\n\r\n    var originalSource = ctrl.parserResult.source;\r\n    \r\n    //When an object is used as source, we better create an array and use it as 'source'\r\n    var createArrayFromObject = function(){\r\n      var origSrc = originalSource($scope);\r\n      $scope.$uisSource = Object.keys(origSrc).map(function(v){\r\n        var result = {};\r\n        result[ctrl.parserResult.keyName] = v;\r\n        result.value = origSrc[v];\r\n        return result;\r\n      });\r\n    };\r\n\r\n    if (ctrl.parserResult.keyName){ // Check for (key,value) syntax\r\n      createArrayFromObject();\r\n      ctrl.parserResult.source = $parse('$uisSource' + ctrl.parserResult.filters);\r\n      $scope.$watch(originalSource, function(newVal, oldVal){\r\n        if (newVal !== oldVal) createArrayFromObject();\r\n      }, true);\r\n    }\r\n\r\n    ctrl.refreshItems = function (data){\r\n      data = data || ctrl.parserResult.source($scope);\r\n      var selectedItems = ctrl.selected;\r\n      //TODO should implement for single mode removeSelected\r\n      if (ctrl.isEmpty() || (angular.isArray(selectedItems) && !selectedItems.length) || !ctrl.removeSelected) {\r\n        ctrl.setItemsFn(data);\r\n      }else{\r\n        if ( data !== undefined ) {\r\n          var filteredItems = data.filter(function(i) {return selectedItems && selectedItems.indexOf(i) < 0;});\r\n          ctrl.setItemsFn(filteredItems);\r\n        }\r\n      }\r\n      if (ctrl.dropdownPosition === 'auto' || ctrl.dropdownPosition === 'up'){\r\n        $scope.calculateDropdownPos();\r\n      }\r\n    };\r\n\r\n    // See https://github.com/angular/angular.js/blob/v1.2.15/src/ng/directive/ngRepeat.js#L259\r\n    $scope.$watchCollection(ctrl.parserResult.source, function(items) {\r\n      if (items === undefined || items === null) {\r\n        // If the user specifies undefined or null => reset the collection\r\n        // Special case: items can be undefined if the user did not initialized the collection on the scope\r\n        // i.e $scope.addresses = [] is missing\r\n        ctrl.items = [];\r\n      } else {\r\n        if (!angular.isArray(items)) {\r\n          throw uiSelectMinErr('items', \"Expected an array but got '{0}'.\", items);          \r\n        } else {\r\n          //Remove already selected items (ex: while searching)\r\n          //TODO Should add a test\r\n          ctrl.refreshItems(items);\r\n          ctrl.ngModel.$modelValue = null; //Force scope model value and ngModel value to be out of sync to re-run formatters\r\n        }\r\n      }\r\n    });\r\n\r\n  };\r\n\r\n  var _refreshDelayPromise;\r\n\r\n  /**\r\n   * Typeahead mode: lets the user refresh the collection using his own function.\r\n   *\r\n   * See Expose $select.search for external / remote filtering https://github.com/angular-ui/ui-select/pull/31\r\n   */\r\n  ctrl.refresh = function(refreshAttr) {\r\n    if (refreshAttr !== undefined) {\r\n\r\n      // Debounce\r\n      // See https://github.com/angular-ui/bootstrap/blob/0.10.0/src/typeahead/typeahead.js#L155\r\n      // FYI AngularStrap typeahead does not have debouncing: https://github.com/mgcrea/angular-strap/blob/v2.0.0-rc.4/src/typeahead/typeahead.js#L177\r\n      if (_refreshDelayPromise) {\r\n        $timeout.cancel(_refreshDelayPromise);\r\n      }\r\n      _refreshDelayPromise = $timeout(function() {\r\n        $scope.$eval(refreshAttr);\r\n      }, ctrl.refreshDelay);\r\n    }\r\n  };\r\n\r\n  ctrl.isActive = function(itemScope) {\r\n    if ( !ctrl.open ) {\r\n      return false;\r\n    }\r\n    var itemIndex = ctrl.items.indexOf(itemScope[ctrl.itemProperty]);\r\n    var isActive =  itemIndex === ctrl.activeIndex;\r\n\r\n    if ( !isActive || ( itemIndex < 0 && ctrl.taggingLabel !== false ) ||( itemIndex < 0 && ctrl.taggingLabel === false) ) {\r\n      return false;\r\n    }\r\n\r\n    if (isActive && !angular.isUndefined(ctrl.onHighlightCallback)) {\r\n      itemScope.$eval(ctrl.onHighlightCallback);\r\n    }\r\n\r\n    return isActive;\r\n  };\r\n\r\n  ctrl.isDisabled = function(itemScope) {\r\n\r\n    if (!ctrl.open) return;\r\n\r\n    var itemIndex = ctrl.items.indexOf(itemScope[ctrl.itemProperty]);\r\n    var isDisabled = false;\r\n    var item;\r\n\r\n    if (itemIndex >= 0 && !angular.isUndefined(ctrl.disableChoiceExpression)) {\r\n      item = ctrl.items[itemIndex];\r\n      isDisabled = !!(itemScope.$eval(ctrl.disableChoiceExpression)); // force the boolean value\r\n      item._uiSelectChoiceDisabled = isDisabled; // store this for later reference\r\n    }\r\n\r\n    return isDisabled;\r\n  };\r\n\r\n\r\n  // When the user selects an item with ENTER or clicks the dropdown\r\n  ctrl.select = function(item, skipFocusser, $event) {\r\n    if (item === undefined || !item._uiSelectChoiceDisabled) {\r\n\r\n      if ( ! ctrl.items && ! ctrl.search ) return;\r\n\r\n      if (!item || !item._uiSelectChoiceDisabled) {\r\n        if(ctrl.tagging.isActivated) {\r\n          // if taggingLabel is disabled, we pull from ctrl.search val\r\n          if ( ctrl.taggingLabel === false ) {\r\n            if ( ctrl.activeIndex < 0 ) {\r\n              item = ctrl.tagging.fct !== undefined ? ctrl.tagging.fct(ctrl.search) : ctrl.search;\r\n              if (!item || angular.equals( ctrl.items[0], item ) ) {\r\n                return;\r\n              }\r\n            } else {\r\n              // keyboard nav happened first, user selected from dropdown\r\n              item = ctrl.items[ctrl.activeIndex];\r\n            }\r\n          } else {\r\n            // tagging always operates at index zero, taggingLabel === false pushes\r\n            // the ctrl.search value without having it injected\r\n            if ( ctrl.activeIndex === 0 ) {\r\n              // ctrl.tagging pushes items to ctrl.items, so we only have empty val\r\n              // for `item` if it is a detected duplicate\r\n              if ( item === undefined ) return;\r\n\r\n              // create new item on the fly if we don't already have one;\r\n              // use tagging function if we have one\r\n              if ( ctrl.tagging.fct !== undefined && typeof item === 'string' ) {\r\n                item = ctrl.tagging.fct(ctrl.search);\r\n                if (!item) return;\r\n              // if item type is 'string', apply the tagging label\r\n              } else if ( typeof item === 'string' ) {\r\n                // trim the trailing space\r\n                item = item.replace(ctrl.taggingLabel,'').trim();\r\n              }\r\n            }\r\n          }\r\n          // search ctrl.selected for dupes potentially caused by tagging and return early if found\r\n          if ( ctrl.selected && angular.isArray(ctrl.selected) && ctrl.selected.filter( function (selection) { return angular.equals(selection, item); }).length > 0 ) {\r\n            ctrl.close(skipFocusser);\r\n            return;\r\n          }\r\n        }\r\n\r\n        $scope.$broadcast('uis:select', item);\r\n\r\n        var locals = {};\r\n        locals[ctrl.parserResult.itemName] = item;\r\n\r\n        $timeout(function(){\r\n          ctrl.onSelectCallback($scope, {\r\n            $item: item,\r\n            $model: ctrl.parserResult.modelMapper($scope, locals)\r\n          });\r\n        });\r\n\r\n        if (ctrl.closeOnSelect) {\r\n          ctrl.close(skipFocusser);\r\n        }\r\n        if ($event && $event.type === 'click') {\r\n          ctrl.clickTriggeredSelect = true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Closes the dropdown\r\n  ctrl.close = function(skipFocusser) {\r\n    if (!ctrl.open) return;\r\n    if (ctrl.ngModel && ctrl.ngModel.$setTouched) ctrl.ngModel.$setTouched();\r\n    _resetSearchInput();\r\n    ctrl.open = false;\r\n\r\n    $scope.$broadcast('uis:close', skipFocusser);\r\n\r\n  };\r\n\r\n  ctrl.setFocus = function(){\r\n    if (!ctrl.focus) ctrl.focusInput[0].focus();\r\n  };\r\n\r\n  ctrl.clear = function($event) {\r\n    ctrl.select(undefined);\r\n    $event.stopPropagation();\r\n    $timeout(function() {\r\n      ctrl.focusser[0].focus();\r\n    }, 0, false);\r\n  };\r\n\r\n  // Toggle dropdown\r\n  ctrl.toggle = function(e) {\r\n    if (ctrl.open) {\r\n      ctrl.close();\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    } else {\r\n      ctrl.activate();\r\n    }\r\n  };\r\n\r\n  ctrl.isLocked = function(itemScope, itemIndex) {\r\n      var isLocked, item = ctrl.selected[itemIndex];\r\n\r\n      if (item && !angular.isUndefined(ctrl.lockChoiceExpression)) {\r\n          isLocked = !!(itemScope.$eval(ctrl.lockChoiceExpression)); // force the boolean value\r\n          item._uiSelectChoiceLocked = isLocked; // store this for later reference\r\n      }\r\n\r\n      return isLocked;\r\n  };\r\n\r\n  var sizeWatch = null;\r\n  ctrl.sizeSearchInput = function() {\r\n\r\n    var input = ctrl.searchInput[0],\r\n        container = ctrl.searchInput.parent().parent()[0],\r\n        calculateContainerWidth = function() {\r\n          // Return the container width only if the search input is visible\r\n          return container.clientWidth * !!input.offsetParent;\r\n        },\r\n        updateIfVisible = function(containerWidth) {\r\n          if (containerWidth === 0) {\r\n            return false;\r\n          }\r\n          var inputWidth = containerWidth - input.offsetLeft - 10;\r\n          if (inputWidth < 50) inputWidth = containerWidth;\r\n          ctrl.searchInput.css('width', inputWidth+'px');\r\n          return true;\r\n        };\r\n\r\n    ctrl.searchInput.css('width', '10px');\r\n    $timeout(function() { //Give tags time to render correctly\r\n      if (sizeWatch === null && !updateIfVisible(calculateContainerWidth())) {\r\n        sizeWatch = $scope.$watch(calculateContainerWidth, function(containerWidth) {\r\n          if (updateIfVisible(containerWidth)) {\r\n            sizeWatch();\r\n            sizeWatch = null;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  function _handleDropDownSelection(key) {\r\n    var processed = true;\r\n    switch (key) {\r\n      case KEY.DOWN:\r\n        if (!ctrl.open && ctrl.multiple) ctrl.activate(false, true); //In case its the search input in 'multiple' mode\r\n        else if (ctrl.activeIndex < ctrl.items.length - 1) { ctrl.activeIndex++; }\r\n        break;\r\n      case KEY.UP:\r\n        if (!ctrl.open && ctrl.multiple) ctrl.activate(false, true); //In case its the search input in 'multiple' mode\r\n        else if (ctrl.activeIndex > 0 || (ctrl.search.length === 0 && ctrl.tagging.isActivated && ctrl.activeIndex > -1)) { ctrl.activeIndex--; }\r\n        break;\r\n      case KEY.TAB:\r\n        if (!ctrl.multiple || ctrl.open) ctrl.select(ctrl.items[ctrl.activeIndex], true);\r\n        break;\r\n      case KEY.ENTER:\r\n        if(ctrl.open && (ctrl.tagging.isActivated || ctrl.activeIndex >= 0)){\r\n          ctrl.select(ctrl.items[ctrl.activeIndex]); // Make sure at least one dropdown item is highlighted before adding if not in tagging mode\r\n        } else {\r\n          ctrl.activate(false, true); //In case its the search input in 'multiple' mode\r\n        }\r\n        break;\r\n      case KEY.ESC:\r\n        ctrl.close();\r\n        break;\r\n      default:\r\n        processed = false;\r\n    }\r\n    return processed;\r\n  }\r\n\r\n  // Bind to keyboard shortcuts\r\n  ctrl.searchInput.on('keydown', function(e) {\r\n\r\n    var key = e.which;\r\n\r\n    // if(~[KEY.ESC,KEY.TAB].indexOf(key)){\r\n    //   //TODO: SEGURO?\r\n    //   ctrl.close();\r\n    // }\r\n\r\n    $scope.$apply(function() {\r\n\r\n      var tagged = false;\r\n\r\n      if (ctrl.items.length > 0 || ctrl.tagging.isActivated) {\r\n        _handleDropDownSelection(key);\r\n        if ( ctrl.taggingTokens.isActivated ) {\r\n          for (var i = 0; i < ctrl.taggingTokens.tokens.length; i++) {\r\n            if ( ctrl.taggingTokens.tokens[i] === KEY.MAP[e.keyCode] ) {\r\n              // make sure there is a new value to push via tagging\r\n              if ( ctrl.search.length > 0 ) {\r\n                tagged = true;\r\n              }\r\n            }\r\n          }\r\n          if ( tagged ) {\r\n            $timeout(function() {\r\n              ctrl.searchInput.triggerHandler('tagged');\r\n              var newItem = ctrl.search.replace(KEY.MAP[e.keyCode],'').trim();\r\n              if ( ctrl.tagging.fct ) {\r\n                newItem = ctrl.tagging.fct( newItem );\r\n              }\r\n              if (newItem) ctrl.select(newItem, true);\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n    });\r\n\r\n    if(KEY.isVerticalMovement(key) && ctrl.items.length > 0){\r\n      _ensureHighlightVisible();\r\n    }\r\n\r\n    if (key === KEY.ENTER || key === KEY.ESC) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n\r\n  });\r\n\r\n  // If tagging try to split by tokens and add items\r\n  ctrl.searchInput.on('paste', function (e) {\r\n    var data = e.originalEvent.clipboardData.getData('text/plain');\r\n    if (data && data.length > 0 && ctrl.taggingTokens.isActivated && ctrl.tagging.fct) {\r\n      var items = data.split(ctrl.taggingTokens.tokens[0]); // split by first token only\r\n      if (items && items.length > 0) {\r\n        angular.forEach(items, function (item) {\r\n          var newItem = ctrl.tagging.fct(item);\r\n          if (newItem) {\r\n            ctrl.select(newItem, true);\r\n          }\r\n        });\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n    }\r\n  });\r\n\r\n  ctrl.searchInput.on('tagged', function() {\r\n    $timeout(function() {\r\n      _resetSearchInput();\r\n    });\r\n  });\r\n\r\n  // See https://github.com/ivaynberg/select2/blob/3.4.6/select2.js#L1431\r\n  function _ensureHighlightVisible() {\r\n    var container = $element.querySelectorAll('.ui-select-choices-content');\r\n    var choices = container.querySelectorAll('.ui-select-choices-row');\r\n    if (choices.length < 1) {\r\n      throw uiSelectMinErr('choices', \"Expected multiple .ui-select-choices-row but got '{0}'.\", choices.length);\r\n    }\r\n\r\n    if (ctrl.activeIndex < 0) {\r\n      return;\r\n    }\r\n\r\n    var highlighted = choices[ctrl.activeIndex];\r\n    var posY = highlighted.offsetTop + highlighted.clientHeight - container[0].scrollTop;\r\n    var height = container[0].offsetHeight;\r\n\r\n    if (posY > height) {\r\n      container[0].scrollTop += posY - height;\r\n    } else if (posY < highlighted.clientHeight) {\r\n      if (ctrl.isGrouped && ctrl.activeIndex === 0)\r\n        container[0].scrollTop = 0; //To make group header visible when going all the way up\r\n      else\r\n        container[0].scrollTop -= highlighted.clientHeight - posY;\r\n    }\r\n  }\r\n\r\n  $scope.$on('$destroy', function() {\r\n    ctrl.searchInput.off('keyup keydown tagged blur paste');\r\n  });\r\n\r\n}]);\r\n\r\nuis.directive('uiSelect',\r\n  ['$document', 'uiSelectConfig', 'uiSelectMinErr', 'uisOffset', '$compile', '$parse', '$timeout',\r\n  function($document, uiSelectConfig, uiSelectMinErr, uisOffset, $compile, $parse, $timeout) {\r\n\r\n  return {\r\n    restrict: 'EA',\r\n    templateUrl: function(tElement, tAttrs) {\r\n      var theme = tAttrs.theme || uiSelectConfig.theme;\r\n      return theme + (angular.isDefined(tAttrs.multiple) ? '/select-multiple.tpl.html' : '/select.tpl.html');\r\n    },\r\n    replace: true,\r\n    transclude: true,\r\n    require: ['uiSelect', '^ngModel'],\r\n    scope: true,\r\n\r\n    controller: 'uiSelectCtrl',\r\n    controllerAs: '$select',\r\n    compile: function(tElement, tAttrs) {\r\n\r\n      //Multiple or Single depending if multiple attribute presence\r\n      if (angular.isDefined(tAttrs.multiple))\r\n        tElement.append('<ui-select-multiple/>').removeAttr('multiple');\r\n      else\r\n        tElement.append('<ui-select-single/>');\r\n\r\n      if (tAttrs.inputId)\r\n        tElement.querySelectorAll('input.ui-select-search')[0].id = tAttrs.inputId;\r\n\r\n      return function(scope, element, attrs, ctrls, transcludeFn) {\r\n\r\n        var $select = ctrls[0];\r\n        var ngModel = ctrls[1];\r\n\r\n        $select.generatedId = uiSelectConfig.generateId();\r\n        $select.baseTitle = attrs.title || 'Select box';\r\n        $select.focusserTitle = $select.baseTitle + ' focus';\r\n        $select.focusserId = 'focusser-' + $select.generatedId;\r\n\r\n        $select.closeOnSelect = function() {\r\n          if (angular.isDefined(attrs.closeOnSelect)) {\r\n            return $parse(attrs.closeOnSelect)();\r\n          } else {\r\n            return uiSelectConfig.closeOnSelect;\r\n          }\r\n        }();\r\n\r\n        $select.onSelectCallback = $parse(attrs.onSelect);\r\n        $select.onRemoveCallback = $parse(attrs.onRemove);\r\n\r\n        //Limit the number of selections allowed\r\n        $select.limit = (angular.isDefined(attrs.limit)) ? parseInt(attrs.limit, 10) : undefined;\r\n\r\n        //Set reference to ngModel from uiSelectCtrl\r\n        $select.ngModel = ngModel;\r\n\r\n        $select.choiceGrouped = function(group){\r\n          return $select.isGrouped && group && group.name;\r\n        };\r\n\r\n        if(attrs.tabindex){\r\n          attrs.$observe('tabindex', function(value) {\r\n            $select.focusInput.attr('tabindex', value);\r\n            element.removeAttr('tabindex');\r\n          });\r\n        }\r\n\r\n        scope.$watch('searchEnabled', function() {\r\n            var searchEnabled = scope.$eval(attrs.searchEnabled);\r\n            $select.searchEnabled = searchEnabled !== undefined ? searchEnabled : uiSelectConfig.searchEnabled;\r\n        });\r\n\r\n        scope.$watch('sortable', function() {\r\n            var sortable = scope.$eval(attrs.sortable);\r\n            $select.sortable = sortable !== undefined ? sortable : uiSelectConfig.sortable;\r\n        });\r\n\r\n        attrs.$observe('disabled', function() {\r\n          // No need to use $eval() (thanks to ng-disabled) since we already get a boolean instead of a string\r\n          $select.disabled = attrs.disabled !== undefined ? attrs.disabled : false;\r\n        });\r\n\r\n        attrs.$observe('resetSearchInput', function() {\r\n          // $eval() is needed otherwise we get a string instead of a boolean\r\n          var resetSearchInput = scope.$eval(attrs.resetSearchInput);\r\n          $select.resetSearchInput = resetSearchInput !== undefined ? resetSearchInput : true;\r\n        });\r\n\r\n        attrs.$observe('tagging', function() {\r\n          if(attrs.tagging !== undefined)\r\n          {\r\n            // $eval() is needed otherwise we get a string instead of a boolean\r\n            var taggingEval = scope.$eval(attrs.tagging);\r\n            $select.tagging = {isActivated: true, fct: taggingEval !== true ? taggingEval : undefined};\r\n          }\r\n          else\r\n          {\r\n            $select.tagging = {isActivated: false, fct: undefined};\r\n          }\r\n        });\r\n\r\n        attrs.$observe('taggingLabel', function() {\r\n          if(attrs.tagging !== undefined )\r\n          {\r\n            // check eval for FALSE, in this case, we disable the labels\r\n            // associated with tagging\r\n            if ( attrs.taggingLabel === 'false' ) {\r\n              $select.taggingLabel = false;\r\n            }\r\n            else\r\n            {\r\n              $select.taggingLabel = attrs.taggingLabel !== undefined ? attrs.taggingLabel : '(new)';\r\n            }\r\n          }\r\n        });\r\n\r\n        attrs.$observe('taggingTokens', function() {\r\n          if (attrs.tagging !== undefined) {\r\n            var tokens = attrs.taggingTokens !== undefined ? attrs.taggingTokens.split('|') : [',','ENTER'];\r\n            $select.taggingTokens = {isActivated: true, tokens: tokens };\r\n          }\r\n        });\r\n\r\n        //Automatically gets focus when loaded\r\n        if (angular.isDefined(attrs.autofocus)){\r\n          $timeout(function(){\r\n            $select.setFocus();\r\n          });\r\n        }\r\n\r\n        //Gets focus based on scope event name (e.g. focus-on='SomeEventName')\r\n        if (angular.isDefined(attrs.focusOn)){\r\n          scope.$on(attrs.focusOn, function() {\r\n              $timeout(function(){\r\n                $select.setFocus();\r\n              });\r\n          });\r\n        }\r\n\r\n        function onDocumentClick(e) {\r\n          if (!$select.open) return; //Skip it if dropdown is close\r\n\r\n          var contains = false;\r\n\r\n          if (window.jQuery) {\r\n            // Firefox 3.6 does not support element.contains()\r\n            // See Node.contains https://developer.mozilla.org/en-US/docs/Web/API/Node.contains\r\n            contains = window.jQuery.contains(element[0], e.target);\r\n          } else {\r\n            contains = element[0].contains(e.target);\r\n          }\r\n\r\n          if (!contains && !$select.clickTriggeredSelect) {\r\n            //Will lose focus only with certain targets\r\n            var focusableControls = ['input','button','textarea'];\r\n            var targetController = angular.element(e.target).controller('uiSelect'); //To check if target is other ui-select\r\n            var skipFocusser = targetController && targetController !== $select; //To check if target is other ui-select\r\n            if (!skipFocusser) skipFocusser =  ~focusableControls.indexOf(e.target.tagName.toLowerCase()); //Check if target is input, button or textarea\r\n            $select.close(skipFocusser);\r\n            scope.$digest();\r\n          }\r\n          $select.clickTriggeredSelect = false;\r\n        }\r\n\r\n        // See Click everywhere but here event http://stackoverflow.com/questions/12931369\r\n        $document.on('click', onDocumentClick);\r\n\r\n        scope.$on('$destroy', function() {\r\n          $document.off('click', onDocumentClick);\r\n        });\r\n\r\n        // Move transcluded elements to their correct position in main template\r\n        transcludeFn(scope, function(clone) {\r\n          // See Transclude in AngularJS http://blog.omkarpatil.com/2012/11/transclude-in-angularjs.html\r\n\r\n          // One day jqLite will be replaced by jQuery and we will be able to write:\r\n          // var transcludedElement = clone.filter('.my-class')\r\n          // instead of creating a hackish DOM element:\r\n          var transcluded = angular.element('<div>').append(clone);\r\n\r\n          var transcludedMatch = transcluded.querySelectorAll('.ui-select-match');\r\n          transcludedMatch.removeAttr('ui-select-match'); //To avoid loop in case directive as attr\r\n          transcludedMatch.removeAttr('data-ui-select-match'); // Properly handle HTML5 data-attributes\r\n          if (transcludedMatch.length !== 1) {\r\n            throw uiSelectMinErr('transcluded', \"Expected 1 .ui-select-match but got '{0}'.\", transcludedMatch.length);\r\n          }\r\n          element.querySelectorAll('.ui-select-match').replaceWith(transcludedMatch);\r\n\r\n          var transcludedChoices = transcluded.querySelectorAll('.ui-select-choices');\r\n          transcludedChoices.removeAttr('ui-select-choices'); //To avoid loop in case directive as attr\r\n          transcludedChoices.removeAttr('data-ui-select-choices'); // Properly handle HTML5 data-attributes\r\n          if (transcludedChoices.length !== 1) {\r\n            throw uiSelectMinErr('transcluded', \"Expected 1 .ui-select-choices but got '{0}'.\", transcludedChoices.length);\r\n          }\r\n          element.querySelectorAll('.ui-select-choices').replaceWith(transcludedChoices);\r\n        });\r\n\r\n        // Support for appending the select field to the body when its open\r\n        var appendToBody = scope.$eval(attrs.appendToBody);\r\n        if (appendToBody !== undefined ? appendToBody : uiSelectConfig.appendToBody) {\r\n          scope.$watch('$select.open', function(isOpen) {\r\n            if (isOpen) {\r\n              positionDropdown();\r\n            } else {\r\n              resetDropdown();\r\n            }\r\n          });\r\n\r\n          // Move the dropdown back to its original location when the scope is destroyed. Otherwise\r\n          // it might stick around when the user routes away or the select field is otherwise removed\r\n          scope.$on('$destroy', function() {\r\n            resetDropdown();\r\n          });\r\n        }\r\n\r\n        // Hold on to a reference to the .ui-select-container element for appendToBody support\r\n        var placeholder = null,\r\n            originalWidth = '';\r\n\r\n        function positionDropdown() {\r\n          // Remember the absolute position of the element\r\n          var offset = uisOffset(element);\r\n\r\n          // Clone the element into a placeholder element to take its original place in the DOM\r\n          placeholder = angular.element('<div class=\"ui-select-placeholder\"></div>');\r\n          placeholder[0].style.width = offset.width + 'px';\r\n          placeholder[0].style.height = offset.height + 'px';\r\n          element.after(placeholder);\r\n\r\n          // Remember the original value of the element width inline style, so it can be restored\r\n          // when the dropdown is closed\r\n          originalWidth = element[0].style.width;\r\n\r\n          // Now move the actual dropdown element to the end of the body\r\n          $document.find('body').append(element);\r\n\r\n          element[0].style.position = 'absolute';\r\n          element[0].style.left = offset.left + 'px';\r\n          element[0].style.top = offset.top + 'px';\r\n          element[0].style.width = offset.width + 'px';\r\n        }\r\n\r\n        function resetDropdown() {\r\n          if (placeholder === null) {\r\n            // The dropdown has not actually been display yet, so there's nothing to reset\r\n            return;\r\n          }\r\n\r\n          // Move the dropdown element back to its original location in the DOM\r\n          placeholder.replaceWith(element);\r\n          placeholder = null;\r\n\r\n          element[0].style.position = '';\r\n          element[0].style.left = '';\r\n          element[0].style.top = '';\r\n          element[0].style.width = originalWidth;\r\n        }\r\n\r\n        // Hold on to a reference to the .ui-select-dropdown element for direction support.\r\n        var dropdown = null,\r\n            directionUpClassName = 'direction-up';\r\n\r\n        // Support changing the direction of the dropdown if there isn't enough space to render it.\r\n        scope.$watch('$select.open', function() {\r\n\r\n          if ($select.dropdownPosition === 'auto' || $select.dropdownPosition === 'up'){\r\n            scope.calculateDropdownPos();\r\n          }\r\n\r\n        });\r\n\r\n        var setDropdownPosUp = function(offset, offsetDropdown){\r\n\r\n          offset = offset || uisOffset(element);\r\n          offsetDropdown = offsetDropdown || uisOffset(dropdown);\r\n\r\n          dropdown[0].style.position = 'absolute';\r\n          dropdown[0].style.top = (offsetDropdown.height * -1) + 'px';\r\n          element.addClass(directionUpClassName);\r\n\r\n        };\r\n\r\n        var setDropdownPosDown = function(offset, offsetDropdown){\r\n\r\n          element.removeClass(directionUpClassName);\r\n\r\n          offset = offset || uisOffset(element);\r\n          offsetDropdown = offsetDropdown || uisOffset(dropdown);\r\n\r\n          dropdown[0].style.position = '';\r\n          dropdown[0].style.top = '';\r\n\r\n        };\r\n\r\n        scope.calculateDropdownPos = function(){\r\n\r\n          if ($select.open) {\r\n            dropdown = angular.element(element).querySelectorAll('.ui-select-dropdown');\r\n            if (dropdown.length === 0) {\r\n              return;\r\n            }\r\n\r\n            // Hide the dropdown so there is no flicker until $timeout is done executing.\r\n            dropdown[0].style.opacity = 0;\r\n\r\n            // Delay positioning the dropdown until all choices have been added so its height is correct.\r\n            $timeout(function(){\r\n\r\n              if ($select.dropdownPosition === 'up'){\r\n                  //Go UP\r\n                  setDropdownPosUp(offset, offsetDropdown);\r\n\r\n              }else{ //AUTO\r\n\r\n                element.removeClass(directionUpClassName);\r\n\r\n                var offset = uisOffset(element);\r\n                var offsetDropdown = uisOffset(dropdown);\r\n\r\n                //https://code.google.com/p/chromium/issues/detail?id=342307#c4\r\n                var scrollTop = $document[0].documentElement.scrollTop || $document[0].body.scrollTop; //To make it cross browser (blink, webkit, IE, Firefox).\r\n\r\n                // Determine if the direction of the dropdown needs to be changed.\r\n                if (offset.top + offset.height + offsetDropdown.height > scrollTop + $document[0].documentElement.clientHeight) {\r\n                  //Go UP\r\n                  setDropdownPosUp(offset, offsetDropdown);\r\n                }else{\r\n                  //Go DOWN\r\n                  setDropdownPosDown(offset, offsetDropdown);\r\n                }\r\n\r\n              }\r\n\r\n              // Display the dropdown once it has been positioned.\r\n              dropdown[0].style.opacity = 1;\r\n            });\r\n          } else {\r\n              if (dropdown === null || dropdown.length === 0) {\r\n                return;\r\n              }\r\n\r\n              // Reset the position of the dropdown.\r\n              dropdown[0].style.position = '';\r\n              dropdown[0].style.top = '';\r\n              element.removeClass(directionUpClassName);\r\n          }\r\n        };\r\n      };\r\n    }\r\n  };\r\n}]);\r\n\r\nuis.directive('uiSelectMatch', ['uiSelectConfig', function(uiSelectConfig) {\r\n  return {\r\n    restrict: 'EA',\r\n    require: '^uiSelect',\r\n    replace: true,\r\n    transclude: true,\r\n    templateUrl: function(tElement) {\r\n      // Gets theme attribute from parent (ui-select)\r\n      var theme = tElement.parent().attr('theme') || uiSelectConfig.theme;\r\n      var multi = tElement.parent().attr('multiple');\r\n      return theme + (multi ? '/match-multiple.tpl.html' : '/match.tpl.html');\r\n    },\r\n    link: function(scope, element, attrs, $select) {\r\n      $select.lockChoiceExpression = attrs.uiLockChoice;\r\n      attrs.$observe('placeholder', function(placeholder) {\r\n        $select.placeholder = placeholder !== undefined ? placeholder : uiSelectConfig.placeholder;\r\n      });\r\n\r\n      function setAllowClear(allow) {\r\n        $select.allowClear = (angular.isDefined(allow)) ? (allow === '') ? true : (allow.toLowerCase() === 'true') : false;\r\n      }\r\n\r\n      attrs.$observe('allowClear', setAllowClear);\r\n      setAllowClear(attrs.allowClear);\r\n\r\n      if($select.multiple){\r\n        $select.sizeSearchInput();\r\n      }\r\n\r\n    }\r\n  };\r\n}]);\r\n\r\nuis.directive('uiSelectMultiple', ['uiSelectMinErr','$timeout', function(uiSelectMinErr, $timeout) {\r\n  return {\r\n    restrict: 'EA',\r\n    require: ['^uiSelect', '^ngModel'],\r\n\r\n    controller: ['$scope','$timeout', function($scope, $timeout){\r\n\r\n      var ctrl = this,\r\n          $select = $scope.$select,\r\n          ngModel;\r\n\r\n      //Wait for link fn to inject it \r\n      $scope.$evalAsync(function(){ ngModel = $scope.ngModel; });\r\n\r\n      ctrl.activeMatchIndex = -1;\r\n\r\n      ctrl.updateModel = function(){\r\n        ngModel.$setViewValue(Date.now()); //Set timestamp as a unique string to force changes\r\n        ctrl.refreshComponent();\r\n      };\r\n\r\n      ctrl.refreshComponent = function(){\r\n        //Remove already selected items\r\n        //e.g. When user clicks on a selection, the selected array changes and \r\n        //the dropdown should remove that item\r\n        $select.refreshItems();\r\n        $select.sizeSearchInput();\r\n      };\r\n\r\n      // Remove item from multiple select\r\n      ctrl.removeChoice = function(index){\r\n\r\n        var removedChoice = $select.selected[index];\r\n\r\n        // if the choice is locked, can't remove it\r\n        if(removedChoice._uiSelectChoiceLocked) return;\r\n\r\n        var locals = {};\r\n        locals[$select.parserResult.itemName] = removedChoice;\r\n\r\n        $select.selected.splice(index, 1);\r\n        ctrl.activeMatchIndex = -1;\r\n        $select.sizeSearchInput();\r\n\r\n        // Give some time for scope propagation.\r\n        $timeout(function(){\r\n          $select.onRemoveCallback($scope, {\r\n            $item: removedChoice,\r\n            $model: $select.parserResult.modelMapper($scope, locals)\r\n          });\r\n        });\r\n\r\n        ctrl.updateModel();\r\n\r\n      };\r\n\r\n      ctrl.getPlaceholder = function(){\r\n        //Refactor single?\r\n        if($select.selected && $select.selected.length) return;\r\n        return $select.placeholder;\r\n      };\r\n\r\n\r\n    }],\r\n    controllerAs: '$selectMultiple',\r\n\r\n    link: function(scope, element, attrs, ctrls) {\r\n\r\n      var $select = ctrls[0];\r\n      var ngModel = scope.ngModel = ctrls[1];\r\n      var $selectMultiple = scope.$selectMultiple;\r\n\r\n      //$select.selected = raw selected objects (ignoring any property binding)\r\n\r\n      $select.multiple = true;\r\n      $select.removeSelected = true;\r\n\r\n      //Input that will handle focus\r\n      $select.focusInput = $select.searchInput;\r\n\r\n      //From view --> model\r\n      ngModel.$parsers.unshift(function () {\r\n        var locals = {},\r\n            result,\r\n            resultMultiple = [];\r\n        for (var j = $select.selected.length - 1; j >= 0; j--) {\r\n          locals = {};\r\n          locals[$select.parserResult.itemName] = $select.selected[j];\r\n          result = $select.parserResult.modelMapper(scope, locals);\r\n          resultMultiple.unshift(result);\r\n        }\r\n        return resultMultiple;\r\n      });\r\n\r\n      // From model --> view\r\n      ngModel.$formatters.unshift(function (inputValue) {\r\n        var data = $select.parserResult.source (scope, { $select : {search:''}}), //Overwrite $search\r\n            locals = {},\r\n            result;\r\n        if (!data) return inputValue;\r\n        var resultMultiple = [];\r\n        var checkFnMultiple = function(list, value){\r\n          if (!list || !list.length) return;\r\n          for (var p = list.length - 1; p >= 0; p--) {\r\n            locals[$select.parserResult.itemName] = list[p];\r\n            result = $select.parserResult.modelMapper(scope, locals);\r\n            if($select.parserResult.trackByExp){\r\n                var matches = /\\.(.+)/.exec($select.parserResult.trackByExp);\r\n                if(matches.length>0 && result[matches[1]] == value[matches[1]]){\r\n                    resultMultiple.unshift(list[p]);\r\n                    return true;\r\n                }\r\n            }\r\n            if (angular.equals(result,value)){\r\n              resultMultiple.unshift(list[p]);\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        };\r\n        if (!inputValue) return resultMultiple; //If ngModel was undefined\r\n        for (var k = inputValue.length - 1; k >= 0; k--) {\r\n          //Check model array of currently selected items \r\n          if (!checkFnMultiple($select.selected, inputValue[k])){\r\n            //Check model array of all items available\r\n            if (!checkFnMultiple(data, inputValue[k])){\r\n              //If not found on previous lists, just add it directly to resultMultiple\r\n              resultMultiple.unshift(inputValue[k]);\r\n            }\r\n          }\r\n        }\r\n        return resultMultiple;\r\n      });\r\n      \r\n      //Watch for external model changes \r\n      scope.$watchCollection(function(){ return ngModel.$modelValue; }, function(newValue, oldValue) {\r\n        if (oldValue != newValue){\r\n          ngModel.$modelValue = null; //Force scope model value and ngModel value to be out of sync to re-run formatters\r\n          $selectMultiple.refreshComponent();\r\n        }\r\n      });\r\n\r\n      ngModel.$render = function() {\r\n        // Make sure that model value is array\r\n        if(!angular.isArray(ngModel.$viewValue)){\r\n          // Have tolerance for null or undefined values\r\n          if(angular.isUndefined(ngModel.$viewValue) || ngModel.$viewValue === null){\r\n            $select.selected = [];\r\n          } else {\r\n            throw uiSelectMinErr('multiarr', \"Expected model value to be array but got '{0}'\", ngModel.$viewValue);\r\n          }\r\n        }\r\n        $select.selected = ngModel.$viewValue;\r\n        scope.$evalAsync(); //To force $digest\r\n      };\r\n\r\n      scope.$on('uis:select', function (event, item) {\r\n        if($select.selected.length >= $select.limit) {\r\n          return;\r\n        }\r\n        $select.selected.push(item);\r\n        $selectMultiple.updateModel();\r\n      });\r\n\r\n      scope.$on('uis:activate', function () {\r\n        $selectMultiple.activeMatchIndex = -1;\r\n      });\r\n\r\n      scope.$watch('$select.disabled', function(newValue, oldValue) {\r\n        // As the search input field may now become visible, it may be necessary to recompute its size\r\n        if (oldValue && !newValue) $select.sizeSearchInput();\r\n      });\r\n\r\n      $select.searchInput.on('keydown', function(e) {\r\n        var key = e.which;\r\n        scope.$apply(function() {\r\n          var processed = false;\r\n          // var tagged = false; //Checkme\r\n          if(KEY.isHorizontalMovement(key)){\r\n            processed = _handleMatchSelection(key);\r\n          }\r\n          if (processed  && key != KEY.TAB) {\r\n            //TODO Check si el tab selecciona aun correctamente\r\n            //Crear test\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n          }\r\n        });\r\n      });\r\n      function _getCaretPosition(el) {\r\n        if(angular.isNumber(el.selectionStart)) return el.selectionStart;\r\n        // selectionStart is not supported in IE8 and we don't want hacky workarounds so we compromise\r\n        else return el.value.length;\r\n      }\r\n      // Handles selected options in \"multiple\" mode\r\n      function _handleMatchSelection(key){\r\n        var caretPosition = _getCaretPosition($select.searchInput[0]),\r\n            length = $select.selected.length,\r\n            // none  = -1,\r\n            first = 0,\r\n            last  = length-1,\r\n            curr  = $selectMultiple.activeMatchIndex,\r\n            next  = $selectMultiple.activeMatchIndex+1,\r\n            prev  = $selectMultiple.activeMatchIndex-1,\r\n            newIndex = curr;\r\n\r\n        if(caretPosition > 0 || ($select.search.length && key == KEY.RIGHT)) return false;\r\n\r\n        $select.close();\r\n\r\n        function getNewActiveMatchIndex(){\r\n          switch(key){\r\n            case KEY.LEFT:\r\n              // Select previous/first item\r\n              if(~$selectMultiple.activeMatchIndex) return prev;\r\n              // Select last item\r\n              else return last;\r\n              break;\r\n            case KEY.RIGHT:\r\n              // Open drop-down\r\n              if(!~$selectMultiple.activeMatchIndex || curr === last){\r\n                $select.activate();\r\n                return false;\r\n              }\r\n              // Select next/last item\r\n              else return next;\r\n              break;\r\n            case KEY.BACKSPACE:\r\n              // Remove selected item and select previous/first\r\n              if(~$selectMultiple.activeMatchIndex){\r\n                $selectMultiple.removeChoice(curr);\r\n                return prev;\r\n              }\r\n              // Select last item\r\n              else return last;\r\n              break;\r\n            case KEY.DELETE:\r\n              // Remove selected item and select next item\r\n              if(~$selectMultiple.activeMatchIndex){\r\n                $selectMultiple.removeChoice($selectMultiple.activeMatchIndex);\r\n                return curr;\r\n              }\r\n              else return false;\r\n          }\r\n        }\r\n\r\n        newIndex = getNewActiveMatchIndex();\r\n\r\n        if(!$select.selected.length || newIndex === false) $selectMultiple.activeMatchIndex = -1;\r\n        else $selectMultiple.activeMatchIndex = Math.min(last,Math.max(first,newIndex));\r\n\r\n        return true;\r\n      }\r\n\r\n      $select.searchInput.on('keyup', function(e) {\r\n\r\n        if ( ! KEY.isVerticalMovement(e.which) ) {\r\n          scope.$evalAsync( function () {\r\n            $select.activeIndex = $select.taggingLabel === false ? -1 : 0;\r\n          });\r\n        }\r\n        // Push a \"create new\" item into array if there is a search string\r\n        if ( $select.tagging.isActivated && $select.search.length > 0 ) {\r\n\r\n          // return early with these keys\r\n          if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC || KEY.isVerticalMovement(e.which) ) {\r\n            return;\r\n          }\r\n          // always reset the activeIndex to the first item when tagging\r\n          $select.activeIndex = $select.taggingLabel === false ? -1 : 0;\r\n          // taggingLabel === false bypasses all of this\r\n          if ($select.taggingLabel === false) return;\r\n\r\n          var items = angular.copy( $select.items );\r\n          var stashArr = angular.copy( $select.items );\r\n          var newItem;\r\n          var item;\r\n          var hasTag = false;\r\n          var dupeIndex = -1;\r\n          var tagItems;\r\n          var tagItem;\r\n\r\n          // case for object tagging via transform `$select.tagging.fct` function\r\n          if ( $select.tagging.fct !== undefined) {\r\n            tagItems = $select.$filter('filter')(items,{'isTag': true});\r\n            if ( tagItems.length > 0 ) {\r\n              tagItem = tagItems[0];\r\n            }\r\n            // remove the first element, if it has the `isTag` prop we generate a new one with each keyup, shaving the previous\r\n            if ( items.length > 0 && tagItem ) {\r\n              hasTag = true;\r\n              items = items.slice(1,items.length);\r\n              stashArr = stashArr.slice(1,stashArr.length);\r\n            }\r\n            newItem = $select.tagging.fct($select.search);\r\n            newItem.isTag = true;\r\n            // verify the the tag doesn't match the value of an existing item\r\n            if ( stashArr.filter( function (origItem) { return angular.equals( origItem, $select.tagging.fct($select.search) ); } ).length > 0 ) {\r\n              return;\r\n            }\r\n            newItem.isTag = true;\r\n          // handle newItem string and stripping dupes in tagging string context\r\n          } else {\r\n            // find any tagging items already in the $select.items array and store them\r\n            tagItems = $select.$filter('filter')(items,function (item) {\r\n              return item.match($select.taggingLabel);\r\n            });\r\n            if ( tagItems.length > 0 ) {\r\n              tagItem = tagItems[0];\r\n            }\r\n            item = items[0];\r\n            // remove existing tag item if found (should only ever be one tag item)\r\n            if ( item !== undefined && items.length > 0 && tagItem ) {\r\n              hasTag = true;\r\n              items = items.slice(1,items.length);\r\n              stashArr = stashArr.slice(1,stashArr.length);\r\n            }\r\n            newItem = $select.search+' '+$select.taggingLabel;\r\n            if ( _findApproxDupe($select.selected, $select.search) > -1 ) {\r\n              return;\r\n            }\r\n            // verify the the tag doesn't match the value of an existing item from\r\n            // the searched data set or the items already selected\r\n            if ( _findCaseInsensitiveDupe(stashArr.concat($select.selected)) ) {\r\n              // if there is a tag from prev iteration, strip it / queue the change\r\n              // and return early\r\n              if ( hasTag ) {\r\n                items = stashArr;\r\n                scope.$evalAsync( function () {\r\n                  $select.activeIndex = 0;\r\n                  $select.items = items;\r\n                });\r\n              }\r\n              return;\r\n            }\r\n            if ( _findCaseInsensitiveDupe(stashArr) ) {\r\n              // if there is a tag from prev iteration, strip it\r\n              if ( hasTag ) {\r\n                $select.items = stashArr.slice(1,stashArr.length);\r\n              }\r\n              return;\r\n            }\r\n          }\r\n          if ( hasTag ) dupeIndex = _findApproxDupe($select.selected, newItem);\r\n          // dupe found, shave the first item\r\n          if ( dupeIndex > -1 ) {\r\n            items = items.slice(dupeIndex+1,items.length-1);\r\n          } else {\r\n            items = [];\r\n            items.push(newItem);\r\n            items = items.concat(stashArr);\r\n          }\r\n          scope.$evalAsync( function () {\r\n            $select.activeIndex = 0;\r\n            $select.items = items;\r\n          });\r\n        }\r\n      });\r\n      function _findCaseInsensitiveDupe(arr) {\r\n        if ( arr === undefined || $select.search === undefined ) {\r\n          return false;\r\n        }\r\n        var hasDupe = arr.filter( function (origItem) {\r\n          if ( $select.search.toUpperCase() === undefined || origItem === undefined ) {\r\n            return false;\r\n          }\r\n          return origItem.toUpperCase() === $select.search.toUpperCase();\r\n        }).length > 0;\r\n\r\n        return hasDupe;\r\n      }\r\n      function _findApproxDupe(haystack, needle) {\r\n        var dupeIndex = -1;\r\n        if(angular.isArray(haystack)) {\r\n          var tempArr = angular.copy(haystack);\r\n          for (var i = 0; i <tempArr.length; i++) {\r\n            // handle the simple string version of tagging\r\n            if ( $select.tagging.fct === undefined ) {\r\n              // search the array for the match\r\n              if ( tempArr[i]+' '+$select.taggingLabel === needle ) {\r\n              dupeIndex = i;\r\n              }\r\n            // handle the object tagging implementation\r\n            } else {\r\n              var mockObj = tempArr[i];\r\n              mockObj.isTag = true;\r\n              if ( angular.equals(mockObj, needle) ) {\r\n              dupeIndex = i;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return dupeIndex;\r\n      }\r\n\r\n      $select.searchInput.on('blur', function() {\r\n        $timeout(function() {\r\n          $selectMultiple.activeMatchIndex = -1;\r\n        });\r\n      });\r\n\r\n    }\r\n  };\r\n}]);\r\n\r\nuis.directive('uiSelectSingle', ['$timeout','$compile', function($timeout, $compile) {\r\n  return {\r\n    restrict: 'EA',\r\n    require: ['^uiSelect', '^ngModel'],\r\n    link: function(scope, element, attrs, ctrls) {\r\n\r\n      var $select = ctrls[0];\r\n      var ngModel = ctrls[1];\r\n\r\n      //From view --> model\r\n      ngModel.$parsers.unshift(function (inputValue) {\r\n        var locals = {},\r\n            result;\r\n        locals[$select.parserResult.itemName] = inputValue;\r\n        result = $select.parserResult.modelMapper(scope, locals);\r\n        return result;\r\n      });\r\n\r\n      //From model --> view\r\n      ngModel.$formatters.unshift(function (inputValue) {\r\n        var data = $select.parserResult.source (scope, { $select : {search:''}}), //Overwrite $search\r\n            locals = {},\r\n            result;\r\n        if (data){\r\n          var checkFnSingle = function(d){\r\n            locals[$select.parserResult.itemName] = d;\r\n            result = $select.parserResult.modelMapper(scope, locals);\r\n            return result == inputValue;\r\n          };\r\n          //If possible pass same object stored in $select.selected\r\n          if ($select.selected && checkFnSingle($select.selected)) {\r\n            return $select.selected;\r\n          }\r\n          for (var i = data.length - 1; i >= 0; i--) {\r\n            if (checkFnSingle(data[i])) return data[i];\r\n          }\r\n        }\r\n        return inputValue;\r\n      });\r\n\r\n      //Update viewValue if model change\r\n      scope.$watch('$select.selected', function(newValue) {\r\n        if (ngModel.$viewValue !== newValue) {\r\n          ngModel.$setViewValue(newValue);\r\n        }\r\n      });\r\n\r\n      ngModel.$render = function() {\r\n        $select.selected = ngModel.$viewValue;\r\n      };\r\n\r\n      scope.$on('uis:select', function (event, item) {\r\n        $select.selected = item;\r\n      });\r\n\r\n      scope.$on('uis:close', function (event, skipFocusser) {\r\n        $timeout(function(){\r\n          $select.focusser.prop('disabled', false);\r\n          if (!skipFocusser) $select.focusser[0].focus();\r\n        },0,false);\r\n      });\r\n\r\n      scope.$on('uis:activate', function () {\r\n        focusser.prop('disabled', true); //Will reactivate it on .close()\r\n      });\r\n\r\n      //Idea from: https://github.com/ivaynberg/select2/blob/79b5bf6db918d7560bdd959109b7bcfb47edaf43/select2.js#L1954\r\n      var focusser = angular.element(\"<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />\");\r\n      $compile(focusser)(scope);\r\n      $select.focusser = focusser;\r\n\r\n      //Input that will handle focus\r\n      $select.focusInput = focusser;\r\n\r\n      element.parent().append(focusser);\r\n      focusser.bind(\"focus\", function(){\r\n        scope.$evalAsync(function(){\r\n          $select.focus = true;\r\n        });\r\n      });\r\n      focusser.bind(\"blur\", function(){\r\n        scope.$evalAsync(function(){\r\n          $select.focus = false;\r\n        });\r\n      });\r\n      focusser.bind(\"keydown\", function(e){\r\n\r\n        if (e.which === KEY.BACKSPACE) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          $select.select(undefined);\r\n          scope.$apply();\r\n          return;\r\n        }\r\n\r\n        if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC) {\r\n          return;\r\n        }\r\n\r\n        if (e.which == KEY.DOWN  || e.which == KEY.UP || e.which == KEY.ENTER || e.which == KEY.SPACE){\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          $select.activate();\r\n        }\r\n\r\n        scope.$digest();\r\n      });\r\n\r\n      focusser.bind(\"keyup input\", function(e){\r\n\r\n        if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC || e.which == KEY.ENTER || e.which === KEY.BACKSPACE) {\r\n          return;\r\n        }\r\n\r\n        $select.activate(focusser.val()); //User pressed some regular key, so we pass it to the search input\r\n        focusser.val('');\r\n        scope.$digest();\r\n\r\n      });\r\n\r\n\r\n    }\r\n  };\r\n}]);\r\n// Make multiple matches sortable\r\nuis.directive('uiSelectSort', ['$timeout', 'uiSelectConfig', 'uiSelectMinErr', function($timeout, uiSelectConfig, uiSelectMinErr) {\r\n  return {\r\n    require: '^uiSelect',\r\n    link: function(scope, element, attrs, $select) {\r\n      if (scope[attrs.uiSelectSort] === null) {\r\n        throw uiSelectMinErr('sort', \"Expected a list to sort\");\r\n      }\r\n\r\n      var options = angular.extend({\r\n          axis: 'horizontal'\r\n        },\r\n        scope.$eval(attrs.uiSelectSortOptions));\r\n\r\n      var axis = options.axis,\r\n        draggingClassName = 'dragging',\r\n        droppingClassName = 'dropping',\r\n        droppingBeforeClassName = 'dropping-before',\r\n        droppingAfterClassName = 'dropping-after';\r\n\r\n      scope.$watch(function(){\r\n        return $select.sortable;\r\n      }, function(n){\r\n        if (n) {\r\n          element.attr('draggable', true);\r\n        } else {\r\n          element.removeAttr('draggable');\r\n        }\r\n      });\r\n\r\n      element.on('dragstart', function(e) {\r\n        element.addClass(draggingClassName);\r\n\r\n        (e.dataTransfer || e.originalEvent.dataTransfer).setData('text/plain', scope.$index);\r\n      });\r\n\r\n      element.on('dragend', function() {\r\n        element.removeClass(draggingClassName);\r\n      });\r\n\r\n      var move = function(from, to) {\r\n        /*jshint validthis: true */\r\n        this.splice(to, 0, this.splice(from, 1)[0]);\r\n      };\r\n\r\n      var dragOverHandler = function(e) {\r\n        e.preventDefault();\r\n\r\n        var offset = axis === 'vertical' ? e.offsetY || e.layerY || (e.originalEvent ? e.originalEvent.offsetY : 0) : e.offsetX || e.layerX || (e.originalEvent ? e.originalEvent.offsetX : 0);\r\n\r\n        if (offset < (this[axis === 'vertical' ? 'offsetHeight' : 'offsetWidth'] / 2)) {\r\n          element.removeClass(droppingAfterClassName);\r\n          element.addClass(droppingBeforeClassName);\r\n\r\n        } else {\r\n          element.removeClass(droppingBeforeClassName);\r\n          element.addClass(droppingAfterClassName);\r\n        }\r\n      };\r\n\r\n      var dropTimeout;\r\n\r\n      var dropHandler = function(e) {\r\n        e.preventDefault();\r\n\r\n        var droppedItemIndex = parseInt((e.dataTransfer || e.originalEvent.dataTransfer).getData('text/plain'), 10);\r\n\r\n        // prevent event firing multiple times in firefox\r\n        $timeout.cancel(dropTimeout);\r\n        dropTimeout = $timeout(function() {\r\n          _dropHandler(droppedItemIndex);\r\n        }, 20);\r\n      };\r\n\r\n      var _dropHandler = function(droppedItemIndex) {\r\n        var theList = scope.$eval(attrs.uiSelectSort),\r\n          itemToMove = theList[droppedItemIndex],\r\n          newIndex = null;\r\n\r\n        if (element.hasClass(droppingBeforeClassName)) {\r\n          if (droppedItemIndex < scope.$index) {\r\n            newIndex = scope.$index - 1;\r\n          } else {\r\n            newIndex = scope.$index;\r\n          }\r\n        } else {\r\n          if (droppedItemIndex < scope.$index) {\r\n            newIndex = scope.$index;\r\n          } else {\r\n            newIndex = scope.$index + 1;\r\n          }\r\n        }\r\n\r\n        move.apply(theList, [droppedItemIndex, newIndex]);\r\n\r\n        scope.$apply(function() {\r\n          scope.$emit('uiSelectSort:change', {\r\n            array: theList,\r\n            item: itemToMove,\r\n            from: droppedItemIndex,\r\n            to: newIndex\r\n          });\r\n        });\r\n\r\n        element.removeClass(droppingClassName);\r\n        element.removeClass(droppingBeforeClassName);\r\n        element.removeClass(droppingAfterClassName);\r\n\r\n        element.off('drop', dropHandler);\r\n      };\r\n\r\n      element.on('dragenter', function() {\r\n        if (element.hasClass(draggingClassName)) {\r\n          return;\r\n        }\r\n\r\n        element.addClass(droppingClassName);\r\n\r\n        element.on('dragover', dragOverHandler);\r\n        element.on('drop', dropHandler);\r\n      });\r\n\r\n      element.on('dragleave', function(e) {\r\n        if (e.target != element) {\r\n          return;\r\n        }\r\n        element.removeClass(droppingClassName);\r\n        element.removeClass(droppingBeforeClassName);\r\n        element.removeClass(droppingAfterClassName);\r\n\r\n        element.off('dragover', dragOverHandler);\r\n        element.off('drop', dropHandler);\r\n      });\r\n    }\r\n  };\r\n}]);\r\n\r\n/**\r\n * Parses \"repeat\" attribute.\r\n *\r\n * Taken from AngularJS ngRepeat source code\r\n * See https://github.com/angular/angular.js/blob/v1.2.15/src/ng/directive/ngRepeat.js#L211\r\n *\r\n * Original discussion about parsing \"repeat\" attribute instead of fully relying on ng-repeat:\r\n * https://github.com/angular-ui/ui-select/commit/5dd63ad#commitcomment-5504697\r\n */\r\n\r\nuis.service('uisRepeatParser', ['uiSelectMinErr','$parse', function(uiSelectMinErr, $parse) {\r\n  var self = this;\r\n\r\n  /**\r\n   * Example:\r\n   * expression = \"address in addresses | filter: {street: $select.search} track by $index\"\r\n   * itemName = \"address\",\r\n   * source = \"addresses | filter: {street: $select.search}\",\r\n   * trackByExp = \"$index\",\r\n   */\r\n  self.parse = function(expression) {\r\n\r\n\r\n    var match;\r\n    var isObjectCollection = /\\(\\s*([\\$\\w][\\$\\w]*)\\s*,\\s*([\\$\\w][\\$\\w]*)\\s*\\)/.test(expression);\r\n    // If an array is used as collection\r\n\r\n    // if (isObjectCollection){\r\n      //00000000000000000000000000000111111111000000000000000222222222222220033333333333333333333330000444444444444444444000000000000000556666660000077777777777755000000000000000000000088888880000000\r\n    match = expression.match(/^\\s*(?:([\\s\\S]+?)\\s+as\\s+)?(?:([\\$\\w][\\$\\w]*)|(?:\\(\\s*([\\$\\w][\\$\\w]*)\\s*,\\s*([\\$\\w][\\$\\w]*)\\s*\\)))\\s+in\\s+(([\\w\\.]+)?\\s*(|\\s*[\\s\\S]+?))?(?:\\s+track\\s+by\\s+([\\s\\S]+?))?\\s*$/);      \r\n\r\n    // 1 Alias\r\n    // 2 Item\r\n    // 3 Key on (key,value)\r\n    // 4 Value on (key,value)\r\n    // 5 Collection expresion (only used when using an array collection)\r\n    // 6 Object that will be converted to Array when using (key,value) syntax\r\n    // 7 Filters that will be applied to #6 when using (key,value) syntax\r\n    // 8 Track by\r\n\r\n    if (!match) {\r\n      throw uiSelectMinErr('iexp', \"Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.\",\r\n              expression);\r\n    }\r\n    if (!match[6] && isObjectCollection) {\r\n      throw uiSelectMinErr('iexp', \"Expected expression in form of '_item_ as (_key_, _item_) in _ObjCollection_ [ track by _id_]' but got '{0}'.\",\r\n              expression);\r\n    }\r\n\r\n    return {\r\n      itemName: match[4] || match[2], // (lhs) Left-hand side,\r\n      keyName: match[3], //for (key, value) syntax\r\n      source: $parse(!match[3] ? match[5] : match[6]),\r\n      sourceName: match[6],\r\n      filters: match[7],\r\n      trackByExp: match[8],\r\n      modelMapper: $parse(match[1] || match[4] || match[2]),\r\n      repeatExpression: function (grouped) {\r\n        var expression = this.itemName + ' in ' + (grouped ? '$group.items' : '$select.items');\r\n        if (this.trackByExp) {\r\n          expression += ' track by ' + this.trackByExp;\r\n        }\r\n        return expression;\r\n      } \r\n    };\r\n\r\n  };\r\n\r\n  self.getGroupNgRepeatExpression = function() {\r\n    return '$group in $select.groups';\r\n  };\r\n\r\n}]);\r\n\r\n}());\r\nangular.module(\"ui.select\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"bootstrap/choices.tpl.html\",\"<ul class=\\\"ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu\\\" role=\\\"listbox\\\" ng-show=\\\"$select.items.length > 0\\\"><li class=\\\"ui-select-choices-group\\\" id=\\\"ui-select-choices-{{ $select.generatedId }}\\\"><div class=\\\"divider\\\" ng-show=\\\"$select.isGrouped && $index > 0\\\"></div><div ng-show=\\\"$select.isGrouped\\\" class=\\\"ui-select-choices-group-label dropdown-header\\\" ng-bind=\\\"$group.name\\\"></div><div id=\\\"ui-select-choices-row-{{ $select.generatedId }}-{{$index}}\\\" class=\\\"ui-select-choices-row\\\" ng-class=\\\"{active: $select.isActive(this), disabled: $select.isDisabled(this)}\\\" role=\\\"option\\\"><a href=\\\"javascript:void(0)\\\" class=\\\"ui-select-choices-row-inner\\\"></a></div></li></ul>\");\r\n$templateCache.put(\"bootstrap/match-multiple.tpl.html\",\"<span class=\\\"ui-select-match\\\"><span ng-repeat=\\\"$item in $select.selected\\\"><span class=\\\"ui-select-match-item btn btn-default btn-xs\\\" tabindex=\\\"-1\\\" type=\\\"button\\\" ng-disabled=\\\"$select.disabled\\\" ng-click=\\\"$selectMultiple.activeMatchIndex = $index;\\\" ng-class=\\\"{\\'btn-primary\\':$selectMultiple.activeMatchIndex === $index, \\'select-locked\\':$select.isLocked(this, $index)}\\\" ui-select-sort=\\\"$select.selected\\\"><span class=\\\"close ui-select-match-close\\\" ng-hide=\\\"$select.disabled\\\" ng-click=\\\"$selectMultiple.removeChoice($index)\\\">&nbsp;&times;</span> <span uis-transclude-append=\\\"\\\"></span></span></span></span>\");\r\n$templateCache.put(\"bootstrap/match.tpl.html\",\"<div class=\\\"ui-select-match\\\" ng-hide=\\\"$select.open\\\" ng-disabled=\\\"$select.disabled\\\" ng-class=\\\"{\\'btn-default-focus\\':$select.focus}\\\"><span tabindex=\\\"-1\\\" class=\\\"btn btn-default form-control ui-select-toggle\\\" aria-label=\\\"{{ $select.baseTitle }} activate\\\" ng-disabled=\\\"$select.disabled\\\" ng-click=\\\"$select.activate()\\\" style=\\\"outline: 0;\\\"><span ng-show=\\\"$select.isEmpty()\\\" class=\\\"ui-select-placeholder text-muted\\\">{{$select.placeholder}}</span> <span ng-hide=\\\"$select.isEmpty()\\\" class=\\\"ui-select-match-text pull-left\\\" ng-class=\\\"{\\'ui-select-allow-clear\\': $select.allowClear && !$select.isEmpty()}\\\" ng-transclude=\\\"\\\"></span> <i class=\\\"caret pull-right\\\" ng-click=\\\"$select.toggle($event)\\\"></i> <a ng-show=\\\"$select.allowClear && !$select.isEmpty()\\\" aria-label=\\\"{{ $select.baseTitle }} clear\\\" style=\\\"margin-right: 10px\\\" ng-click=\\\"$select.clear($event)\\\" class=\\\"btn btn-xs btn-link pull-right\\\"><i class=\\\"glyphicon glyphicon-remove\\\" aria-hidden=\\\"true\\\"></i></a></span></div>\");\r\n$templateCache.put(\"bootstrap/select-multiple.tpl.html\",\"<div class=\\\"ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control\\\" ng-class=\\\"{open: $select.open}\\\"><div><div class=\\\"ui-select-match\\\"></div><input type=\\\"text\\\" autocomplete=\\\"false\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\" class=\\\"ui-select-search input-xs\\\" placeholder=\\\"{{$selectMultiple.getPlaceholder()}}\\\" ng-disabled=\\\"$select.disabled\\\" ng-hide=\\\"$select.disabled\\\" ng-click=\\\"$select.activate()\\\" ng-model=\\\"$select.search\\\" role=\\\"combobox\\\" aria-label=\\\"{{ $select.baseTitle }}\\\" ondrop=\\\"return false;\\\"></div><div class=\\\"ui-select-choices\\\"></div></div>\");\r\n$templateCache.put(\"bootstrap/select.tpl.html\",\"<div class=\\\"ui-select-container ui-select-bootstrap dropdown\\\" ng-class=\\\"{open: $select.open}\\\"><div class=\\\"ui-select-match\\\"></div><input type=\\\"text\\\" autocomplete=\\\"false\\\" tabindex=\\\"-1\\\" aria-expanded=\\\"true\\\" aria-label=\\\"{{ $select.baseTitle }}\\\" aria-owns=\\\"ui-select-choices-{{ $select.generatedId }}\\\" aria-activedescendant=\\\"ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}\\\" class=\\\"form-control ui-select-search\\\" placeholder=\\\"{{$select.placeholder}}\\\" ng-model=\\\"$select.search\\\" ng-show=\\\"$select.searchEnabled && $select.open\\\"><div class=\\\"ui-select-choices\\\"></div></div>\");\r\n$templateCache.put(\"selectize/choices.tpl.html\",\"<div ng-show=\\\"$select.open\\\" class=\\\"ui-select-choices ui-select-dropdown selectize-dropdown single\\\"><div class=\\\"ui-select-choices-content selectize-dropdown-content\\\"><div class=\\\"ui-select-choices-group optgroup\\\" role=\\\"listbox\\\"><div ng-show=\\\"$select.isGrouped\\\" class=\\\"ui-select-choices-group-label optgroup-header\\\" ng-bind=\\\"$group.name\\\"></div><div role=\\\"option\\\" class=\\\"ui-select-choices-row\\\" ng-class=\\\"{active: $select.isActive(this), disabled: $select.isDisabled(this)}\\\"><div class=\\\"option ui-select-choices-row-inner\\\" data-selectable=\\\"\\\"></div></div></div></div></div>\");\r\n$templateCache.put(\"selectize/match.tpl.html\",\"<div ng-hide=\\\"($select.open || $select.isEmpty())\\\" class=\\\"ui-select-match\\\" ng-transclude=\\\"\\\"></div>\");\r\n$templateCache.put(\"selectize/select.tpl.html\",\"<div class=\\\"ui-select-container selectize-control single\\\" ng-class=\\\"{\\'open\\': $select.open}\\\"><div class=\\\"selectize-input\\\" ng-class=\\\"{\\'focus\\': $select.open, \\'disabled\\': $select.disabled, \\'selectize-focus\\' : $select.focus}\\\" ng-click=\\\"$select.activate()\\\"><div class=\\\"ui-select-match\\\"></div><input type=\\\"text\\\" autocomplete=\\\"false\\\" tabindex=\\\"-1\\\" class=\\\"ui-select-search ui-select-toggle\\\" ng-click=\\\"$select.toggle($event)\\\" placeholder=\\\"{{$select.placeholder}}\\\" ng-model=\\\"$select.search\\\" ng-hide=\\\"!$select.searchEnabled || ($select.selected && !$select.open)\\\" ng-disabled=\\\"$select.disabled\\\" aria-label=\\\"{{ $select.baseTitle }}\\\"></div><div class=\\\"ui-select-choices\\\"></div></div>\");\r\n$templateCache.put(\"select2/choices.tpl.html\",\"<ul class=\\\"ui-select-choices ui-select-choices-content select2-results\\\"><li class=\\\"ui-select-choices-group\\\" ng-class=\\\"{\\'select2-result-with-children\\': $select.choiceGrouped($group) }\\\"><div ng-show=\\\"$select.choiceGrouped($group)\\\" class=\\\"ui-select-choices-group-label select2-result-label\\\" ng-bind=\\\"$group.name\\\"></div><ul role=\\\"listbox\\\" id=\\\"ui-select-choices-{{ $select.generatedId }}\\\" ng-class=\\\"{\\'select2-result-sub\\': $select.choiceGrouped($group), \\'select2-result-single\\': !$select.choiceGrouped($group) }\\\"><li role=\\\"option\\\" id=\\\"ui-select-choices-row-{{ $select.generatedId }}-{{$index}}\\\" class=\\\"ui-select-choices-row\\\" ng-class=\\\"{\\'select2-highlighted\\': $select.isActive(this), \\'select2-disabled\\': $select.isDisabled(this)}\\\"><div class=\\\"select2-result-label ui-select-choices-row-inner\\\"></div></li></ul></li></ul>\");\r\n$templateCache.put(\"select2/match-multiple.tpl.html\",\"<span class=\\\"ui-select-match\\\"><li class=\\\"ui-select-match-item select2-search-choice\\\" ng-repeat=\\\"$item in $select.selected\\\" ng-class=\\\"{\\'select2-search-choice-focus\\':$selectMultiple.activeMatchIndex === $index, \\'select2-locked\\':$select.isLocked(this, $index)}\\\" ui-select-sort=\\\"$select.selected\\\"><span uis-transclude-append=\\\"\\\"></span> <a href=\\\"javascript:;\\\" class=\\\"ui-select-match-close select2-search-choice-close\\\" ng-click=\\\"$selectMultiple.removeChoice($index)\\\" tabindex=\\\"-1\\\"></a></li></span>\");\r\n$templateCache.put(\"select2/match.tpl.html\",\"<a class=\\\"select2-choice ui-select-match\\\" ng-class=\\\"{\\'select2-default\\': $select.isEmpty()}\\\" ng-click=\\\"$select.toggle($event)\\\" aria-label=\\\"{{ $select.baseTitle }} select\\\"><span ng-show=\\\"$select.isEmpty()\\\" class=\\\"select2-chosen\\\">{{$select.placeholder}}</span> <span ng-hide=\\\"$select.isEmpty()\\\" class=\\\"select2-chosen\\\" ng-transclude=\\\"\\\"></span> <abbr ng-if=\\\"$select.allowClear && !$select.isEmpty()\\\" class=\\\"select2-search-choice-close\\\" ng-click=\\\"$select.clear($event)\\\"></abbr> <span class=\\\"select2-arrow ui-select-toggle\\\"><b></b></span></a>\");\r\n$templateCache.put(\"select2/select-multiple.tpl.html\",\"<div class=\\\"ui-select-container ui-select-multiple select2 select2-container select2-container-multi\\\" ng-class=\\\"{\\'select2-container-active select2-dropdown-open open\\': $select.open, \\'select2-container-disabled\\': $select.disabled}\\\"><ul class=\\\"select2-choices\\\"><span class=\\\"ui-select-match\\\"></span><li class=\\\"select2-search-field\\\"><input type=\\\"text\\\" autocomplete=\\\"false\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\" role=\\\"combobox\\\" aria-expanded=\\\"true\\\" aria-owns=\\\"ui-select-choices-{{ $select.generatedId }}\\\" aria-label=\\\"{{ $select.baseTitle }}\\\" aria-activedescendant=\\\"ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}\\\" class=\\\"select2-input ui-select-search\\\" placeholder=\\\"{{$selectMultiple.getPlaceholder()}}\\\" ng-disabled=\\\"$select.disabled\\\" ng-hide=\\\"$select.disabled\\\" ng-model=\\\"$select.search\\\" ng-click=\\\"$select.activate()\\\" style=\\\"width: 34px;\\\" ondrop=\\\"return false;\\\"></li></ul><div class=\\\"ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active\\\" ng-class=\\\"{\\'select2-display-none\\': !$select.open}\\\"><div class=\\\"ui-select-choices\\\"></div></div></div>\");\r\n$templateCache.put(\"select2/select.tpl.html\",\"<div class=\\\"ui-select-container select2 select2-container\\\" ng-class=\\\"{\\'select2-container-active select2-dropdown-open open\\': $select.open, \\'select2-container-disabled\\': $select.disabled, \\'select2-container-active\\': $select.focus, \\'select2-allowclear\\': $select.allowClear && !$select.isEmpty()}\\\"><div class=\\\"ui-select-match\\\"></div><div class=\\\"ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active\\\" ng-class=\\\"{\\'select2-display-none\\': !$select.open}\\\"><div class=\\\"select2-search\\\" ng-show=\\\"$select.searchEnabled\\\"><input type=\\\"text\\\" autocomplete=\\\"false\\\" autocorrect=\\\"false\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\" role=\\\"combobox\\\" aria-expanded=\\\"true\\\" aria-owns=\\\"ui-select-choices-{{ $select.generatedId }}\\\" aria-label=\\\"{{ $select.baseTitle }}\\\" aria-activedescendant=\\\"ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}\\\" class=\\\"ui-select-search select2-input\\\" ng-model=\\\"$select.search\\\"></div><div class=\\\"ui-select-choices\\\"></div></div></div>\");}]);\n//# sourceMappingURL=ui-select.js.map\n","/**\r\n * @license AngularJS v1.5.8\r\n * (c) 2010-2016 Google, Inc. http://angularjs.org\r\n * License: MIT\r\n */\r\n(function(window, angular) {'use strict';\r\n\r\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n *     Any commits to this file should be reviewed with security in mind.  *\r\n *   Changes to this file can potentially create security vulnerabilities. *\r\n *          An approval from 2 Core members with history of modifying      *\r\n *                         this file is required.                          *\r\n *                                                                         *\r\n *  Does the change somehow allow for arbitrary javascript to be executed? *\r\n *    Or allows for someone to change the prototype of built-in objects?   *\r\n *     Or gives undesired access to variables likes document or window?    *\r\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n\r\nvar $sanitizeMinErr = angular.$$minErr('$sanitize');\r\nvar bind;\r\nvar extend;\r\nvar forEach;\r\nvar isDefined;\r\nvar lowercase;\r\nvar noop;\r\nvar htmlParser;\r\nvar htmlSanitizeWriter;\r\n\r\n/**\r\n * @ngdoc module\r\n * @name ngSanitize\r\n * @description\r\n *\r\n * # ngSanitize\r\n *\r\n * The `ngSanitize` module provides functionality to sanitize HTML.\r\n *\r\n *\r\n * <div doc-module-components=\"ngSanitize\"></div>\r\n *\r\n * See {@link ngSanitize.$sanitize `$sanitize`} for usage.\r\n */\r\n\r\n/**\r\n * @ngdoc service\r\n * @name $sanitize\r\n * @kind function\r\n *\r\n * @description\r\n *   Sanitizes an html string by stripping all potentially dangerous tokens.\r\n *\r\n *   The input is sanitized by parsing the HTML into tokens. All safe tokens (from a whitelist) are\r\n *   then serialized back to properly escaped html string. This means that no unsafe input can make\r\n *   it into the returned string.\r\n *\r\n *   The whitelist for URL sanitization of attribute values is configured using the functions\r\n *   `aHrefSanitizationWhitelist` and `imgSrcSanitizationWhitelist` of {@link ng.$compileProvider\r\n *   `$compileProvider`}.\r\n *\r\n *   The input may also contain SVG markup if this is enabled via {@link $sanitizeProvider}.\r\n *\r\n * @param {string} html HTML input.\r\n * @returns {string} Sanitized HTML.\r\n *\r\n * @example\r\n   <example module=\"sanitizeExample\" deps=\"angular-sanitize.js\">\r\n   <file name=\"index.html\">\r\n     <script>\r\n         angular.module('sanitizeExample', ['ngSanitize'])\r\n           .controller('ExampleController', ['$scope', '$sce', function($scope, $sce) {\r\n             $scope.snippet =\r\n               '<p style=\"color:blue\">an html\\n' +\r\n               '<em onmouseover=\"this.textContent=\\'PWN3D!\\'\">click here</em>\\n' +\r\n               'snippet</p>';\r\n             $scope.deliberatelyTrustDangerousSnippet = function() {\r\n               return $sce.trustAsHtml($scope.snippet);\r\n             };\r\n           }]);\r\n     </script>\r\n     <div ng-controller=\"ExampleController\">\r\n        Snippet: <textarea ng-model=\"snippet\" cols=\"60\" rows=\"3\"></textarea>\r\n       <table>\r\n         <tr>\r\n           <td>Directive</td>\r\n           <td>How</td>\r\n           <td>Source</td>\r\n           <td>Rendered</td>\r\n         </tr>\r\n         <tr id=\"bind-html-with-sanitize\">\r\n           <td>ng-bind-html</td>\r\n           <td>Automatically uses $sanitize</td>\r\n           <td><pre>&lt;div ng-bind-html=\"snippet\"&gt;<br/>&lt;/div&gt;</pre></td>\r\n           <td><div ng-bind-html=\"snippet\"></div></td>\r\n         </tr>\r\n         <tr id=\"bind-html-with-trust\">\r\n           <td>ng-bind-html</td>\r\n           <td>Bypass $sanitize by explicitly trusting the dangerous value</td>\r\n           <td>\r\n           <pre>&lt;div ng-bind-html=\"deliberatelyTrustDangerousSnippet()\"&gt;\r\n&lt;/div&gt;</pre>\r\n           </td>\r\n           <td><div ng-bind-html=\"deliberatelyTrustDangerousSnippet()\"></div></td>\r\n         </tr>\r\n         <tr id=\"bind-default\">\r\n           <td>ng-bind</td>\r\n           <td>Automatically escapes</td>\r\n           <td><pre>&lt;div ng-bind=\"snippet\"&gt;<br/>&lt;/div&gt;</pre></td>\r\n           <td><div ng-bind=\"snippet\"></div></td>\r\n         </tr>\r\n       </table>\r\n       </div>\r\n   </file>\r\n   <file name=\"protractor.js\" type=\"protractor\">\r\n     it('should sanitize the html snippet by default', function() {\r\n       expect(element(by.css('#bind-html-with-sanitize div')).getInnerHtml()).\r\n         toBe('<p>an html\\n<em>click here</em>\\nsnippet</p>');\r\n     });\r\n\r\n     it('should inline raw snippet if bound to a trusted value', function() {\r\n       expect(element(by.css('#bind-html-with-trust div')).getInnerHtml()).\r\n         toBe(\"<p style=\\\"color:blue\\\">an html\\n\" +\r\n              \"<em onmouseover=\\\"this.textContent='PWN3D!'\\\">click here</em>\\n\" +\r\n              \"snippet</p>\");\r\n     });\r\n\r\n     it('should escape snippet without any filter', function() {\r\n       expect(element(by.css('#bind-default div')).getInnerHtml()).\r\n         toBe(\"&lt;p style=\\\"color:blue\\\"&gt;an html\\n\" +\r\n              \"&lt;em onmouseover=\\\"this.textContent='PWN3D!'\\\"&gt;click here&lt;/em&gt;\\n\" +\r\n              \"snippet&lt;/p&gt;\");\r\n     });\r\n\r\n     it('should update', function() {\r\n       element(by.model('snippet')).clear();\r\n       element(by.model('snippet')).sendKeys('new <b onclick=\"alert(1)\">text</b>');\r\n       expect(element(by.css('#bind-html-with-sanitize div')).getInnerHtml()).\r\n         toBe('new <b>text</b>');\r\n       expect(element(by.css('#bind-html-with-trust div')).getInnerHtml()).toBe(\r\n         'new <b onclick=\"alert(1)\">text</b>');\r\n       expect(element(by.css('#bind-default div')).getInnerHtml()).toBe(\r\n         \"new &lt;b onclick=\\\"alert(1)\\\"&gt;text&lt;/b&gt;\");\r\n     });\r\n   </file>\r\n   </example>\r\n */\r\n\r\n\r\n/**\r\n * @ngdoc provider\r\n * @name $sanitizeProvider\r\n *\r\n * @description\r\n * Creates and configures {@link $sanitize} instance.\r\n */\r\nfunction $SanitizeProvider() {\r\n  var svgEnabled = false;\r\n\r\n  this.$get = ['$$sanitizeUri', function($$sanitizeUri) {\r\n    if (svgEnabled) {\r\n      extend(validElements, svgElements);\r\n    }\r\n    return function(html) {\r\n      var buf = [];\r\n      htmlParser(html, htmlSanitizeWriter(buf, function(uri, isImage) {\r\n        return !/^unsafe:/.test($$sanitizeUri(uri, isImage));\r\n      }));\r\n      return buf.join('');\r\n    };\r\n  }];\r\n\r\n\r\n  /**\r\n   * @ngdoc method\r\n   * @name $sanitizeProvider#enableSvg\r\n   * @kind function\r\n   *\r\n   * @description\r\n   * Enables a subset of svg to be supported by the sanitizer.\r\n   *\r\n   * <div class=\"alert alert-warning\">\r\n   *   <p>By enabling this setting without taking other precautions, you might expose your\r\n   *   application to click-hijacking attacks. In these attacks, sanitized svg elements could be positioned\r\n   *   outside of the containing element and be rendered over other elements on the page (e.g. a login\r\n   *   link). Such behavior can then result in phishing incidents.</p>\r\n   *\r\n   *   <p>To protect against these, explicitly setup `overflow: hidden` css rule for all potential svg\r\n   *   tags within the sanitized content:</p>\r\n   *\r\n   *   <br>\r\n   *\r\n   *   <pre><code>\r\n   *   .rootOfTheIncludedContent svg {\r\n   *     overflow: hidden !important;\r\n   *   }\r\n   *   </code></pre>\r\n   * </div>\r\n   *\r\n   * @param {boolean=} flag Enable or disable SVG support in the sanitizer.\r\n   * @returns {boolean|ng.$sanitizeProvider} Returns the currently configured value if called\r\n   *    without an argument or self for chaining otherwise.\r\n   */\r\n  this.enableSvg = function(enableSvg) {\r\n    if (isDefined(enableSvg)) {\r\n      svgEnabled = enableSvg;\r\n      return this;\r\n    } else {\r\n      return svgEnabled;\r\n    }\r\n  };\r\n\r\n  //////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Private stuff\r\n  //////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  bind = angular.bind;\r\n  extend = angular.extend;\r\n  forEach = angular.forEach;\r\n  isDefined = angular.isDefined;\r\n  lowercase = angular.lowercase;\r\n  noop = angular.noop;\r\n\r\n  htmlParser = htmlParserImpl;\r\n  htmlSanitizeWriter = htmlSanitizeWriterImpl;\r\n\r\n  // Regular Expressions for parsing tags and attributes\r\n  var SURROGATE_PAIR_REGEXP = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\r\n    // Match everything outside of normal chars and \" (quote character)\r\n    NON_ALPHANUMERIC_REGEXP = /([^\\#-~ |!])/g;\r\n\r\n\r\n  // Good source of info about elements and attributes\r\n  // http://dev.w3.org/html5/spec/Overview.html#semantics\r\n  // http://simon.html5.org/html-elements\r\n\r\n  // Safe Void Elements - HTML5\r\n  // http://dev.w3.org/html5/spec/Overview.html#void-elements\r\n  var voidElements = toMap(\"area,br,col,hr,img,wbr\");\r\n\r\n  // Elements that you can, intentionally, leave open (and which close themselves)\r\n  // http://dev.w3.org/html5/spec/Overview.html#optional-tags\r\n  var optionalEndTagBlockElements = toMap(\"colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr\"),\r\n      optionalEndTagInlineElements = toMap(\"rp,rt\"),\r\n      optionalEndTagElements = extend({},\r\n                                              optionalEndTagInlineElements,\r\n                                              optionalEndTagBlockElements);\r\n\r\n  // Safe Block Elements - HTML5\r\n  var blockElements = extend({}, optionalEndTagBlockElements, toMap(\"address,article,\" +\r\n          \"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,\" +\r\n          \"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul\"));\r\n\r\n  // Inline Elements - HTML5\r\n  var inlineElements = extend({}, optionalEndTagInlineElements, toMap(\"a,abbr,acronym,b,\" +\r\n          \"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,\" +\r\n          \"samp,small,span,strike,strong,sub,sup,time,tt,u,var\"));\r\n\r\n  // SVG Elements\r\n  // https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Elements\r\n  // Note: the elements animate,animateColor,animateMotion,animateTransform,set are intentionally omitted.\r\n  // They can potentially allow for arbitrary javascript to be executed. See #11290\r\n  var svgElements = toMap(\"circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,\" +\r\n          \"hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,\" +\r\n          \"radialGradient,rect,stop,svg,switch,text,title,tspan\");\r\n\r\n  // Blocked Elements (will be stripped)\r\n  var blockedElements = toMap(\"script,style\");\r\n\r\n  var validElements = extend({},\r\n                                     voidElements,\r\n                                     blockElements,\r\n                                     inlineElements,\r\n                                     optionalEndTagElements);\r\n\r\n  //Attributes that have href and hence need to be sanitized\r\n  var uriAttrs = toMap(\"background,cite,href,longdesc,src,xlink:href\");\r\n\r\n  var htmlAttrs = toMap('abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,' +\r\n      'color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,' +\r\n      'ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,' +\r\n      'scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,' +\r\n      'valign,value,vspace,width');\r\n\r\n  // SVG attributes (without \"id\" and \"name\" attributes)\r\n  // https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Attributes\r\n  var svgAttrs = toMap('accent-height,accumulate,additive,alphabetic,arabic-form,ascent,' +\r\n      'baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,' +\r\n      'cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,' +\r\n      'font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,' +\r\n      'height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,' +\r\n      'marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,' +\r\n      'max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,' +\r\n      'path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,' +\r\n      'requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,' +\r\n      'stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,' +\r\n      'stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,' +\r\n      'stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,' +\r\n      'underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,' +\r\n      'width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,' +\r\n      'xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan', true);\r\n\r\n  var validAttrs = extend({},\r\n                                  uriAttrs,\r\n                                  svgAttrs,\r\n                                  htmlAttrs);\r\n\r\n  function toMap(str, lowercaseKeys) {\r\n    var obj = {}, items = str.split(','), i;\r\n    for (i = 0; i < items.length; i++) {\r\n      obj[lowercaseKeys ? lowercase(items[i]) : items[i]] = true;\r\n    }\r\n    return obj;\r\n  }\r\n\r\n  var inertBodyElement;\r\n  (function(window) {\r\n    var doc;\r\n    if (window.document && window.document.implementation) {\r\n      doc = window.document.implementation.createHTMLDocument(\"inert\");\r\n    } else {\r\n      throw $sanitizeMinErr('noinert', \"Can't create an inert html document\");\r\n    }\r\n    var docElement = doc.documentElement || doc.getDocumentElement();\r\n    var bodyElements = docElement.getElementsByTagName('body');\r\n\r\n    // usually there should be only one body element in the document, but IE doesn't have any, so we need to create one\r\n    if (bodyElements.length === 1) {\r\n      inertBodyElement = bodyElements[0];\r\n    } else {\r\n      var html = doc.createElement('html');\r\n      inertBodyElement = doc.createElement('body');\r\n      html.appendChild(inertBodyElement);\r\n      doc.appendChild(html);\r\n    }\r\n  })(window);\r\n\r\n  /**\r\n   * @example\r\n   * htmlParser(htmlString, {\r\n   *     start: function(tag, attrs) {},\r\n   *     end: function(tag) {},\r\n   *     chars: function(text) {},\r\n   *     comment: function(text) {}\r\n   * });\r\n   *\r\n   * @param {string} html string\r\n   * @param {object} handler\r\n   */\r\n  function htmlParserImpl(html, handler) {\r\n    if (html === null || html === undefined) {\r\n      html = '';\r\n    } else if (typeof html !== 'string') {\r\n      html = '' + html;\r\n    }\r\n    inertBodyElement.innerHTML = html;\r\n\r\n    //mXSS protection\r\n    var mXSSAttempts = 5;\r\n    do {\r\n      if (mXSSAttempts === 0) {\r\n        throw $sanitizeMinErr('uinput', \"Failed to sanitize html because the input is unstable\");\r\n      }\r\n      mXSSAttempts--;\r\n\r\n      // strip custom-namespaced attributes on IE<=11\r\n      if (window.document.documentMode) {\r\n        stripCustomNsAttrs(inertBodyElement);\r\n      }\r\n      html = inertBodyElement.innerHTML; //trigger mXSS\r\n      inertBodyElement.innerHTML = html;\r\n    } while (html !== inertBodyElement.innerHTML);\r\n\r\n    var node = inertBodyElement.firstChild;\r\n    while (node) {\r\n      switch (node.nodeType) {\r\n        case 1: // ELEMENT_NODE\r\n          handler.start(node.nodeName.toLowerCase(), attrToMap(node.attributes));\r\n          break;\r\n        case 3: // TEXT NODE\r\n          handler.chars(node.textContent);\r\n          break;\r\n      }\r\n\r\n      var nextNode;\r\n      if (!(nextNode = node.firstChild)) {\r\n      if (node.nodeType == 1) {\r\n          handler.end(node.nodeName.toLowerCase());\r\n        }\r\n        nextNode = node.nextSibling;\r\n        if (!nextNode) {\r\n          while (nextNode == null) {\r\n            node = node.parentNode;\r\n            if (node === inertBodyElement) break;\r\n            nextNode = node.nextSibling;\r\n          if (node.nodeType == 1) {\r\n              handler.end(node.nodeName.toLowerCase());\r\n            }\r\n          }\r\n        }\r\n      }\r\n      node = nextNode;\r\n    }\r\n\r\n    while (node = inertBodyElement.firstChild) {\r\n      inertBodyElement.removeChild(node);\r\n    }\r\n  }\r\n\r\n  function attrToMap(attrs) {\r\n    var map = {};\r\n    for (var i = 0, ii = attrs.length; i < ii; i++) {\r\n      var attr = attrs[i];\r\n      map[attr.name] = attr.value;\r\n    }\r\n    return map;\r\n  }\r\n\r\n\r\n  /**\r\n   * Escapes all potentially dangerous characters, so that the\r\n   * resulting string can be safely inserted into attribute or\r\n   * element text.\r\n   * @param value\r\n   * @returns {string} escaped text\r\n   */\r\n  function encodeEntities(value) {\r\n    return value.\r\n      replace(/&/g, '&amp;').\r\n      replace(SURROGATE_PAIR_REGEXP, function(value) {\r\n        var hi = value.charCodeAt(0);\r\n        var low = value.charCodeAt(1);\r\n        return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';\r\n      }).\r\n      replace(NON_ALPHANUMERIC_REGEXP, function(value) {\r\n        return '&#' + value.charCodeAt(0) + ';';\r\n      }).\r\n      replace(/</g, '&lt;').\r\n      replace(/>/g, '&gt;');\r\n  }\r\n\r\n  /**\r\n   * create an HTML/XML writer which writes to buffer\r\n   * @param {Array} buf use buf.join('') to get out sanitized html string\r\n   * @returns {object} in the form of {\r\n   *     start: function(tag, attrs) {},\r\n   *     end: function(tag) {},\r\n   *     chars: function(text) {},\r\n   *     comment: function(text) {}\r\n   * }\r\n   */\r\n  function htmlSanitizeWriterImpl(buf, uriValidator) {\r\n    var ignoreCurrentElement = false;\r\n    var out = bind(buf, buf.push);\r\n    return {\r\n      start: function(tag, attrs) {\r\n        tag = lowercase(tag);\r\n        if (!ignoreCurrentElement && blockedElements[tag]) {\r\n          ignoreCurrentElement = tag;\r\n        }\r\n        if (!ignoreCurrentElement && validElements[tag] === true) {\r\n          out('<');\r\n          out(tag);\r\n          forEach(attrs, function(value, key) {\r\n            var lkey = lowercase(key);\r\n            var isImage = (tag === 'img' && lkey === 'src') || (lkey === 'background');\r\n            if (validAttrs[lkey] === true &&\r\n              (uriAttrs[lkey] !== true || uriValidator(value, isImage))) {\r\n              out(' ');\r\n              out(key);\r\n              out('=\"');\r\n              out(encodeEntities(value));\r\n              out('\"');\r\n            }\r\n          });\r\n          out('>');\r\n        }\r\n      },\r\n      end: function(tag) {\r\n        tag = lowercase(tag);\r\n        if (!ignoreCurrentElement && validElements[tag] === true && voidElements[tag] !== true) {\r\n          out('</');\r\n          out(tag);\r\n          out('>');\r\n        }\r\n        if (tag == ignoreCurrentElement) {\r\n          ignoreCurrentElement = false;\r\n        }\r\n      },\r\n      chars: function(chars) {\r\n        if (!ignoreCurrentElement) {\r\n          out(encodeEntities(chars));\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n\r\n  /**\r\n   * When IE9-11 comes across an unknown namespaced attribute e.g. 'xlink:foo' it adds 'xmlns:ns1' attribute to declare\r\n   * ns1 namespace and prefixes the attribute with 'ns1' (e.g. 'ns1:xlink:foo'). This is undesirable since we don't want\r\n   * to allow any of these custom attributes. This method strips them all.\r\n   *\r\n   * @param node Root element to process\r\n   */\r\n  function stripCustomNsAttrs(node) {\r\n    if (node.nodeType === window.Node.ELEMENT_NODE) {\r\n      var attrs = node.attributes;\r\n      for (var i = 0, l = attrs.length; i < l; i++) {\r\n        var attrNode = attrs[i];\r\n        var attrName = attrNode.name.toLowerCase();\r\n        if (attrName === 'xmlns:ns1' || attrName.lastIndexOf('ns1:', 0) === 0) {\r\n          node.removeAttributeNode(attrNode);\r\n          i--;\r\n          l--;\r\n        }\r\n      }\r\n    }\r\n\r\n    var nextNode = node.firstChild;\r\n    if (nextNode) {\r\n      stripCustomNsAttrs(nextNode);\r\n    }\r\n\r\n    nextNode = node.nextSibling;\r\n    if (nextNode) {\r\n      stripCustomNsAttrs(nextNode);\r\n    }\r\n  }\r\n}\r\n\r\nfunction sanitizeText(chars) {\r\n  var buf = [];\r\n  var writer = htmlSanitizeWriter(buf, noop);\r\n  writer.chars(chars);\r\n  return buf.join('');\r\n}\r\n\r\n\r\n// define ngSanitize module and register $sanitize service\r\nangular.module('ngSanitize', []).provider('$sanitize', $SanitizeProvider);\r\n\r\n/**\r\n * @ngdoc filter\r\n * @name linky\r\n * @kind function\r\n *\r\n * @description\r\n * Finds links in text input and turns them into html links. Supports `http/https/ftp/mailto` and\r\n * plain email address links.\r\n *\r\n * Requires the {@link ngSanitize `ngSanitize`} module to be installed.\r\n *\r\n * @param {string} text Input text.\r\n * @param {string} target Window (`_blank|_self|_parent|_top`) or named frame to open links in.\r\n * @param {object|function(url)} [attributes] Add custom attributes to the link element.\r\n *\r\n *    Can be one of:\r\n *\r\n *    - `object`: A map of attributes\r\n *    - `function`: Takes the url as a parameter and returns a map of attributes\r\n *\r\n *    If the map of attributes contains a value for `target`, it overrides the value of\r\n *    the target parameter.\r\n *\r\n *\r\n * @returns {string} Html-linkified and {@link $sanitize sanitized} text.\r\n *\r\n * @usage\r\n   <span ng-bind-html=\"linky_expression | linky\"></span>\r\n *\r\n * @example\r\n   <example module=\"linkyExample\" deps=\"angular-sanitize.js\">\r\n     <file name=\"index.html\">\r\n       <div ng-controller=\"ExampleController\">\r\n       Snippet: <textarea ng-model=\"snippet\" cols=\"60\" rows=\"3\"></textarea>\r\n       <table>\r\n         <tr>\r\n           <th>Filter</th>\r\n           <th>Source</th>\r\n           <th>Rendered</th>\r\n         </tr>\r\n         <tr id=\"linky-filter\">\r\n           <td>linky filter</td>\r\n           <td>\r\n             <pre>&lt;div ng-bind-html=\"snippet | linky\"&gt;<br>&lt;/div&gt;</pre>\r\n           </td>\r\n           <td>\r\n             <div ng-bind-html=\"snippet | linky\"></div>\r\n           </td>\r\n         </tr>\r\n         <tr id=\"linky-target\">\r\n          <td>linky target</td>\r\n          <td>\r\n            <pre>&lt;div ng-bind-html=\"snippetWithSingleURL | linky:'_blank'\"&gt;<br>&lt;/div&gt;</pre>\r\n          </td>\r\n          <td>\r\n            <div ng-bind-html=\"snippetWithSingleURL | linky:'_blank'\"></div>\r\n          </td>\r\n         </tr>\r\n         <tr id=\"linky-custom-attributes\">\r\n          <td>linky custom attributes</td>\r\n          <td>\r\n            <pre>&lt;div ng-bind-html=\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\"&gt;<br>&lt;/div&gt;</pre>\r\n          </td>\r\n          <td>\r\n            <div ng-bind-html=\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\"></div>\r\n          </td>\r\n         </tr>\r\n         <tr id=\"escaped-html\">\r\n           <td>no filter</td>\r\n           <td><pre>&lt;div ng-bind=\"snippet\"&gt;<br>&lt;/div&gt;</pre></td>\r\n           <td><div ng-bind=\"snippet\"></div></td>\r\n         </tr>\r\n       </table>\r\n     </file>\r\n     <file name=\"script.js\">\r\n       angular.module('linkyExample', ['ngSanitize'])\r\n         .controller('ExampleController', ['$scope', function($scope) {\r\n           $scope.snippet =\r\n             'Pretty text with some links:\\n'+\r\n             'http://angularjs.org/,\\n'+\r\n             'mailto:us@somewhere.org,\\n'+\r\n             'another@somewhere.org,\\n'+\r\n             'and one more: ftp://127.0.0.1/.';\r\n           $scope.snippetWithSingleURL = 'http://angularjs.org/';\r\n         }]);\r\n     </file>\r\n     <file name=\"protractor.js\" type=\"protractor\">\r\n       it('should linkify the snippet with urls', function() {\r\n         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).\r\n             toBe('Pretty text with some links: http://angularjs.org/, us@somewhere.org, ' +\r\n                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');\r\n         expect(element.all(by.css('#linky-filter a')).count()).toEqual(4);\r\n       });\r\n\r\n       it('should not linkify snippet without the linky filter', function() {\r\n         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText()).\r\n             toBe('Pretty text with some links: http://angularjs.org/, mailto:us@somewhere.org, ' +\r\n                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');\r\n         expect(element.all(by.css('#escaped-html a')).count()).toEqual(0);\r\n       });\r\n\r\n       it('should update', function() {\r\n         element(by.model('snippet')).clear();\r\n         element(by.model('snippet')).sendKeys('new http://link.');\r\n         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).\r\n             toBe('new http://link.');\r\n         expect(element.all(by.css('#linky-filter a')).count()).toEqual(1);\r\n         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText())\r\n             .toBe('new http://link.');\r\n       });\r\n\r\n       it('should work with the target property', function() {\r\n        expect(element(by.id('linky-target')).\r\n            element(by.binding(\"snippetWithSingleURL | linky:'_blank'\")).getText()).\r\n            toBe('http://angularjs.org/');\r\n        expect(element(by.css('#linky-target a')).getAttribute('target')).toEqual('_blank');\r\n       });\r\n\r\n       it('should optionally add custom attributes', function() {\r\n        expect(element(by.id('linky-custom-attributes')).\r\n            element(by.binding(\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\")).getText()).\r\n            toBe('http://angularjs.org/');\r\n        expect(element(by.css('#linky-custom-attributes a')).getAttribute('rel')).toEqual('nofollow');\r\n       });\r\n     </file>\r\n   </example>\r\n */\r\nangular.module('ngSanitize').filter('linky', ['$sanitize', function($sanitize) {\r\n  var LINKY_URL_REGEXP =\r\n        /((ftp|https?):\\/\\/|(www\\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\\S*[^\\s.;,(){}<>\"\\u201d\\u2019]/i,\r\n      MAILTO_REGEXP = /^mailto:/i;\r\n\r\n  var linkyMinErr = angular.$$minErr('linky');\r\n  var isDefined = angular.isDefined;\r\n  var isFunction = angular.isFunction;\r\n  var isObject = angular.isObject;\r\n  var isString = angular.isString;\r\n\r\n  return function(text, target, attributes) {\r\n    if (text == null || text === '') return text;\r\n    if (!isString(text)) throw linkyMinErr('notstring', 'Expected string but received: {0}', text);\r\n\r\n    var attributesFn =\r\n      isFunction(attributes) ? attributes :\r\n      isObject(attributes) ? function getAttributesObject() {return attributes;} :\r\n      function getEmptyAttributesObject() {return {};};\r\n\r\n    var match;\r\n    var raw = text;\r\n    var html = [];\r\n    var url;\r\n    var i;\r\n    while ((match = raw.match(LINKY_URL_REGEXP))) {\r\n      // We can not end in these as they are sometimes found at the end of the sentence\r\n      url = match[0];\r\n      // if we did not match ftp/http/www/mailto then assume mailto\r\n      if (!match[2] && !match[4]) {\r\n        url = (match[3] ? 'http://' : 'mailto:') + url;\r\n      }\r\n      i = match.index;\r\n      addText(raw.substr(0, i));\r\n      addLink(url, match[0].replace(MAILTO_REGEXP, ''));\r\n      raw = raw.substring(i + match[0].length);\r\n    }\r\n    addText(raw);\r\n    return $sanitize(html.join(''));\r\n\r\n    function addText(text) {\r\n      if (!text) {\r\n        return;\r\n      }\r\n      html.push(sanitizeText(text));\r\n    }\r\n\r\n    function addLink(url, text) {\r\n      var key, linkAttributes = attributesFn(url);\r\n      html.push('<a ');\r\n\r\n      for (key in linkAttributes) {\r\n        html.push(key + '=\"' + linkAttributes[key] + '\" ');\r\n      }\r\n\r\n      if (isDefined(target) && !('target' in linkAttributes)) {\r\n        html.push('target=\"',\r\n                  target,\r\n                  '\" ');\r\n      }\r\n      html.push('href=\"',\r\n                url.replace(/\"/g, '&quot;'),\r\n                '\">');\r\n      addText(text);\r\n      html.push('</a>');\r\n    }\r\n  };\r\n}]);\r\n\r\n\r\n})(window, window.angular);\r\n\n//# sourceMappingURL=angular-sanitize.js.map\n","/*! 12.2.3 */\r\n!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if(\"__setXHR_\"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module(\"ngFileUpload\",[]);ngFileUpload.version=\"12.2.3\",ngFileUpload.service(\"UploadBase\",[\"$http\",\"$q\",\"$timeout\",function(a,b,c){function d(d){function e(a){j.notify&&j.notify(a),k.progressFunc&&c(function(){k.progressFunc(a)})}function h(a){return null!=d._start&&g?{loaded:a.loaded+d._start,total:d._file&&d._file.size||a.total,type:a.type,config:d,lengthComputable:!0,target:a.target}:a}function i(){a(d).then(function(a){if(g&&d._chunkSize&&!d._finished&&d._file){var b=d._file&&d._file.size||0;e({loaded:Math.min(d._end,b),total:b,config:d,type:\"progress\"}),f.upload(d,!0)}else d._finished&&delete d._finished,j.resolve(a)},function(a){j.reject(a)},function(a){j.notify(a)})}d.method=d.method||\"POST\",d.headers=d.headers||{};var j=d._deferred=d._deferred||b.defer(),k=j.promise;return d.disableProgress||(d.headers.__setXHR_=function(){return function(a){a&&a.upload&&a.upload.addEventListener&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener(\"progress\",function(a){a.config=d,e(h(a))},!1),a.upload.addEventListener(\"load\",function(a){a.lengthComputable&&(a.config=d,e(h(a)))},!1))}}),g?d._chunkSize&&d._end&&!d._finished?(d._start=d._end,d._end+=d._chunkSize,i()):d.resumeSizeUrl?a.get(d.resumeSizeUrl).then(function(a){d._start=d.resumeSizeResponseReader?d.resumeSizeResponseReader(a.data):parseInt((null==a.data.size?a.data:a.data.size).toString()),d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):d.resumeSize?d.resumeSize().then(function(a){d._start=a,d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):(d._chunkSize&&(d._start=0,d._end=d._start+d._chunkSize),i()):i(),k.success=function(a){return k.then(function(b){a(b.data,b.status,b.headers,d)}),k},k.error=function(a){return k.then(null,function(b){a(b.data,b.status,b.headers,d)}),k},k.progress=function(a){return k.progressFunc=a,k.then(null,null,function(b){a(b)}),k},k.abort=k.pause=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),k},k.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(k,arguments),a.apply(k,arguments)}}(d.xhrFn),k},f.promisesCount++,k[\"finally\"]&&k[\"finally\"]instanceof Function&&k[\"finally\"](function(){f.promisesCount--}),k}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=this;f.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var g=this.isResumeSupported();this.isUploadInProgress=function(){return f.promisesCount>0},this.rename=function(a,b){return a.ngfName=b,a},this.jsonBlob=function(a){null==a||angular.isString(a)||(a=JSON.stringify(a));var b=new window.Blob([a],{type:\"application/json\"});return b._ngfBlob=!0,b},this.json=function(a){return angular.toJson(a)},this.isFile=function(a){return null!=a&&(a instanceof window.Blob||a.flashId&&a.name&&a.size)},this.upload=function(a,b){function c(b,c){if(b._ngfBlob)return b;if(a._file=a._file||b,null!=a._start&&g){a._end&&a._end>=b.size&&(a._finished=!0,a._end=b.size);var d=b.slice(a._start,a._end||b.size);return d.name=b.name,d.ngfName=b.ngfName,a._chunkSize&&(c.append(\"_chunkSize\",a._chunkSize),c.append(\"_currentChunkSize\",a._end-a._start),c.append(\"_chunkNumber\",Math.floor(a._start/a._chunkSize)),c.append(\"_totalSize\",a._file.size)),d}return b}function h(b,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))b.append(e,d);else if(f.isFile(d)){var g=c(d,b),i=e.split(\",\");i[1]&&(g.ngfName=i[1].replace(/^\\s+|\\s+$/g,\"\"),e=i[0]),a._fileKey=a._fileKey||e,b.append(e,g,g.ngfName||g.name)}else if(angular.isObject(d)){if(d.$$ngfCircularDetection)throw\"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: \"+e;d.$$ngfCircularDetection=!0;try{for(var j in d)if(d.hasOwnProperty(j)&&\"$$ngfCircularDetection\"!==j){var k=null==a.objectKey?\"[i]\":a.objectKey;d.length&&parseInt(j)>-1&&(k=null==a.arrayKey?k:a.arrayKey),h(b,d[j],e+k.replace(/[ik]/g,j))}}finally{delete d.$$ngfCircularDetection}}else b.append(e,d)}function i(){a._chunkSize=f.translateScalars(a.resumeChunkSize),a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null,a.headers=a.headers||{},a.headers[\"Content-Type\"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c,d=new window.FormData;b=b||a.fields||{},a.file&&(b.file=a.file);for(c in b)if(b.hasOwnProperty(c)){var e=b[c];a.formDataAppender?a.formDataAppender(d,c,e):h(d,e,c)}return d})}return b||(a=e(a)),a._isDigested||(a._isDigested=!0,i()),d(a)},this.http=function(b){return b=e(b),b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof window.Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},b._chunkSize=f.translateScalars(b.resumeChunkSize),b._chunkSize=b._chunkSize?parseInt(b._chunkSize.toString()):null,d(b)},this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1024*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1048576*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1073741824*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a},this.urlToBlob=function(c){var d=b.defer();return a({url:c,method:\"get\",responseType:\"arraybuffer\"}).then(function(a){var b=new Uint8Array(a.data),e=a.headers(\"content-type\")||\"image/WebP\",f=new window.Blob([b],{type:e}),g=c.match(/.*\\/(.+?)(\\?.*)?$/);g.length>1&&(f.name=g[1]),d.resolve(f)},function(a){d.reject(a)}),d.promise},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service(\"Upload\",[\"$parse\",\"$timeout\",\"$compile\",\"$q\",\"UploadExif\",function(a,b,c,d,e){function f(a,b,c){var e=[i.emptyPromise()];return angular.forEach(a,function(d,f){0===d.type.indexOf(\"image/jpeg\")&&i.attrGetter(\"ngfFixOrientation\",b,c,{$file:d})&&e.push(i.happyPromise(i.applyExifRotation(d),d).then(function(b){a.splice(f,1,b)}))}),d.all(e)}function g(a,b,c){var e=i.attrGetter(\"ngfResize\",b,c);if(!e||!i.isResizeSupported()||!a.length)return i.emptyPromise();if(!(e instanceof Function))return h(e,a,b,c);var f=d.defer();e(a).then(function(d){h(d,a,b,c).then(function(a){f.resolve(a)},function(a){f.reject(a)})},function(a){f.reject(a)})}function h(a,b,c,e){function f(d,f){if(0===d.type.indexOf(\"image\")){if(a.pattern&&!i.validatePattern(d,a.pattern))return;a.resizeIf=function(a,b){return i.attrGetter(\"ngfResizeIf\",c,e,{$width:a,$height:b,$file:d})};var h=i.resize(d,a);g.push(h),h.then(function(a){b.splice(f,1,a)},function(a){d.$error=\"resize\",d.$errorParam=(a?(a.message?a.message:a)+\": \":\"\")+(d&&d.name)})}}for(var g=[i.emptyPromise()],h=0;h<b.length;h++)f(b[h],h);return d.all(g)}var i=e;return i.getAttrWithDefaults=function(a,b){if(null!=a[b])return a[b];var c=i.defaults[b];return null==c?c:angular.isString(c)?c:JSON.stringify(c)},i.attrGetter=function(b,c,d,e){var f=this.getAttrWithDefaults(c,b);if(!d)return f;try{return e?a(f)(d,e):a(f)(d)}catch(g){if(b.search(/min|max|pattern/i))return f;throw g}},i.shouldUpdateOn=function(a,b,c){var d=i.attrGetter(\"ngfModelOptions\",b,c);return d&&d.updateOn?d.updateOn.split(\" \").indexOf(a)>-1:!0},i.emptyPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.resolve.apply(a,c)}),a.promise},i.rejectPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.reject.apply(a,c)}),a.promise},i.happyPromise=function(a,c){var e=d.defer();return a.then(function(a){e.resolve(a)},function(a){b(function(){throw a}),e.resolve(c)}),e.promise},i.updateModel=function(c,d,e,h,j,k,l){function m(f,g,j,l,m){d.$$ngfPrevValidFiles=f,d.$$ngfPrevInvalidFiles=g;var n=f&&f.length?f[0]:null,o=g&&g.length?g[0]:null;c&&(i.applyModelValidation(c,f),c.$setViewValue(m?n:f)),h&&a(h)(e,{$files:f,$file:n,$newFiles:j,$duplicateFiles:l,$invalidFiles:g,$invalidFile:o,$event:k});var p=i.attrGetter(\"ngfModelInvalid\",d);p&&b(function(){a(p).assign(e,m?o:g)}),b(function(){})}function n(){function a(a,b){return a.name===b.name&&(a.$ngfOrigSize||a.size)===(b.$ngfOrigSize||b.size)&&a.type===b.type}function b(b){var c;for(c=0;c<r.length;c++)if(a(b,r[c]))return!0;for(c=0;c<s.length;c++)if(a(b,s[c]))return!0;return!1}if(j){q=[],t=[];for(var c=0;c<j.length;c++)b(j[c])?t.push(j[c]):q.push(j[c])}}function o(a){return angular.isArray(a)?a:[a]}function p(){function a(){b(function(){m(w?r.concat(v):v,w?s.concat(u):u,j,t,x)},z&&z.debounce?z.debounce.change||z.debounce:0)}g(y?q:v,d,e).then(function(){y?i.validate(q,w?r.length:0,c,d,e).then(function(b){v=b.validsFiles,u=b.invalidsFiles,a()}):a()},function(a){throw\"Could not resize files \"+a})}var q,r,s,t=[],u=[],v=[];r=d.$$ngfPrevValidFiles||[],s=d.$$ngfPrevInvalidFiles||[],c&&c.$modelValue&&(r=o(c.$modelValue));var w=i.attrGetter(\"ngfKeep\",d,e);q=(j||[]).slice(0),(\"distinct\"===w||i.attrGetter(\"ngfKeepDistinct\",d,e)===!0)&&n(d,e);var x=!w&&!i.attrGetter(\"ngfMultiple\",d,e)&&!i.attrGetter(\"multiple\",d);if(!w||q.length){i.attrGetter(\"ngfBeforeModelChange\",d,e,{$files:j,$file:j&&j.length?j[0]:null,$newFiles:q,$duplicateFiles:t,$event:k});var y=i.attrGetter(\"ngfValidateAfterResize\",d,e),z=i.attrGetter(\"ngfModelOptions\",d,e);i.validate(q,w?r.length:0,c,d,e).then(function(a){l?m(q,[],j,t,x):(z&&z.allowInvalid||y?v=q:(v=a.validFiles,u=a.invalidFiles),i.attrGetter(\"ngfFixOrientation\",d,e)&&i.isExifSupported()?f(v,d,e).then(function(){p()}):p())})}},i}]),ngFileUpload.directive(\"ngfSelect\",[\"$parse\",\"$timeout\",\"$compile\",\"Upload\",function(a,b,c,d){function e(a){var b=a.match(/Android[^\\d]*(\\d+)\\.(\\d+)/);if(b&&b.length>2){var c=d.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf(\"Chrome\")&&/.*Windows.*Safari.*/.test(a)}function f(a,b,c,d,f,h,i,j){function k(){return\"input\"===b[0].tagName.toLowerCase()&&c.type&&\"file\"===c.type.toLowerCase()}function l(){return t(\"ngfChange\")||t(\"ngfSelect\")}function m(b){if(j.shouldUpdateOn(\"change\",c,a)){var e=b.__files_||b.target&&b.target.files,f=[];if(!e)return;for(var g=0;g<e.length;g++)f.push(e[g]);j.updateModel(d,c,a,l(),f.length?f:null,b)}}function n(a){for(var c=0;c<b[0].attributes.length;c++){var d=b[0].attributes[c];\"type\"!==d.name&&\"class\"!==d.name&&\"style\"!==d.name&&((null==d.value||\"\"===d.value)&&(\"required\"===d.name&&(d.value=\"required\"),\"multiple\"===d.name&&(d.value=\"multiple\")),a.attr(d.name,\"id\"===d.name?\"ngf-\"+d.value:d.value))}}function o(){if(k())return b;var a=angular.element('<input type=\"file\">');n(a);var c=angular.element(\"<label>upload</label>\");return c.css(\"visibility\",\"hidden\").css(\"position\",\"absolute\").css(\"overflow\",\"hidden\").css(\"width\",\"0px\").css(\"height\",\"0px\").css(\"border\",\"none\").css(\"margin\",\"0px\").css(\"padding\",\"0px\").attr(\"tabindex\",\"-1\"),b.attr(\"id\")&&c.attr(\"id\",\"ngf-label-\"+b.attr(\"id\")),g.push({el:b,ref:c}),document.body.appendChild(c.append(a)[0]),a}function p(c){if(b.attr(\"disabled\"))return!1;if(!t(\"ngfSelectDisabled\",a)){var d=q(c);if(null!=d)return d;r(c);try{k()||document.body.contains(w[0])||(g.push({el:b,ref:w.parent()}),document.body.appendChild(w.parent()[0]),w.bind(\"change\",m))}catch(f){}return e(navigator.userAgent)?setTimeout(function(){w[0].click()},0):w[0].click(),!1}}function q(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if(\"touchstart\"===a.type)return v=b?b[0].clientY:0,!0;if(a.stopPropagation(),a.preventDefault(),\"touchend\"===a.type){var c=b?b[0].clientY:0;if(Math.abs(c-v)>20)return!1}}function r(b){j.shouldUpdateOn(\"click\",c,a)&&w.val()&&(w.val(null),j.updateModel(d,c,a,l(),null,b,!0))}function s(a){if(w&&!w.attr(\"__ngf_ie10_Fix_\")){if(!w[0].parentNode)return void(w=null);a.preventDefault(),a.stopPropagation(),w.unbind(\"click\");var b=w.clone();return w.replaceWith(b),w=b,w.attr(\"__ngf_ie10_Fix_\",\"true\"),w.bind(\"change\",m),w.bind(\"click\",s),w[0].click(),!1}w.removeAttr(\"__ngf_ie10_Fix_\")}var t=function(a,b){return j.attrGetter(a,c,b)};j.registerModelChangeValidator(d,c,a);var u=[];t(\"ngfMultiple\")&&u.push(a.$watch(t(\"ngfMultiple\"),function(){w.attr(\"multiple\",t(\"ngfMultiple\",a))})),t(\"ngfCapture\")&&u.push(a.$watch(t(\"ngfCapture\"),function(){w.attr(\"capture\",t(\"ngfCapture\",a))})),t(\"ngfAccept\")&&u.push(a.$watch(t(\"ngfAccept\"),function(){w.attr(\"accept\",t(\"ngfAccept\",a))})),c.$observe(\"accept\",function(){w.attr(\"accept\",t(\"accept\"))}),u.push(function(){c.$$observers&&delete c.$$observers.accept});var v=0,w=b;k()||(w=o()),w.bind(\"change\",m),k()?b.bind(\"click\",r):b.bind(\"click touchstart touchend\",p),-1!==navigator.appVersion.indexOf(\"MSIE 10\")&&w.bind(\"click\",s),d&&d.$formatters.push(function(a){return(null==a||0===a.length)&&w.val()&&w.val(null),a}),a.$on(\"$destroy\",function(){k()||w.parent().remove(),angular.forEach(u,function(a){a()})}),h(function(){for(var a=0;a<g.length;a++){var b=g[a];document.body.contains(b.el[0])||(g.splice(a,1),b.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,w,m)}var g=[];return{restrict:\"AEC\",require:\"?ngModel\",link:function(e,g,h,i){f(e,g,h,i,a,b,c,d)}}}]),function(){function a(a){return\"img\"===a.tagName.toLowerCase()?\"image\":\"audio\"===a.tagName.toLowerCase()?\"audio\":\"video\"===a.tagName.toLowerCase()?\"video\":/./}function b(b,c,d,e,f,g,h,i){function j(a){var g=b.attrGetter(\"ngfNoObjectUrl\",f,d);b.dataUrl(a,g)[\"finally\"](function(){c(function(){var b=(g?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;i?e.css(\"background-image\",\"url('\"+(b||\"\")+\"')\"):e.attr(\"src\",b),b?e.removeClass(\"ng-hide\"):e.addClass(\"ng-hide\")})})}c(function(){var c=d.$watch(f[g],function(c){var k=h;if(\"ngfThumbnail\"===g&&(k||(k={width:e[0].clientWidth,height:e[0].clientHeight}),0===k.width&&window.getComputedStyle)){var l=getComputedStyle(e[0]);k={width:parseInt(l.width.slice(0,-2)),height:parseInt(l.height.slice(0,-2))}}return angular.isString(c)?(e.removeClass(\"ng-hide\"),i?e.css(\"background-image\",\"url('\"+c+\"')\"):e.attr(\"src\",c)):void(!c||!c.type||0!==c.type.search(a(e[0]))||i&&0!==c.type.indexOf(\"image\")?e.addClass(\"ng-hide\"):k&&b.isResizeSupported()?(k.resizeIf=function(a,e){return b.attrGetter(\"ngfResizeIf\",f,d,{$width:a,$height:e,$file:c})},b.resize(c,k).then(function(a){j(a)},function(a){throw a})):j(c))});d.$on(\"$destroy\",function(){c()})})}ngFileUpload.service(\"UploadDataUrl\",[\"UploadBase\",\"$timeout\",\"$q\",function(a,b,c){var d=a;return d.base64DataUrl=function(a){if(angular.isArray(a)){var b=c.defer(),e=0;return angular.forEach(a,function(c){d.dataUrl(c,!0)[\"finally\"](function(){if(e++,e===a.length){var c=[];angular.forEach(a,function(a){c.push(a.$ngfDataUrl)}),b.resolve(c,a)}})}),b.promise}return d.dataUrl(a,!0)},d.dataUrl=function(a,e){if(!a)return d.emptyPromise(a,a);if(e&&null!=a.$ngfDataUrl||!e&&null!=a.$ngfBlobUrl)return d.emptyPromise(e?a.$ngfDataUrl:a.$ngfBlobUrl,a);var f=e?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 8\")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 9\")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!e){var f;try{f=c.createObjectURL(a)}catch(h){return void b(function(){a.$ngfBlobUrl=\"\",g.reject()})}b(function(){if(a.$ngfBlobUrl=f,f){g.resolve(f,a),d.blobUrls=d.blobUrls||[],d.blobUrlsTotalSize=d.blobUrlsTotalSize||0,d.blobUrls.push({url:f,size:a.size}),d.blobUrlsTotalSize+=a.size||0;for(var b=d.defaults.blobUrlsMaxMemory||268435456,e=d.defaults.blobUrlsMaxQueueSize||200;(d.blobUrlsTotalSize>b||d.blobUrls.length>e)&&d.blobUrls.length>1;){var h=d.blobUrls.splice(0,1)[0];c.revokeObjectURL(h.url),d.blobUrlsTotalSize-=h.size}}})}else{var i=new FileReader;i.onload=function(c){b(function(){a.$ngfDataUrl=c.target.result,g.resolve(c.target.result,a),b(function(){delete a.$ngfDataUrl},1e3)})},i.onerror=function(){b(function(){a.$ngfDataUrl=\"\",g.reject()})},i.readAsDataURL(a)}}else b(function(){a[e?\"$ngfDataUrl\":\"$ngfBlobUrl\"]=\"\",g.reject()})}),f=e?a.$$ngfDataUrlPromise=g.promise:a.$$ngfBlobUrlPromise=g.promise,f[\"finally\"](function(){delete a[e?\"$$ngfDataUrlPromise\":\"$$ngfBlobUrlPromise\"]}),f},d}]),ngFileUpload.directive(\"ngfSrc\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){b(a,c,d,e,f,\"ngfSrc\",a.attrGetter(\"ngfResize\",f,d),!1)}}}]),ngFileUpload.directive(\"ngfBackground\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){b(a,c,d,e,f,\"ngfBackground\",a.attrGetter(\"ngfResize\",f,d),!0)}}}]),ngFileUpload.directive(\"ngfThumbnail\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){var g=a.attrGetter(\"ngfSize\",f,d);b(a,c,d,e,f,\"ngfThumbnail\",g,a.attrGetter(\"ngfAsBackground\",f,d))}}}]),ngFileUpload.config([\"$compileProvider\",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter(\"ngfDataUrl\",[\"UploadDataUrl\",\"$sce\",function(a,b){return function(c,d,e){if(angular.isString(c))return b.trustAsResourceUrl(c);var f=c&&((d?c.$ngfDataUrl:c.$ngfBlobUrl)||c.$ngfDataUrl);return c&&!f?(!c.$ngfDataUrlFilterInProgress&&angular.isObject(c)&&(c.$ngfDataUrlFilterInProgress=!0,a.dataUrl(c,d)),\"\"):(c&&delete c.$ngfDataUrlFilterInProgress,(c&&f?e?b.trustAsResourceUrl(f):f:c)||\"\")}}])}(),ngFileUpload.service(\"UploadValidate\",[\"UploadDataUrl\",\"$q\",\"$timeout\",function(a,b,c){function d(a){var b=\"\",c=[];if(a.length>2&&\"/\"===a[0]&&\"/\"===a[a.length-1])b=a.substring(1,a.length-1);else{var e=a.split(\",\");if(e.length>1)for(var f=0;f<e.length;f++){var g=d(e[f]);g.regexp?(b+=\"(\"+g.regexp+\")\",f<e.length-1&&(b+=\"|\")):c=c.concat(g.excludes)}else 0===a.indexOf(\"!\")?c.push(\"^((?!\"+d(a.substring(1)).regexp+\").)*$\"):(0===a.indexOf(\".\")&&(a=\"*\"+a),b=\"^\"+a.replace(new RegExp(\"[.\\\\\\\\+*?\\\\[\\\\^\\\\]$(){}=!<>|:\\\\-]\",\"g\"),\"\\\\$&\")+\"$\",b=b.replace(/\\\\\\*/g,\".*\").replace(/\\\\\\?/g,\".\"))}return{regexp:b,excludes:c}}function e(a,b){null==b||a.$dirty||(a.$setDirty?a.$setDirty():a.$dirty=!0)}var f=a;return f.validatePattern=function(a,b){if(!b)return!0;var c=d(b),e=!0;if(c.regexp&&c.regexp.length){var f=new RegExp(c.regexp,\"i\");e=null!=a.type&&f.test(a.type)||null!=a.name&&f.test(a.name)}for(var g=c.excludes.length;g--;){var h=new RegExp(c.excludes[g],\"i\");e=e&&(null==a.type||h.test(a.type))&&(null==a.name||h.test(a.name))}return e},f.ratioToFloat=function(a){var b=a.toString(),c=b.search(/[x:]/i);return b=c>-1?parseFloat(b.substring(0,c))/parseFloat(b.substring(c+1)):parseFloat(b)},f.registerModelChangeValidator=function(a,b,c){a&&a.$formatters.push(function(d){a.$dirty&&(d&&!angular.isArray(d)&&(d=[d]),f.validate(d,0,a,b,c).then(function(){f.applyModelValidation(a,d)}))})},f.applyModelValidation=function(a,b){e(a,b),angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})},f.getValidationAttr=function(a,b,c,d,e){var g=\"ngf\"+c[0].toUpperCase()+c.substr(1),h=f.attrGetter(g,a,b,{$file:e});if(null==h&&(h=f.attrGetter(\"ngfValidate\",a,b,{$file:e}))){var i=(d||c).split(\".\");h=h[i[0]],i.length>1&&(h=h&&h[i[1]])}return h},f.validate=function(a,c,d,e,g){function h(b,c,h){if(a){for(var i=a.length,j=null;i--;){var n=a[i];if(n){var o=f.getValidationAttr(e,g,b,c,n);null!=o&&(h(n,o,i)||(-1===k.indexOf(b)?(n.$error=b,(n.$errorMessages=n.$errorMessages||{})[b]=!0,n.$errorParam=o,-1===m.indexOf(n)&&m.push(n),l||a.splice(i,1)):a.splice(i,1),j=!1))}}null!==j&&d.$ngfValidations.push({name:b,valid:j})}}function i(c,h,i,n,o){function p(b,d,e){function f(f){f()?(-1===k.indexOf(c)?(d.$error=c,(d.$errorMessages=d.$errorMessages||{})[c]=!0,d.$errorParam=e,-1===m.indexOf(d)&&m.push(d),l||a.splice(a.indexOf(d),1)):a.splice(a.indexOf(d),1),b.resolve(!1)):b.resolve(!0)}null!=e?n(d,e).then(function(a){f(function(){return!o(a,e)})},function(){f(function(){return j(\"ngfValidateForce\",{$file:d})})}):b.resolve(!0)}var q=[f.emptyPromise()];a&&(a=void 0===a.length?[a]:a,angular.forEach(a,function(a){var d=b.defer();return q.push(d.promise),!i||null!=a.type&&0===a.type.search(i)?void(\"dimensions\"===c&&null!=f.attrGetter(\"ngfDimensions\",e)?f.imageDimensions(a).then(function(b){p(d,a,j(\"ngfDimensions\",{$file:a,$width:b.width,$height:b.height}))},function(){d.resolve(!1)}):\"duration\"===c&&null!=f.attrGetter(\"ngfDuration\",e)?f.mediaDuration(a).then(function(b){p(d,a,j(\"ngfDuration\",{$file:a,$duration:b}))},function(){d.resolve(!1)}):p(d,a,f.getValidationAttr(e,g,c,h,a))):void d.resolve(!0)}));var r=b.defer();return b.all(q).then(function(a){a?(d.$ngfValidations.push({name:c,valid:!0}),r.resolve(!0)):(d.$ngfValidations.push({name:c,valid:!1}),r.resolve(!1))}),r.promise}d=d||{},d.$ngfValidations=d.$ngfValidations||[],angular.forEach(d.$ngfValidations,function(a){a.valid=!0});var j=function(a,b){return f.attrGetter(a,e,g,b)},k=(f.attrGetter(\"ngfIgnoreInvalid\",e,g)||\"\").split(\" \"),l=f.attrGetter(\"ngfRunAllValidations\",e,g);if(null==a||0===a.length)return f.emptyPromise({validFiles:a,invalidFiles:[]});a=void 0===a.length?[a]:a.slice(0);var m=[];h(\"pattern\",null,f.validatePattern),h(\"minSize\",\"size.min\",function(a,b){return a.size+.1>=f.translateScalars(b)}),h(\"maxSize\",\"size.max\",function(a,b){return a.size-.1<=f.translateScalars(b)});var n=0;if(h(\"maxTotalSize\",null,function(b,c){return n+=b.size,n>f.translateScalars(c)?(a.splice(0,a.length),!1):!0}),h(\"validateFn\",null,function(a,b){return b===!0||null===b||\"\"===b}),!a.length)return f.emptyPromise(d,d.$ngfValidations);var o=b.defer(),p=[];return p.push(i(\"maxHeight\",\"height.max\",/image/,this.imageDimensions,function(a,b){return a.height<=b})),p.push(i(\"minHeight\",\"height.min\",/image/,this.imageDimensions,function(a,b){return a.height>=b})),p.push(i(\"maxWidth\",\"width.max\",/image/,this.imageDimensions,function(a,b){return a.width<=b})),p.push(i(\"minWidth\",\"width.min\",/image/,this.imageDimensions,function(a,b){return a.width>=b})),p.push(i(\"dimensions\",null,/image/,function(a,b){return f.emptyPromise(b)},function(a){return a})),p.push(i(\"ratio\",null,/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(\",\"),d=!1,e=0;e<c.length;e++)Math.abs(a.width/a.height-f.ratioToFloat(c[e]))<.01&&(d=!0);return d})),p.push(i(\"maxRatio\",\"ratio.max\",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)<1e-4})),p.push(i(\"minRatio\",\"ratio.min\",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)>-1e-4})),p.push(i(\"maxDuration\",\"duration.max\",/audio|video/,this.mediaDuration,function(a,b){return a<=f.translateScalars(b)})),p.push(i(\"minDuration\",\"duration.min\",/audio|video/,this.mediaDuration,function(a,b){return a>=f.translateScalars(b)})),p.push(i(\"duration\",null,/audio|video/,function(a,b){return f.emptyPromise(b)},function(a){return a})),p.push(i(\"validateAsyncFn\",null,null,function(a,b){return b},function(a){return a===!0||null===a||\"\"===a})),b.all(p).then(function(){if(l)for(var b=0;b<a.length;b++){var d=a[b];d.$error&&a.splice(b--,1)}l=!1,h(\"maxFiles\",null,function(a,b,d){return b>c+d}),o.resolve({validFiles:a,invalidFiles:m})}),o.promise},f.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var d=b.defer();return c(function(){d.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),d.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf(\"image\")?void e.reject(\"not image\"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].clientWidth,c=h[0].clientHeight;h.remove(),a.$ngfWidth=b,a.$ngfHeight=c,e.resolve({width:b,height:c})}function f(){h.remove(),e.reject(\"load error\")}function g(){c(function(){h[0].parentNode&&(h[0].clientWidth?d():i>10?f():g())},1e3)}var h=angular.element(\"<img>\").attr(\"src\",b).css(\"visibility\",\"hidden\").css(\"position\",\"fixed\").css(\"max-width\",\"none !important\").css(\"max-height\",\"none !important\");h.on(\"load\",d),h.on(\"error\",f);var i=0;g(),angular.element(document.getElementsByTagName(\"body\")[0]).append(h)},function(){e.reject(\"load error\")})}),a.$ngfDimensionPromise=e.promise,a.$ngfDimensionPromise[\"finally\"](function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.$ngfDuration){var d=b.defer();return c(function(){d.resolve(a.$ngfDuration)}),d.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf(\"audio\")&&0!==a.type.indexOf(\"video\")?void e.reject(\"not media\"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.$ngfDuration=b,h.remove(),e.resolve(b)}function f(){h.remove(),e.reject(\"load error\")}function g(){c(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf(\"audio\")?\"<audio>\":\"<video>\").attr(\"src\",b).css(\"visibility\",\"none\").css(\"position\",\"fixed\");h.on(\"loadedmetadata\",d),h.on(\"error\",f);var i=0;g(),angular.element(document.body).append(h)},function(){e.reject(\"load error\")})}),a.$ngfDurationPromise=e.promise,a.$ngfDurationPromise[\"finally\"](function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}]),ngFileUpload.service(\"UploadResize\",[\"UploadValidate\",\"$q\",function(a,b){var c=a,d=function(a,b,c,d,e){var f=e?Math.max(c/a,d/b):Math.min(c/a,d/b);return{width:a*f,height:b*f,marginX:a*f-c,marginY:b*f-d}},e=function(a,e,f,g,h,i,j,k){var l=b.defer(),m=document.createElement(\"canvas\"),n=document.createElement(\"img\");return n.setAttribute(\"style\",\"visibility:hidden;position:fixed;z-index:-100000\"),document.body.appendChild(n),n.onload=function(){var a=n.width,b=n.height;if(n.parentNode.removeChild(n),null!=k&&k(a,b)===!1)return void l.reject(\"resizeIf\");try{if(i){var o=c.ratioToFloat(i),p=a/b;o>p?(e=a,f=e/o):(f=b,e=f*o)}e||(e=a),f||(f=b);var q=d(a,b,e,f,j);m.width=Math.min(q.width,e),m.height=Math.min(q.height,f);var r=m.getContext(\"2d\");r.drawImage(n,Math.min(0,-q.marginX/2),Math.min(0,-q.marginY/2),q.width,q.height),l.resolve(m.toDataURL(h||\"image/WebP\",g||.934))}catch(s){l.reject(s)}},n.onerror=function(){n.parentNode.removeChild(n),l.reject()},n.src=a,l.promise};return c.dataUrltoBlob=function(a,b,c){for(var d=a.split(\",\"),e=d[0].match(/:(.*?);/)[1],f=atob(d[1]),g=f.length,h=new Uint8Array(g);g--;)h[g]=f.charCodeAt(g);var i=new window.Blob([h],{type:e});return i.name=b,i.$ngfOrigSize=c,i},c.isResizeSupported=function(){var a=document.createElement(\"canvas\");return window.atob&&a.getContext&&a.getContext(\"2d\")&&window.Blob},c.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,\"name\",{get:function(){return this.$ngfName},set:function(a){this.$ngfName=a},configurable:!0}),c.resize=function(a,d){if(0!==a.type.indexOf(\"image\"))return c.emptyPromise(a);var f=b.defer();return c.dataUrl(a,!0).then(function(b){e(b,d.width,d.height,d.quality,d.type||a.type,d.ratio,d.centerCrop,d.resizeIf).then(function(e){if(\"image/jpeg\"===a.type&&d.restoreExif!==!1)try{e=c.restoreExif(b,e)}catch(g){setTimeout(function(){throw g},1)}try{var h=c.dataUrltoBlob(e,a.name,a.size);f.resolve(h)}catch(g){f.reject(g)}},function(b){\"resizeIf\"===b&&f.resolve(a),f.reject(b)})},function(a){f.reject(a)}),f.promise},c}]),function(){function a(a,c,d,e,f,g,h,i,j,k){function l(){return c.attr(\"disabled\")||r(\"ngfDropDisabled\",a)}function m(b,c){i.updateModel(e,d,a,r(\"ngfChange\")||r(\"ngfDrop\"),b,c)}function n(b,c){if(!i.shouldUpdateOn(b,d,a)||\"string\"!=typeof c)return i.rejectPromise([]);var e=[];c.replace(/<(img src|img [^>]* src) *=\\\"([^\\\"]*)\\\"/gi,function(a,b,c){e.push(c)});var f=[],g=[];if(e.length){angular.forEach(e,function(a){f.push(i.urlToBlob(a).then(function(a){g.push(a)}))});var h=k.defer();return k.all(f).then(function(){h.resolve(g)},function(a){h.reject(a)}),h.promise}return i.emptyPromise()}function o(a,b,c,d){var e=r(\"ngfDragOverClass\",a,{$event:c}),f=\"dragover\";if(angular.isString(e))f=e;else if(e&&(e.delay&&(v=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g&&g.length)for(var h=e.pattern||r(\"ngfPattern\",a,{$event:c}),j=g.length;j--;){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}else f=e.accept}d(f)}function p(b,c,e,f){function g(a,b){var c=k.defer();if(null!=a)if(a.isDirectory){var d=[i.emptyPromise()];if(m){var e={type:\"directory\"};e.name=e.path=(b||\"\")+a.name,n.push(e)}var f=a.createReader(),h=[],p=function(){f.readEntries(function(e){try{e.length?(h=h.concat(Array.prototype.slice.call(e||[],0)),p()):(angular.forEach(h.slice(0),function(c){n.length<=j&&l>=o&&d.push(g(c,(b?b:\"\")+a.name+\"/\"))}),k.all(d).then(function(){c.resolve()},function(a){c.reject(a)}))}catch(f){c.reject(f)}},function(a){c.reject(a)})};p()}else a.file(function(a){try{a.path=(b?b:\"\")+a.name,m&&(a=i.rename(a,a.path)),n.push(a),o+=a.size,c.resolve()}catch(d){c.reject(d)}},function(a){c.reject(a)});return c.promise}var j=i.getValidationAttr(d,a,\"maxFiles\");null==j&&(j=Number.MAX_VALUE);var l=i.getValidationAttr(d,a,\"maxTotalSize\");null==l&&(l=Number.MAX_VALUE);var m=r(\"ngfIncludeDir\",a),n=[],o=0,p=[i.emptyPromise()];if(b&&b.length>0&&\"file:\"!==h.location.protocol)for(var q=0;q<b.length;q++){if(b[q].webkitGetAsEntry&&b[q].webkitGetAsEntry()&&b[q].webkitGetAsEntry().isDirectory){var s=b[q].webkitGetAsEntry();if(s.isDirectory&&!e)continue;null!=s&&p.push(g(s))}else{var t=b[q].getAsFile();null!=t&&(n.push(t),o+=t.size)}if(n.length>j||o>l||!f&&n.length>0)break}else if(null!=c)for(var u=0;u<c.length;u++){var v=c.item(u);if((v.type||v.size>0)&&(n.push(v),o+=v.size),n.length>j||o>l||!f&&n.length>0)break}var w=k.defer();return k.all(p).then(function(){if(f||m||!n.length)w.resolve(n);else{for(var a=0;n[a]&&\"directory\"===n[a].type;)a++;w.resolve([n[a]])}},function(a){w.reject(a)}),w.promise}var q=b(),r=function(a,b,c){return i.attrGetter(a,d,b,c)};if(r(\"dropAvailable\")&&g(function(){a[r(\"dropAvailable\")]?a[r(\"dropAvailable\")].value=q:a[r(\"dropAvailable\")]=q}),!q)return void(r(\"ngfHideOnDropNotAvailable\",a)===!0&&c.css(\"display\",\"none\"));null==r(\"ngfSelect\")&&i.registerModelChangeValidator(e,d,a);var s,t=null,u=f(r(\"ngfStopPropagation\")),v=1;c[0].addEventListener(\"dragover\",function(b){if(!l()&&i.shouldUpdateOn(\"drop\",d,a)){if(b.preventDefault(),u(a)&&b.stopPropagation(),navigator.userAgent.indexOf(\"Chrome\")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect=\"move\"===e||\"linkMove\"===e?\"move\":\"copy\"}g.cancel(t),s||(s=\"C\",o(a,d,b,function(d){s=d,c.addClass(s),r(\"ngfDrag\",a,{$isDragging:!0,$class:s,$event:b})}))}},!1),c[0].addEventListener(\"dragenter\",function(b){!l()&&i.shouldUpdateOn(\"drop\",d,a)&&(b.preventDefault(),u(a)&&b.stopPropagation())},!1),c[0].addEventListener(\"dragleave\",function(b){!l()&&i.shouldUpdateOn(\"drop\",d,a)&&(b.preventDefault(),u(a)&&b.stopPropagation(),t=g(function(){s&&c.removeClass(s),s=null,r(\"ngfDrag\",a,{$isDragging:!1,$event:b})},v||100))},!1),c[0].addEventListener(\"drop\",function(b){if(!l()&&i.shouldUpdateOn(\"drop\",d,a)){b.preventDefault(),u(a)&&b.stopPropagation(),s&&c.removeClass(s),s=null;var e,f=b.dataTransfer.items;try{e=b.dataTransfer&&b.dataTransfer.getData&&b.dataTransfer.getData(\"text/html\")}catch(g){}p(f,b.dataTransfer.files,r(\"ngfAllowDir\",a)!==!1,r(\"multiple\")||r(\"ngfMultiple\",a)).then(function(a){a.length?m(a,b):n(\"dropUrl\",e).then(function(a){m(a,b)})})}},!1),c[0].addEventListener(\"paste\",function(b){if(navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1&&r(\"ngfEnableFirefoxPaste\",a)&&b.preventDefault(),\r\n!l()&&i.shouldUpdateOn(\"paste\",d,a)){var c=[],e=b.clipboardData||b.originalEvent.clipboardData;if(e&&e.items)for(var f=0;f<e.items.length;f++)-1!==e.items[f].type.indexOf(\"image\")&&c.push(e.items[f].getAsFile());c.length?m(c,b):n(\"pasteUrl\",e).then(function(a){m(a,b)})}},!1),navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1&&r(\"ngfEnableFirefoxPaste\",a)&&(c.attr(\"contenteditable\",!0),c.on(\"keypress\",function(a){a.metaKey||a.ctrlKey||a.preventDefault()}))}function b(){var a=document.createElement(\"div\");return\"draggable\"in a&&\"ondrop\"in a&&!/Edge\\/12./i.test(navigator.userAgent)}ngFileUpload.directive(\"ngfDrop\",[\"$parse\",\"$timeout\",\"$window\",\"Upload\",\"$http\",\"$q\",function(b,c,d,e,f,g){return{restrict:\"AEC\",require:\"?ngModel\",link:function(h,i,j,k){a(h,i,j,k,b,c,d,e,f,g)}}}]),ngFileUpload.directive(\"ngfNoFileDrop\",function(){return function(a,c){b()&&c.css(\"display\",\"none\")}}),ngFileUpload.directive(\"ngfDropAvailable\",[\"$parse\",\"$timeout\",\"Upload\",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter(\"ngfDropAvailable\",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}(),ngFileUpload.service(\"UploadExif\",[\"UploadResize\",\"$q\",function(a,b){function c(a,b,c,d){switch(b){case 2:return a.transform(-1,0,0,1,c,0);case 3:return a.transform(-1,0,0,-1,c,d);case 4:return a.transform(1,0,0,-1,0,d);case 5:return a.transform(0,1,1,0,0,0);case 6:return a.transform(0,1,-1,0,d,0);case 7:return a.transform(0,-1,-1,0,d,c);case 8:return a.transform(0,-1,1,0,0,c)}}function d(a){for(var b=\"\",c=new Uint8Array(a),d=c.byteLength,e=0;d>e;e++)b+=String.fromCharCode(c[e]);return window.btoa(b)}var e=a;return e.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&e.isResizeSupported()},e.readOrientation=function(a){var c=b.defer(),d=new FileReader,e=a.slice?a.slice(0,65536):a;return d.readAsArrayBuffer(e),d.onerror=function(a){return c.reject(a)},d.onload=function(a){var b={orientation:1},d=new DataView(this.result);if(65496!==d.getUint16(0,!1))return c.resolve(b);for(var e=d.byteLength,f=2;e>f;){var g=d.getUint16(f,!1);if(f+=2,65505===g){if(1165519206!==d.getUint32(f+=2,!1))return c.resolve(b);var h=18761===d.getUint16(f+=6,!1);f+=d.getUint32(f+4,h);var i=d.getUint16(f,h);f+=2;for(var j=0;i>j;j++)if(274===d.getUint16(f+12*j,h)){var k=d.getUint16(f+12*j+8,h);return k>=2&&8>=k&&(d.setUint16(f+12*j+8,1,h),b.fixedArrayBuffer=a.target.result),b.orientation=k,c.resolve(b)}}else{if(65280!==(65280&g))break;f+=d.getUint16(f,!1)}}return c.resolve(b)},c.promise},e.applyExifRotation=function(a){if(0!==a.type.indexOf(\"image/jpeg\"))return e.emptyPromise(a);var f=b.defer();return e.readOrientation(a).then(function(b){return b.orientation<2||b.orientation>8?f.resolve(a):void e.dataUrl(a,!0).then(function(g){var h=document.createElement(\"canvas\"),i=document.createElement(\"img\");i.onload=function(){try{h.width=b.orientation>4?i.height:i.width,h.height=b.orientation>4?i.width:i.height;var g=h.getContext(\"2d\");c(g,b.orientation,i.width,i.height),g.drawImage(i,0,0);var j=h.toDataURL(a.type||\"image/WebP\",.934);j=e.restoreExif(d(b.fixedArrayBuffer),j);var k=e.dataUrltoBlob(j,a.name);f.resolve(k)}catch(l){return f.reject(l)}},i.onerror=function(){f.reject()},i.src=g},function(a){f.reject(a)})},function(a){f.reject(a)}),f.promise},e.restoreExif=function(a,b){var c={};return c.KEY_STR=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",c.encode64=function(a){var b,c,d,e,f,g=\"\",h=\"\",i=\"\",j=0;do b=a[j++],c=a[j++],h=a[j++],d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.KEY_STR.charAt(d)+this.KEY_STR.charAt(e)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(i),b=c=h=\"\",d=e=f=i=\"\";while(j<a.length);return g},c.restore=function(a,b){a.match(\"data:image/jpeg;base64,\")&&(a=a.replace(\"data:image/jpeg;base64,\",\"\"));var c=this.decode64(a),d=this.slice2Segments(c),e=this.exifManipulation(b,d);return\"data:image/jpeg;base64,\"+this.encode64(e)},c.exifManipulation=function(a,b){var c=this.getExifArray(b),d=this.insertExif(a,c);return new Uint8Array(d)},c.getExifArray=function(a){for(var b,c=0;c<a.length;c++)if(b=a[c],255===b[0]&225===b[1])return b;return[]},c.insertExif=function(a,b){var c=a.replace(\"data:image/jpeg;base64,\",\"\"),d=this.decode64(c),e=d.indexOf(255,3),f=d.slice(0,e),g=d.slice(e),h=f;return h=h.concat(b),h=h.concat(g)},c.slice2Segments=function(a){for(var b=0,c=[];;){if(255===a[b]&218===a[b+1])break;if(255===a[b]&216===a[b+1])b+=2;else{var d=256*a[b+2]+a[b+3],e=b+d+2,f=a.slice(b,e);c.push(f),b=e}if(b>a.length)break}return c},c.decode64=function(a){var b,c,d,e,f,g=\"\",h=\"\",i=0,j=[],k=/[^A-Za-z0-9\\+\\/\\=]/g;k.exec(a)&&console.log(\"There were invalid base64 characters in the input text.\\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding.\"),a=a.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");do d=this.KEY_STR.indexOf(a.charAt(i++)),e=this.KEY_STR.indexOf(a.charAt(i++)),f=this.KEY_STR.indexOf(a.charAt(i++)),h=this.KEY_STR.indexOf(a.charAt(i++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,g=(3&f)<<6|h,j.push(b),64!==f&&j.push(c),64!==h&&j.push(g),b=c=g=\"\",d=e=f=h=\"\";while(i<a.length);return j},c.restore(a,b)},e}]);\n//# sourceMappingURL=ng-file-upload.js.map\n","/*!\r\n * Chart.js\r\n * http://chartjs.org/\r\n * Version: 1.1.1\r\n *\r\n * Copyright 2015 Nick Downie\r\n * Released under the MIT license\r\n * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md\r\n */\r\n\r\n\r\n(function(){\r\n\r\n\t\"use strict\";\r\n\r\n\t//Declare root variable - window in the browser, global on the server\r\n\tvar root = this,\r\n\t\tprevious = root.Chart;\r\n\r\n\t//Occupy the global variable of Chart, and create a simple base class\r\n\tvar Chart = function(context){\r\n\t\tvar chart = this;\r\n\t\tthis.canvas = context.canvas;\r\n\r\n\t\tthis.ctx = context;\r\n\r\n\t\t//Variables global to the chart\r\n\t\tvar computeDimension = function(element,dimension)\r\n\t\t{\r\n\t\t\tif (element['offset'+dimension])\r\n\t\t\t{\r\n\t\t\t\treturn element['offset'+dimension];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn document.defaultView.getComputedStyle(element).getPropertyValue(dimension);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar width = this.width = computeDimension(context.canvas,'Width') || context.canvas.width;\r\n\t\tvar height = this.height = computeDimension(context.canvas,'Height') || context.canvas.height;\r\n\r\n\t\tthis.aspectRatio = this.width / this.height;\r\n\t\t//High pixel density displays - multiply the size of the canvas height/width by the device pixel ratio, then scale.\r\n\t\thelpers.retinaScale(this);\r\n\r\n\t\treturn this;\r\n\t};\r\n\t//Globally expose the defaults to allow for user updating/changing\r\n\tChart.defaults = {\r\n\t\tglobal: {\r\n\t\t\t// Boolean - Whether to animate the chart\r\n\t\t\tanimation: true,\r\n\r\n\t\t\t// Number - Number of animation steps\r\n\t\t\tanimationSteps: 60,\r\n\r\n\t\t\t// String - Animation easing effect\r\n\t\t\tanimationEasing: \"easeOutQuart\",\r\n\r\n\t\t\t// Boolean - If we should show the scale at all\r\n\t\t\tshowScale: true,\r\n\r\n\t\t\t// Boolean - If we want to override with a hard coded scale\r\n\t\t\tscaleOverride: false,\r\n\r\n\t\t\t// ** Required if scaleOverride is true **\r\n\t\t\t// Number - The number of steps in a hard coded scale\r\n\t\t\tscaleSteps: null,\r\n\t\t\t// Number - The value jump in the hard coded scale\r\n\t\t\tscaleStepWidth: null,\r\n\t\t\t// Number - The scale starting value\r\n\t\t\tscaleStartValue: null,\r\n\r\n\t\t\t// String - Colour of the scale line\r\n\t\t\tscaleLineColor: \"rgba(0,0,0,.1)\",\r\n\r\n\t\t\t// Number - Pixel width of the scale line\r\n\t\t\tscaleLineWidth: 1,\r\n\r\n\t\t\t// Boolean - Whether to show labels on the scale\r\n\t\t\tscaleShowLabels: true,\r\n\r\n\t\t\t// Interpolated JS string - can access value\r\n\t\t\tscaleLabel: \"<%=value%>\",\r\n\r\n\t\t\t// Boolean - Whether the scale should stick to integers, and not show any floats even if drawing space is there\r\n\t\t\tscaleIntegersOnly: true,\r\n\r\n\t\t\t// Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value\r\n\t\t\tscaleBeginAtZero: false,\r\n\r\n\t\t\t// String - Scale label font declaration for the scale label\r\n\t\t\tscaleFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n\r\n\t\t\t// Number - Scale label font size in pixels\r\n\t\t\tscaleFontSize: 12,\r\n\r\n\t\t\t// String - Scale label font weight style\r\n\t\t\tscaleFontStyle: \"normal\",\r\n\r\n\t\t\t// String - Scale label font colour\r\n\t\t\tscaleFontColor: \"#666\",\r\n\r\n\t\t\t// Boolean - whether or not the chart should be responsive and resize when the browser does.\r\n\t\t\tresponsive: false,\r\n\r\n\t\t\t// Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container\r\n\t\t\tmaintainAspectRatio: true,\r\n\r\n\t\t\t// Boolean - Determines whether to draw tooltips on the canvas or not - attaches events to touchmove & mousemove\r\n\t\t\tshowTooltips: true,\r\n\r\n\t\t\t// Boolean - Determines whether to draw built-in tooltip or call custom tooltip function\r\n\t\t\tcustomTooltips: false,\r\n\r\n\t\t\t// Array - Array of string names to attach tooltip events\r\n\t\t\ttooltipEvents: [\"mousemove\", \"touchstart\", \"touchmove\", \"mouseout\"],\r\n\r\n\t\t\t// String - Tooltip background colour\r\n\t\t\ttooltipFillColor: \"rgba(0,0,0,0.8)\",\r\n\r\n\t\t\t// String - Tooltip label font declaration for the scale label\r\n\t\t\ttooltipFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n\r\n\t\t\t// Number - Tooltip label font size in pixels\r\n\t\t\ttooltipFontSize: 14,\r\n\r\n\t\t\t// String - Tooltip font weight style\r\n\t\t\ttooltipFontStyle: \"normal\",\r\n\r\n\t\t\t// String - Tooltip label font colour\r\n\t\t\ttooltipFontColor: \"#fff\",\r\n\r\n\t\t\t// String - Tooltip title font declaration for the scale label\r\n\t\t\ttooltipTitleFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n\r\n\t\t\t// Number - Tooltip title font size in pixels\r\n\t\t\ttooltipTitleFontSize: 14,\r\n\r\n\t\t\t// String - Tooltip title font weight style\r\n\t\t\ttooltipTitleFontStyle: \"bold\",\r\n\r\n\t\t\t// String - Tooltip title font colour\r\n\t\t\ttooltipTitleFontColor: \"#fff\",\r\n\r\n\t\t\t// String - Tooltip title template\r\n\t\t\ttooltipTitleTemplate: \"<%= label%>\",\r\n\r\n\t\t\t// Number - pixel width of padding around tooltip text\r\n\t\t\ttooltipYPadding: 6,\r\n\r\n\t\t\t// Number - pixel width of padding around tooltip text\r\n\t\t\ttooltipXPadding: 6,\r\n\r\n\t\t\t// Number - Size of the caret on the tooltip\r\n\t\t\ttooltipCaretSize: 8,\r\n\r\n\t\t\t// Number - Pixel radius of the tooltip border\r\n\t\t\ttooltipCornerRadius: 6,\r\n\r\n\t\t\t// Number - Pixel offset from point x to tooltip edge\r\n\t\t\ttooltipXOffset: 10,\r\n\r\n\t\t\t// String - Template string for single tooltips\r\n\t\t\ttooltipTemplate: \"<%if (label){%><%=label%>: <%}%><%= value %>\",\r\n\r\n\t\t\t// String - Template string for single tooltips\r\n\t\t\tmultiTooltipTemplate: \"<%= datasetLabel %>: <%= value %>\",\r\n\r\n\t\t\t// String - Colour behind the legend colour block\r\n\t\t\tmultiTooltipKeyBackground: '#fff',\r\n\r\n\t\t\t// Array - A list of colors to use as the defaults\r\n\t\t\tsegmentColorDefault: [\"#A6CEE3\", \"#1F78B4\", \"#B2DF8A\", \"#33A02C\", \"#FB9A99\", \"#E31A1C\", \"#FDBF6F\", \"#FF7F00\", \"#CAB2D6\", \"#6A3D9A\", \"#B4B482\", \"#B15928\" ],\r\n\r\n\t\t\t// Array - A list of highlight colors to use as the defaults\r\n\t\t\tsegmentHighlightColorDefaults: [ \"#CEF6FF\", \"#47A0DC\", \"#DAFFB2\", \"#5BC854\", \"#FFC2C1\", \"#FF4244\", \"#FFE797\", \"#FFA728\", \"#F2DAFE\", \"#9265C2\", \"#DCDCAA\", \"#D98150\" ],\r\n\r\n\t\t\t// Function - Will fire on animation progression.\r\n\t\t\tonAnimationProgress: function(){},\r\n\r\n\t\t\t// Function - Will fire on animation completion.\r\n\t\t\tonAnimationComplete: function(){}\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t//Create a dictionary of chart types, to allow for extension of existing types\r\n\tChart.types = {};\r\n\r\n\t//Global Chart helpers object for utility methods and classes\r\n\tvar helpers = Chart.helpers = {};\r\n\r\n\t\t//-- Basic js utility methods\r\n\tvar each = helpers.each = function(loopable,callback,self){\r\n\t\t\tvar additionalArgs = Array.prototype.slice.call(arguments, 3);\r\n\t\t\t// Check to see if null or undefined firstly.\r\n\t\t\tif (loopable){\r\n\t\t\t\tif (loopable.length === +loopable.length){\r\n\t\t\t\t\tvar i;\r\n\t\t\t\t\tfor (i=0; i<loopable.length; i++){\r\n\t\t\t\t\t\tcallback.apply(self,[loopable[i], i].concat(additionalArgs));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tfor (var item in loopable){\r\n\t\t\t\t\t\tcallback.apply(self,[loopable[item],item].concat(additionalArgs));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tclone = helpers.clone = function(obj){\r\n\t\t\tvar objClone = {};\r\n\t\t\teach(obj,function(value,key){\r\n\t\t\t\tif (obj.hasOwnProperty(key)){\r\n\t\t\t\t\tobjClone[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn objClone;\r\n\t\t},\r\n\t\textend = helpers.extend = function(base){\r\n\t\t\teach(Array.prototype.slice.call(arguments,1), function(extensionObject) {\r\n\t\t\t\teach(extensionObject,function(value,key){\r\n\t\t\t\t\tif (extensionObject.hasOwnProperty(key)){\r\n\t\t\t\t\t\tbase[key] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn base;\r\n\t\t},\r\n\t\tmerge = helpers.merge = function(base,master){\r\n\t\t\t//Merge properties in left object over to a shallow clone of object right.\r\n\t\t\tvar args = Array.prototype.slice.call(arguments,0);\r\n\t\t\targs.unshift({});\r\n\t\t\treturn extend.apply(null, args);\r\n\t\t},\r\n\t\tindexOf = helpers.indexOf = function(arrayToSearch, item){\r\n\t\t\tif (Array.prototype.indexOf) {\r\n\t\t\t\treturn arrayToSearch.indexOf(item);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tfor (var i = 0; i < arrayToSearch.length; i++) {\r\n\t\t\t\t\tif (arrayToSearch[i] === item) return i;\r\n\t\t\t\t}\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\twhere = helpers.where = function(collection, filterCallback){\r\n\t\t\tvar filtered = [];\r\n\r\n\t\t\thelpers.each(collection, function(item){\r\n\t\t\t\tif (filterCallback(item)){\r\n\t\t\t\t\tfiltered.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn filtered;\r\n\t\t},\r\n\t\tfindNextWhere = helpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex){\r\n\t\t\t// Default to start of the array\r\n\t\t\tif (!startIndex){\r\n\t\t\t\tstartIndex = -1;\r\n\t\t\t}\r\n\t\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\r\n\t\t\t\tvar currentItem = arrayToSearch[i];\r\n\t\t\t\tif (filterCallback(currentItem)){\r\n\t\t\t\t\treturn currentItem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tfindPreviousWhere = helpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex){\r\n\t\t\t// Default to end of the array\r\n\t\t\tif (!startIndex){\r\n\t\t\t\tstartIndex = arrayToSearch.length;\r\n\t\t\t}\r\n\t\t\tfor (var i = startIndex - 1; i >= 0; i--) {\r\n\t\t\t\tvar currentItem = arrayToSearch[i];\r\n\t\t\t\tif (filterCallback(currentItem)){\r\n\t\t\t\t\treturn currentItem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tinherits = helpers.inherits = function(extensions){\r\n\t\t\t//Basic javascript inheritance based on the model created in Backbone.js\r\n\t\t\tvar parent = this;\r\n\t\t\tvar ChartElement = (extensions && extensions.hasOwnProperty(\"constructor\")) ? extensions.constructor : function(){ return parent.apply(this, arguments); };\r\n\r\n\t\t\tvar Surrogate = function(){ this.constructor = ChartElement;};\r\n\t\t\tSurrogate.prototype = parent.prototype;\r\n\t\t\tChartElement.prototype = new Surrogate();\r\n\r\n\t\t\tChartElement.extend = inherits;\r\n\r\n\t\t\tif (extensions) extend(ChartElement.prototype, extensions);\r\n\r\n\t\t\tChartElement.__super__ = parent.prototype;\r\n\r\n\t\t\treturn ChartElement;\r\n\t\t},\r\n\t\tnoop = helpers.noop = function(){},\r\n\t\tuid = helpers.uid = (function(){\r\n\t\t\tvar id=0;\r\n\t\t\treturn function(){\r\n\t\t\t\treturn \"chart-\" + id++;\r\n\t\t\t};\r\n\t\t})(),\r\n\t\twarn = helpers.warn = function(str){\r\n\t\t\t//Method for warning of errors\r\n\t\t\tif (window.console && typeof window.console.warn === \"function\") console.warn(str);\r\n\t\t},\r\n\t\tamd = helpers.amd = (typeof define === 'function' && define.amd),\r\n\t\t//-- Math methods\r\n\t\tisNumber = helpers.isNumber = function(n){\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\t\tmax = helpers.max = function(array){\r\n\t\t\treturn Math.max.apply( Math, array );\r\n\t\t},\r\n\t\tmin = helpers.min = function(array){\r\n\t\t\treturn Math.min.apply( Math, array );\r\n\t\t},\r\n\t\tcap = helpers.cap = function(valueToCap,maxValue,minValue){\r\n\t\t\tif(isNumber(maxValue)) {\r\n\t\t\t\tif( valueToCap > maxValue ) {\r\n\t\t\t\t\treturn maxValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(isNumber(minValue)){\r\n\t\t\t\tif ( valueToCap < minValue ){\r\n\t\t\t\t\treturn minValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn valueToCap;\r\n\t\t},\r\n\t\tgetDecimalPlaces = helpers.getDecimalPlaces = function(num){\r\n\t\t\tif (num%1!==0 && isNumber(num)){\r\n\t\t\t\tvar s = num.toString();\r\n\t\t\t\tif(s.indexOf(\"e-\") < 0){\r\n\t\t\t\t\t// no exponent, e.g. 0.01\r\n\t\t\t\t\treturn s.split(\".\")[1].length;\r\n\t\t\t\t}\r\n\t\t\t\telse if(s.indexOf(\".\") < 0) {\r\n\t\t\t\t\t// no decimal point, e.g. 1e-9\r\n\t\t\t\t\treturn parseInt(s.split(\"e-\")[1]);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// exponent and decimal point, e.g. 1.23e-9\r\n\t\t\t\t\tvar parts = s.split(\".\")[1].split(\"e-\");\r\n\t\t\t\t\treturn parts[0].length + parseInt(parts[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoRadians = helpers.radians = function(degrees){\r\n\t\t\treturn degrees * (Math.PI/180);\r\n\t\t},\r\n\t\t// Gets the angle from vertical upright to the point about a centre.\r\n\t\tgetAngleFromPoint = helpers.getAngleFromPoint = function(centrePoint, anglePoint){\r\n\t\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x,\r\n\t\t\t\tdistanceFromYCenter = anglePoint.y - centrePoint.y,\r\n\t\t\t\tradialDistanceFromCenter = Math.sqrt( distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\r\n\r\n\r\n\t\t\tvar angle = Math.PI * 2 + Math.atan2(distanceFromYCenter, distanceFromXCenter);\r\n\r\n\t\t\t//If the segment is in the top left quadrant, we need to add another rotation to the angle\r\n\t\t\tif (distanceFromXCenter < 0 && distanceFromYCenter < 0){\r\n\t\t\t\tangle += Math.PI*2;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tangle: angle,\r\n\t\t\t\tdistance: radialDistanceFromCenter\r\n\t\t\t};\r\n\t\t},\r\n\t\taliasPixel = helpers.aliasPixel = function(pixelWidth){\r\n\t\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\r\n\t\t},\r\n\t\tsplineCurve = helpers.splineCurve = function(FirstPoint,MiddlePoint,AfterPoint,t){\r\n\t\t\t//Props to Rob Spencer at scaled innovation for his post on splining between points\r\n\t\t\t//http://scaledinnovation.com/analytics/splines/aboutSplines.html\r\n\t\t\tvar d01=Math.sqrt(Math.pow(MiddlePoint.x-FirstPoint.x,2)+Math.pow(MiddlePoint.y-FirstPoint.y,2)),\r\n\t\t\t\td12=Math.sqrt(Math.pow(AfterPoint.x-MiddlePoint.x,2)+Math.pow(AfterPoint.y-MiddlePoint.y,2)),\r\n\t\t\t\tfa=t*d01/(d01+d12),// scaling factor for triangle Ta\r\n\t\t\t\tfb=t*d12/(d01+d12);\r\n\t\t\treturn {\r\n\t\t\t\tinner : {\r\n\t\t\t\t\tx : MiddlePoint.x-fa*(AfterPoint.x-FirstPoint.x),\r\n\t\t\t\t\ty : MiddlePoint.y-fa*(AfterPoint.y-FirstPoint.y)\r\n\t\t\t\t},\r\n\t\t\t\touter : {\r\n\t\t\t\t\tx: MiddlePoint.x+fb*(AfterPoint.x-FirstPoint.x),\r\n\t\t\t\t\ty : MiddlePoint.y+fb*(AfterPoint.y-FirstPoint.y)\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tcalculateOrderOfMagnitude = helpers.calculateOrderOfMagnitude = function(val){\r\n\t\t\treturn Math.floor(Math.log(val) / Math.LN10);\r\n\t\t},\r\n\t\tcalculateScaleRange = helpers.calculateScaleRange = function(valuesArray, drawingSize, textSize, startFromZero, integersOnly){\r\n\r\n\t\t\t//Set a minimum step of two - a point at the top of the graph, and a point at the base\r\n\t\t\tvar minSteps = 2,\r\n\t\t\t\tmaxSteps = Math.floor(drawingSize/(textSize * 1.5)),\r\n\t\t\t\tskipFitting = (minSteps >= maxSteps);\r\n\r\n\t\t\t// Filter out null values since these would min() to zero\r\n\t\t\tvar values = [];\r\n\t\t\teach(valuesArray, function( v ){\r\n\t\t\t\tv == null || values.push( v );\r\n\t\t\t});\r\n\t\t\tvar minValue = min(values),\r\n\t\t\t    maxValue = max(values);\r\n\r\n\t\t\t// We need some degree of separation here to calculate the scales if all the values are the same\r\n\t\t\t// Adding/minusing 0.5 will give us a range of 1.\r\n\t\t\tif (maxValue === minValue){\r\n\t\t\t\tmaxValue += 0.5;\r\n\t\t\t\t// So we don't end up with a graph with a negative start value if we've said always start from zero\r\n\t\t\t\tif (minValue >= 0.5 && !startFromZero){\r\n\t\t\t\t\tminValue -= 0.5;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\t// Make up a whole number above the values\r\n\t\t\t\t\tmaxValue += 0.5;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar\tvalueRange = Math.abs(maxValue - minValue),\r\n\t\t\t\trangeOrderOfMagnitude = calculateOrderOfMagnitude(valueRange),\r\n\t\t\t\tgraphMax = Math.ceil(maxValue / (1 * Math.pow(10, rangeOrderOfMagnitude))) * Math.pow(10, rangeOrderOfMagnitude),\r\n\t\t\t\tgraphMin = (startFromZero) ? 0 : Math.floor(minValue / (1 * Math.pow(10, rangeOrderOfMagnitude))) * Math.pow(10, rangeOrderOfMagnitude),\r\n\t\t\t\tgraphRange = graphMax - graphMin,\r\n\t\t\t\tstepValue = Math.pow(10, rangeOrderOfMagnitude),\r\n\t\t\t\tnumberOfSteps = Math.round(graphRange / stepValue);\r\n\r\n\t\t\t//If we have more space on the graph we'll use it to give more definition to the data\r\n\t\t\twhile((numberOfSteps > maxSteps || (numberOfSteps * 2) < maxSteps) && !skipFitting) {\r\n\t\t\t\tif(numberOfSteps > maxSteps){\r\n\t\t\t\t\tstepValue *=2;\r\n\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\r\n\t\t\t\t\t// Don't ever deal with a decimal number of steps - cancel fitting and just use the minimum number of steps.\r\n\t\t\t\t\tif (numberOfSteps % 1 !== 0){\r\n\t\t\t\t\t\tskipFitting = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//We can fit in double the amount of scale points on the scale\r\n\t\t\t\telse{\r\n\t\t\t\t\t//If user has declared ints only, and the step value isn't a decimal\r\n\t\t\t\t\tif (integersOnly && rangeOrderOfMagnitude >= 0){\r\n\t\t\t\t\t\t//If the user has said integers only, we need to check that making the scale more granular wouldn't make it a float\r\n\t\t\t\t\t\tif(stepValue/2 % 1 === 0){\r\n\t\t\t\t\t\t\tstepValue /=2;\r\n\t\t\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//If it would make it a float break out of the loop\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//If the scale doesn't have to be an int, make the scale more granular anyway.\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tstepValue /=2;\r\n\t\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (skipFitting){\r\n\t\t\t\tnumberOfSteps = minSteps;\r\n\t\t\t\tstepValue = graphRange / numberOfSteps;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsteps : numberOfSteps,\r\n\t\t\t\tstepValue : stepValue,\r\n\t\t\t\tmin : graphMin,\r\n\t\t\t\tmax\t: graphMin + (numberOfSteps * stepValue)\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\t/* jshint ignore:start */\r\n\t\t// Blows up jshint errors based on the new Function constructor\r\n\t\t//Templating methods\r\n\t\t//Javascript micro templating by John Resig - source at http://ejohn.org/blog/javascript-micro-templating/\r\n\t\ttemplate = helpers.template = function(templateString, valuesObject){\r\n\r\n\t\t\t// If templateString is function rather than string-template - call the function for valuesObject\r\n\r\n\t\t\tif(templateString instanceof Function){\r\n\t\t\t \treturn templateString(valuesObject);\r\n\t\t \t}\r\n\r\n\t\t\tvar cache = {};\r\n\t\t\tfunction tmpl(str, data){\r\n\t\t\t\t// Figure out if we're getting a template, or if we need to\r\n\t\t\t\t// load the template - and be sure to cache the result.\r\n\t\t\t\tvar fn = !/\\W/.test(str) ?\r\n\t\t\t\tcache[str] = cache[str] :\r\n\r\n\t\t\t\t// Generate a reusable function that will serve as a template\r\n\t\t\t\t// generator (and which will be cached).\r\n\t\t\t\tnew Function(\"obj\",\r\n\t\t\t\t\t\"var p=[],print=function(){p.push.apply(p,arguments);};\" +\r\n\r\n\t\t\t\t\t// Introduce the data as local variables using with(){}\r\n\t\t\t\t\t\"with(obj){p.push('\" +\r\n\r\n\t\t\t\t\t// Convert the template into pure JavaScript\r\n\t\t\t\t\tstr\r\n\t\t\t\t\t\t.replace(/[\\r\\t\\n]/g, \" \")\r\n\t\t\t\t\t\t.split(\"<%\").join(\"\\t\")\r\n\t\t\t\t\t\t.replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\r\n\t\t\t\t\t\t.replace(/\\t=(.*?)%>/g, \"',$1,'\")\r\n\t\t\t\t\t\t.split(\"\\t\").join(\"');\")\r\n\t\t\t\t\t\t.split(\"%>\").join(\"p.push('\")\r\n\t\t\t\t\t\t.split(\"\\r\").join(\"\\\\'\") +\r\n\t\t\t\t\t\"');}return p.join('');\"\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Provide some basic currying to the user\r\n\t\t\t\treturn data ? fn( data ) : fn;\r\n\t\t\t}\r\n\t\t\treturn tmpl(templateString,valuesObject);\r\n\t\t},\r\n\t\t/* jshint ignore:end */\r\n\t\tgenerateLabels = helpers.generateLabels = function(templateString,numberOfSteps,graphMin,stepValue){\r\n\t\t\tvar labelsArray = new Array(numberOfSteps);\r\n\t\t\tif (templateString){\r\n\t\t\t\teach(labelsArray,function(val,index){\r\n\t\t\t\t\tlabelsArray[index] = template(templateString,{value: (graphMin + (stepValue*(index+1)))});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn labelsArray;\r\n\t\t},\r\n\t\t//--Animation methods\r\n\t\t//Easing functions adapted from Robert Penner's easing equations\r\n\t\t//http://www.robertpenner.com/easing/\r\n\t\teasingEffects = helpers.easingEffects = {\r\n\t\t\tlinear: function (t) {\r\n\t\t\t\treturn t;\r\n\t\t\t},\r\n\t\t\teaseInQuad: function (t) {\r\n\t\t\t\treturn t * t;\r\n\t\t\t},\r\n\t\t\teaseOutQuad: function (t) {\r\n\t\t\t\treturn -1 * t * (t - 2);\r\n\t\t\t},\r\n\t\t\teaseInOutQuad: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1){\r\n\t\t\t\t\treturn 1 / 2 * t * t;\r\n\t\t\t\t}\r\n\t\t\t\treturn -1 / 2 * ((--t) * (t - 2) - 1);\r\n\t\t\t},\r\n\t\t\teaseInCubic: function (t) {\r\n\t\t\t\treturn t * t * t;\r\n\t\t\t},\r\n\t\t\teaseOutCubic: function (t) {\r\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * t + 1);\r\n\t\t\t},\r\n\t\t\teaseInOutCubic: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1){\r\n\t\t\t\t\treturn 1 / 2 * t * t * t;\r\n\t\t\t\t}\r\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * t + 2);\r\n\t\t\t},\r\n\t\t\teaseInQuart: function (t) {\r\n\t\t\t\treturn t * t * t * t;\r\n\t\t\t},\r\n\t\t\teaseOutQuart: function (t) {\r\n\t\t\t\treturn -1 * ((t = t / 1 - 1) * t * t * t - 1);\r\n\t\t\t},\r\n\t\t\teaseInOutQuart: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1){\r\n\t\t\t\t\treturn 1 / 2 * t * t * t * t;\r\n\t\t\t\t}\r\n\t\t\t\treturn -1 / 2 * ((t -= 2) * t * t * t - 2);\r\n\t\t\t},\r\n\t\t\teaseInQuint: function (t) {\r\n\t\t\t\treturn 1 * (t /= 1) * t * t * t * t;\r\n\t\t\t},\r\n\t\t\teaseOutQuint: function (t) {\r\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\r\n\t\t\t},\r\n\t\t\teaseInOutQuint: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1){\r\n\t\t\t\t\treturn 1 / 2 * t * t * t * t * t;\r\n\t\t\t\t}\r\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * t * t * t + 2);\r\n\t\t\t},\r\n\t\t\teaseInSine: function (t) {\r\n\t\t\t\treturn -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\r\n\t\t\t},\r\n\t\t\teaseOutSine: function (t) {\r\n\t\t\t\treturn 1 * Math.sin(t / 1 * (Math.PI / 2));\r\n\t\t\t},\r\n\t\t\teaseInOutSine: function (t) {\r\n\t\t\t\treturn -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\r\n\t\t\t},\r\n\t\t\teaseInExpo: function (t) {\r\n\t\t\t\treturn (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\r\n\t\t\t},\r\n\t\t\teaseOutExpo: function (t) {\r\n\t\t\t\treturn (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\r\n\t\t\t},\r\n\t\t\teaseInOutExpo: function (t) {\r\n\t\t\t\tif (t === 0){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (t === 1){\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif ((t /= 1 / 2) < 1){\r\n\t\t\t\t\treturn 1 / 2 * Math.pow(2, 10 * (t - 1));\r\n\t\t\t\t}\r\n\t\t\t\treturn 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\r\n\t\t\t},\r\n\t\t\teaseInCirc: function (t) {\r\n\t\t\t\tif (t >= 1){\r\n\t\t\t\t\treturn t;\r\n\t\t\t\t}\r\n\t\t\t\treturn -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\r\n\t\t\t},\r\n\t\t\teaseOutCirc: function (t) {\r\n\t\t\t\treturn 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\r\n\t\t\t},\r\n\t\t\teaseInOutCirc: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1){\r\n\t\t\t\t\treturn -1 / 2 * (Math.sqrt(1 - t * t) - 1);\r\n\t\t\t\t}\r\n\t\t\t\treturn 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\r\n\t\t\t},\r\n\t\t\teaseInElastic: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\tvar p = 0;\r\n\t\t\t\tvar a = 1;\r\n\t\t\t\tif (t === 0){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tif ((t /= 1) == 1){\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (!p){\r\n\t\t\t\t\tp = 1 * 0.3;\r\n\t\t\t\t}\r\n\t\t\t\tif (a < Math.abs(1)) {\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\ts = p / 4;\r\n\t\t\t\t} else{\r\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t\t\t}\r\n\t\t\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\r\n\t\t\t},\r\n\t\t\teaseOutElastic: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\tvar p = 0;\r\n\t\t\t\tvar a = 1;\r\n\t\t\t\tif (t === 0){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tif ((t /= 1) == 1){\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (!p){\r\n\t\t\t\t\tp = 1 * 0.3;\r\n\t\t\t\t}\r\n\t\t\t\tif (a < Math.abs(1)) {\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\ts = p / 4;\r\n\t\t\t\t} else{\r\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t\t\t}\r\n\t\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\r\n\t\t\t},\r\n\t\t\teaseInOutElastic: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\tvar p = 0;\r\n\t\t\t\tvar a = 1;\r\n\t\t\t\tif (t === 0){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tif ((t /= 1 / 2) == 2){\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (!p){\r\n\t\t\t\t\tp = 1 * (0.3 * 1.5);\r\n\t\t\t\t}\r\n\t\t\t\tif (a < Math.abs(1)) {\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\ts = p / 4;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t\t\t}\r\n\t\t\t\tif (t < 1){\r\n\t\t\t\t\treturn -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));}\r\n\t\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\r\n\t\t\t},\r\n\t\t\teaseInBack: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\treturn 1 * (t /= 1) * t * ((s + 1) * t - s);\r\n\t\t\t},\r\n\t\t\teaseOutBack: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\r\n\t\t\t},\r\n\t\t\teaseInOutBack: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\tif ((t /= 1 / 2) < 1){\r\n\t\t\t\t\treturn 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\r\n\t\t\t\t}\r\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\r\n\t\t\t},\r\n\t\t\teaseInBounce: function (t) {\r\n\t\t\t\treturn 1 - easingEffects.easeOutBounce(1 - t);\r\n\t\t\t},\r\n\t\t\teaseOutBounce: function (t) {\r\n\t\t\t\tif ((t /= 1) < (1 / 2.75)) {\r\n\t\t\t\t\treturn 1 * (7.5625 * t * t);\r\n\t\t\t\t} else if (t < (2 / 2.75)) {\r\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75);\r\n\t\t\t\t} else if (t < (2.5 / 2.75)) {\r\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\teaseInOutBounce: function (t) {\r\n\t\t\t\tif (t < 1 / 2){\r\n\t\t\t\t\treturn easingEffects.easeInBounce(t * 2) * 0.5;\r\n\t\t\t\t}\r\n\t\t\t\treturn easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\t\trequestAnimFrame = helpers.requestAnimFrame = (function(){\r\n\t\t\treturn window.requestAnimationFrame ||\r\n\t\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\t\twindow.msRequestAnimationFrame ||\r\n\t\t\t\tfunction(callback) {\r\n\t\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\r\n\t\t\t\t};\r\n\t\t})(),\r\n\t\tcancelAnimFrame = helpers.cancelAnimFrame = (function(){\r\n\t\t\treturn window.cancelAnimationFrame ||\r\n\t\t\t\twindow.webkitCancelAnimationFrame ||\r\n\t\t\t\twindow.mozCancelAnimationFrame ||\r\n\t\t\t\twindow.oCancelAnimationFrame ||\r\n\t\t\t\twindow.msCancelAnimationFrame ||\r\n\t\t\t\tfunction(callback) {\r\n\t\t\t\t\treturn window.clearTimeout(callback, 1000 / 60);\r\n\t\t\t\t};\r\n\t\t})(),\r\n\t\tanimationLoop = helpers.animationLoop = function(callback,totalSteps,easingString,onProgress,onComplete,chartInstance){\r\n\r\n\t\t\tvar currentStep = 0,\r\n\t\t\t\teasingFunction = easingEffects[easingString] || easingEffects.linear;\r\n\r\n\t\t\tvar animationFrame = function(){\r\n\t\t\t\tcurrentStep++;\r\n\t\t\t\tvar stepDecimal = currentStep/totalSteps;\r\n\t\t\t\tvar easeDecimal = easingFunction(stepDecimal);\r\n\r\n\t\t\t\tcallback.call(chartInstance,easeDecimal,stepDecimal, currentStep);\r\n\t\t\t\tonProgress.call(chartInstance,easeDecimal,stepDecimal);\r\n\t\t\t\tif (currentStep < totalSteps){\r\n\t\t\t\t\tchartInstance.animationFrame = requestAnimFrame(animationFrame);\r\n\t\t\t\t} else{\r\n\t\t\t\t\tonComplete.apply(chartInstance);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\trequestAnimFrame(animationFrame);\r\n\t\t},\r\n\t\t//-- DOM methods\r\n\t\tgetRelativePosition = helpers.getRelativePosition = function(evt){\r\n\t\t\tvar mouseX, mouseY;\r\n\t\t\tvar e = evt.originalEvent || evt,\r\n\t\t\t\tcanvas = evt.currentTarget || evt.srcElement,\r\n\t\t\t\tboundingRect = canvas.getBoundingClientRect();\r\n\r\n\t\t\tif (e.touches){\r\n\t\t\t\tmouseX = e.touches[0].clientX - boundingRect.left;\r\n\t\t\t\tmouseY = e.touches[0].clientY - boundingRect.top;\r\n\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tmouseX = e.clientX - boundingRect.left;\r\n\t\t\t\tmouseY = e.clientY - boundingRect.top;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tx : mouseX,\r\n\t\t\t\ty : mouseY\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\taddEvent = helpers.addEvent = function(node,eventType,method){\r\n\t\t\tif (node.addEventListener){\r\n\t\t\t\tnode.addEventListener(eventType,method);\r\n\t\t\t} else if (node.attachEvent){\r\n\t\t\t\tnode.attachEvent(\"on\"+eventType, method);\r\n\t\t\t} else {\r\n\t\t\t\tnode[\"on\"+eventType] = method;\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveEvent = helpers.removeEvent = function(node, eventType, handler){\r\n\t\t\tif (node.removeEventListener){\r\n\t\t\t\tnode.removeEventListener(eventType, handler, false);\r\n\t\t\t} else if (node.detachEvent){\r\n\t\t\t\tnode.detachEvent(\"on\"+eventType,handler);\r\n\t\t\t} else{\r\n\t\t\t\tnode[\"on\" + eventType] = noop;\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindEvents = helpers.bindEvents = function(chartInstance, arrayOfEvents, handler){\r\n\t\t\t// Create the events object if it's not already present\r\n\t\t\tif (!chartInstance.events) chartInstance.events = {};\r\n\r\n\t\t\teach(arrayOfEvents,function(eventName){\r\n\t\t\t\tchartInstance.events[eventName] = function(){\r\n\t\t\t\t\thandler.apply(chartInstance, arguments);\r\n\t\t\t\t};\r\n\t\t\t\taddEvent(chartInstance.chart.canvas,eventName,chartInstance.events[eventName]);\r\n\t\t\t});\r\n\t\t},\r\n\t\tunbindEvents = helpers.unbindEvents = function (chartInstance, arrayOfEvents) {\r\n\t\t\teach(arrayOfEvents, function(handler,eventName){\r\n\t\t\t\tremoveEvent(chartInstance.chart.canvas, eventName, handler);\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetMaximumWidth = helpers.getMaximumWidth = function(domNode){\r\n\t\t\tvar container = domNode.parentNode,\r\n\t\t\t    padding = parseInt(getStyle(container, 'padding-left')) + parseInt(getStyle(container, 'padding-right'));\r\n\t\t\t// TODO = check cross browser stuff with this.\r\n\t\t\treturn container ? container.clientWidth - padding : 0;\r\n\t\t},\r\n\t\tgetMaximumHeight = helpers.getMaximumHeight = function(domNode){\r\n\t\t\tvar container = domNode.parentNode,\r\n\t\t\t    padding = parseInt(getStyle(container, 'padding-bottom')) + parseInt(getStyle(container, 'padding-top'));\r\n\t\t\t// TODO = check cross browser stuff with this.\r\n\t\t\treturn container ? container.clientHeight - padding : 0;\r\n\t\t},\r\n\t\tgetStyle = helpers.getStyle = function (el, property) {\r\n\t\t\treturn el.currentStyle ?\r\n\t\t\t\tel.currentStyle[property] :\r\n\t\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\r\n\t\t},\r\n\t\tgetMaximumSize = helpers.getMaximumSize = helpers.getMaximumWidth, // legacy support\r\n\t\tretinaScale = helpers.retinaScale = function(chart){\r\n\t\t\tvar ctx = chart.ctx,\r\n\t\t\t\twidth = chart.canvas.width,\r\n\t\t\t\theight = chart.canvas.height;\r\n\r\n\t\t\tif (window.devicePixelRatio) {\r\n\t\t\t\tctx.canvas.style.width = width + \"px\";\r\n\t\t\t\tctx.canvas.style.height = height + \"px\";\r\n\t\t\t\tctx.canvas.height = height * window.devicePixelRatio;\r\n\t\t\t\tctx.canvas.width = width * window.devicePixelRatio;\r\n\t\t\t\tctx.scale(window.devicePixelRatio, window.devicePixelRatio);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//-- Canvas methods\r\n\t\tclear = helpers.clear = function(chart){\r\n\t\t\tchart.ctx.clearRect(0,0,chart.width,chart.height);\r\n\t\t},\r\n\t\tfontString = helpers.fontString = function(pixelSize,fontStyle,fontFamily){\r\n\t\t\treturn fontStyle + \" \" + pixelSize+\"px \" + fontFamily;\r\n\t\t},\r\n\t\tlongestText = helpers.longestText = function(ctx,font,arrayOfStrings){\r\n\t\t\tctx.font = font;\r\n\t\t\tvar longest = 0;\r\n\t\t\teach(arrayOfStrings,function(string){\r\n\t\t\t\tvar textWidth = ctx.measureText(string).width;\r\n\t\t\t\tlongest = (textWidth > longest) ? textWidth : longest;\r\n\t\t\t});\r\n\t\t\treturn longest;\r\n\t\t},\r\n\t\tdrawRoundedRectangle = helpers.drawRoundedRectangle = function(ctx,x,y,width,height,radius){\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x + radius, y);\r\n\t\t\tctx.lineTo(x + width - radius, y);\r\n\t\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n\t\t\tctx.lineTo(x + width, y + height - radius);\r\n\t\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n\t\t\tctx.lineTo(x + radius, y + height);\r\n\t\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n\t\t\tctx.lineTo(x, y + radius);\r\n\t\t\tctx.quadraticCurveTo(x, y, x + radius, y);\r\n\t\t\tctx.closePath();\r\n\t\t};\r\n\r\n\r\n\t//Store a reference to each instance - allowing us to globally resize chart instances on window resize.\r\n\t//Destroy method on the chart will remove the instance of the chart from this reference.\r\n\tChart.instances = {};\r\n\r\n\tChart.Type = function(data,options,chart){\r\n\t\tthis.options = options;\r\n\t\tthis.chart = chart;\r\n\t\tthis.id = uid();\r\n\t\t//Add the chart instance to the global namespace\r\n\t\tChart.instances[this.id] = this;\r\n\r\n\t\t// Initialize is always called when a chart type is created\r\n\t\t// By default it is a no op, but it should be extended\r\n\t\tif (options.responsive){\r\n\t\t\tthis.resize();\r\n\t\t}\r\n\t\tthis.initialize.call(this,data);\r\n\t};\r\n\r\n\t//Core methods that'll be a part of every chart type\r\n\textend(Chart.Type.prototype,{\r\n\t\tinitialize : function(){return this;},\r\n\t\tclear : function(){\r\n\t\t\tclear(this.chart);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstop : function(){\r\n\t\t\t// Stops any current animation loop occuring\r\n\t\t\tChart.animationService.cancelAnimation(this);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tresize : function(callback){\r\n\t\t\tthis.stop();\r\n\t\t\tvar canvas = this.chart.canvas,\r\n\t\t\t\tnewWidth = getMaximumWidth(this.chart.canvas),\r\n\t\t\t\tnewHeight = this.options.maintainAspectRatio ? newWidth / this.chart.aspectRatio : getMaximumHeight(this.chart.canvas);\r\n\r\n\t\t\tcanvas.width = this.chart.width = newWidth;\r\n\t\t\tcanvas.height = this.chart.height = newHeight;\r\n\r\n\t\t\tretinaScale(this.chart);\r\n\r\n\t\t\tif (typeof callback === \"function\"){\r\n\t\t\t\tcallback.apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\treflow : noop,\r\n\t\trender : function(reflow){\r\n\t\t\tif (reflow){\r\n\t\t\t\tthis.reflow();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.options.animation && !reflow){\r\n\t\t\t\tvar animation = new Chart.Animation();\r\n\t\t\t\tanimation.numSteps = this.options.animationSteps;\r\n\t\t\t\tanimation.easing = this.options.animationEasing;\r\n\t\t\t\t\r\n\t\t\t\t// render function\r\n\t\t\t\tanimation.render = function(chartInstance, animationObject) {\r\n\t\t\t\t\tvar easingFunction = helpers.easingEffects[animationObject.easing];\r\n\t\t\t\t\tvar stepDecimal = animationObject.currentStep / animationObject.numSteps;\r\n\t\t\t\t\tvar easeDecimal = easingFunction(stepDecimal);\r\n\t\t\t\t\t\r\n\t\t\t\t\tchartInstance.draw(easeDecimal, stepDecimal, animationObject.currentStep);\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// user events\r\n\t\t\t\tanimation.onAnimationProgress = this.options.onAnimationProgress;\r\n\t\t\t\tanimation.onAnimationComplete = this.options.onAnimationComplete;\r\n\t\t\t\t\r\n\t\t\t\tChart.animationService.addAnimation(this, animation);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.draw();\r\n\t\t\t\tthis.options.onAnimationComplete.call(this);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tgenerateLegend : function(){\r\n\t\t\treturn helpers.template(this.options.legendTemplate, this);\r\n\t\t},\r\n\t\tdestroy : function(){\r\n\t\t\tthis.stop();\r\n\t\t\tthis.clear();\r\n\t\t\tunbindEvents(this, this.events);\r\n\t\t\tvar canvas = this.chart.canvas;\r\n\r\n\t\t\t// Reset canvas height/width attributes starts a fresh with the canvas context\r\n\t\t\tcanvas.width = this.chart.width;\r\n\t\t\tcanvas.height = this.chart.height;\r\n\r\n\t\t\t// < IE9 doesn't support removeProperty\r\n\t\t\tif (canvas.style.removeProperty) {\r\n\t\t\t\tcanvas.style.removeProperty('width');\r\n\t\t\t\tcanvas.style.removeProperty('height');\r\n\t\t\t} else {\r\n\t\t\t\tcanvas.style.removeAttribute('width');\r\n\t\t\t\tcanvas.style.removeAttribute('height');\r\n\t\t\t}\r\n\r\n\t\t\tdelete Chart.instances[this.id];\r\n\t\t},\r\n\t\tshowTooltip : function(ChartElements, forceRedraw){\r\n\t\t\t// Only redraw the chart if we've actually changed what we're hovering on.\r\n\t\t\tif (typeof this.activeElements === 'undefined') this.activeElements = [];\r\n\r\n\t\t\tvar isChanged = (function(Elements){\r\n\t\t\t\tvar changed = false;\r\n\r\n\t\t\t\tif (Elements.length !== this.activeElements.length){\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t\treturn changed;\r\n\t\t\t\t}\r\n\r\n\t\t\t\teach(Elements, function(element, index){\r\n\t\t\t\t\tif (element !== this.activeElements[index]){\r\n\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\treturn changed;\r\n\t\t\t}).call(this, ChartElements);\r\n\r\n\t\t\tif (!isChanged && !forceRedraw){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.activeElements = ChartElements;\r\n\t\t\t}\r\n\t\t\tthis.draw();\r\n\t\t\tif(this.options.customTooltips){\r\n\t\t\t\tthis.options.customTooltips(false);\r\n\t\t\t}\r\n\t\t\tif (ChartElements.length > 0){\r\n\t\t\t\t// If we have multiple datasets, show a MultiTooltip for all of the data points at that index\r\n\t\t\t\tif (this.datasets && this.datasets.length > 1) {\r\n\t\t\t\t\tvar dataArray,\r\n\t\t\t\t\t\tdataIndex;\r\n\r\n\t\t\t\t\tfor (var i = this.datasets.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tdataArray = this.datasets[i].points || this.datasets[i].bars || this.datasets[i].segments;\r\n\t\t\t\t\t\tdataIndex = indexOf(dataArray, ChartElements[0]);\r\n\t\t\t\t\t\tif (dataIndex !== -1){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tooltipLabels = [],\r\n\t\t\t\t\t\ttooltipColors = [],\r\n\t\t\t\t\t\tmedianPosition = (function(index) {\r\n\r\n\t\t\t\t\t\t\t// Get all the points at that particular index\r\n\t\t\t\t\t\t\tvar Elements = [],\r\n\t\t\t\t\t\t\t\tdataCollection,\r\n\t\t\t\t\t\t\t\txPositions = [],\r\n\t\t\t\t\t\t\t\tyPositions = [],\r\n\t\t\t\t\t\t\t\txMax,\r\n\t\t\t\t\t\t\t\tyMax,\r\n\t\t\t\t\t\t\t\txMin,\r\n\t\t\t\t\t\t\t\tyMin;\r\n\t\t\t\t\t\t\thelpers.each(this.datasets, function(dataset){\r\n\t\t\t\t\t\t\t\tdataCollection = dataset.points || dataset.bars || dataset.segments;\r\n\t\t\t\t\t\t\t\tif (dataCollection[dataIndex] && dataCollection[dataIndex].hasValue()){\r\n\t\t\t\t\t\t\t\t\tElements.push(dataCollection[dataIndex]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\thelpers.each(Elements, function(element) {\r\n\t\t\t\t\t\t\t\txPositions.push(element.x);\r\n\t\t\t\t\t\t\t\tyPositions.push(element.y);\r\n\r\n\r\n\t\t\t\t\t\t\t\t//Include any colour information about the element\r\n\t\t\t\t\t\t\t\ttooltipLabels.push(helpers.template(this.options.multiTooltipTemplate, element));\r\n\t\t\t\t\t\t\t\ttooltipColors.push({\r\n\t\t\t\t\t\t\t\t\tfill: element._saved.fillColor || element.fillColor,\r\n\t\t\t\t\t\t\t\t\tstroke: element._saved.strokeColor || element.strokeColor\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t}, this);\r\n\r\n\t\t\t\t\t\t\tyMin = min(yPositions);\r\n\t\t\t\t\t\t\tyMax = max(yPositions);\r\n\r\n\t\t\t\t\t\t\txMin = min(xPositions);\r\n\t\t\t\t\t\t\txMax = max(xPositions);\r\n\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tx: (xMin > this.chart.width/2) ? xMin : xMax,\r\n\t\t\t\t\t\t\t\ty: (yMin + yMax)/2\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}).call(this, dataIndex);\r\n\r\n\t\t\t\t\tnew Chart.MultiTooltip({\r\n\t\t\t\t\t\tx: medianPosition.x,\r\n\t\t\t\t\t\ty: medianPosition.y,\r\n\t\t\t\t\t\txPadding: this.options.tooltipXPadding,\r\n\t\t\t\t\t\tyPadding: this.options.tooltipYPadding,\r\n\t\t\t\t\t\txOffset: this.options.tooltipXOffset,\r\n\t\t\t\t\t\tfillColor: this.options.tooltipFillColor,\r\n\t\t\t\t\t\ttextColor: this.options.tooltipFontColor,\r\n\t\t\t\t\t\tfontFamily: this.options.tooltipFontFamily,\r\n\t\t\t\t\t\tfontStyle: this.options.tooltipFontStyle,\r\n\t\t\t\t\t\tfontSize: this.options.tooltipFontSize,\r\n\t\t\t\t\t\ttitleTextColor: this.options.tooltipTitleFontColor,\r\n\t\t\t\t\t\ttitleFontFamily: this.options.tooltipTitleFontFamily,\r\n\t\t\t\t\t\ttitleFontStyle: this.options.tooltipTitleFontStyle,\r\n\t\t\t\t\t\ttitleFontSize: this.options.tooltipTitleFontSize,\r\n\t\t\t\t\t\tcornerRadius: this.options.tooltipCornerRadius,\r\n\t\t\t\t\t\tlabels: tooltipLabels,\r\n\t\t\t\t\t\tlegendColors: tooltipColors,\r\n\t\t\t\t\t\tlegendColorBackground : this.options.multiTooltipKeyBackground,\r\n\t\t\t\t\t\ttitle: template(this.options.tooltipTitleTemplate,ChartElements[0]),\r\n\t\t\t\t\t\tchart: this.chart,\r\n\t\t\t\t\t\tctx: this.chart.ctx,\r\n\t\t\t\t\t\tcustom: this.options.customTooltips\r\n\t\t\t\t\t}).draw();\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\teach(ChartElements, function(Element) {\r\n\t\t\t\t\t\tvar tooltipPosition = Element.tooltipPosition();\r\n\t\t\t\t\t\tnew Chart.Tooltip({\r\n\t\t\t\t\t\t\tx: Math.round(tooltipPosition.x),\r\n\t\t\t\t\t\t\ty: Math.round(tooltipPosition.y),\r\n\t\t\t\t\t\t\txPadding: this.options.tooltipXPadding,\r\n\t\t\t\t\t\t\tyPadding: this.options.tooltipYPadding,\r\n\t\t\t\t\t\t\tfillColor: this.options.tooltipFillColor,\r\n\t\t\t\t\t\t\ttextColor: this.options.tooltipFontColor,\r\n\t\t\t\t\t\t\tfontFamily: this.options.tooltipFontFamily,\r\n\t\t\t\t\t\t\tfontStyle: this.options.tooltipFontStyle,\r\n\t\t\t\t\t\t\tfontSize: this.options.tooltipFontSize,\r\n\t\t\t\t\t\t\tcaretHeight: this.options.tooltipCaretSize,\r\n\t\t\t\t\t\t\tcornerRadius: this.options.tooltipCornerRadius,\r\n\t\t\t\t\t\t\ttext: template(this.options.tooltipTemplate, Element),\r\n\t\t\t\t\t\t\tchart: this.chart,\r\n\t\t\t\t\t\t\tcustom: this.options.customTooltips\r\n\t\t\t\t\t\t}).draw();\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\ttoBase64Image : function(){\r\n\t\t\treturn this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments);\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Type.extend = function(extensions){\r\n\r\n\t\tvar parent = this;\r\n\r\n\t\tvar ChartType = function(){\r\n\t\t\treturn parent.apply(this,arguments);\r\n\t\t};\r\n\r\n\t\t//Copy the prototype object of the this class\r\n\t\tChartType.prototype = clone(parent.prototype);\r\n\t\t//Now overwrite some of the properties in the base class with the new extensions\r\n\t\textend(ChartType.prototype, extensions);\r\n\r\n\t\tChartType.extend = Chart.Type.extend;\r\n\r\n\t\tif (extensions.name || parent.prototype.name){\r\n\r\n\t\t\tvar chartName = extensions.name || parent.prototype.name;\r\n\t\t\t//Assign any potential default values of the new chart type\r\n\r\n\t\t\t//If none are defined, we'll use a clone of the chart type this is being extended from.\r\n\t\t\t//I.e. if we extend a line chart, we'll use the defaults from the line chart if our new chart\r\n\t\t\t//doesn't define some defaults of their own.\r\n\r\n\t\t\tvar baseDefaults = (Chart.defaults[parent.prototype.name]) ? clone(Chart.defaults[parent.prototype.name]) : {};\r\n\r\n\t\t\tChart.defaults[chartName] = extend(baseDefaults,extensions.defaults);\r\n\r\n\t\t\tChart.types[chartName] = ChartType;\r\n\r\n\t\t\t//Register this new chart type in the Chart prototype\r\n\t\t\tChart.prototype[chartName] = function(data,options){\r\n\t\t\t\tvar config = merge(Chart.defaults.global, Chart.defaults[chartName], options || {});\r\n\t\t\t\treturn new ChartType(data,config,this);\r\n\t\t\t};\r\n\t\t} else{\r\n\t\t\twarn(\"Name not provided for this chart, so it hasn't been registered\");\r\n\t\t}\r\n\t\treturn parent;\r\n\t};\r\n\r\n\tChart.Element = function(configuration){\r\n\t\textend(this,configuration);\r\n\t\tthis.initialize.apply(this,arguments);\r\n\t\tthis.save();\r\n\t};\r\n\textend(Chart.Element.prototype,{\r\n\t\tinitialize : function(){},\r\n\t\trestore : function(props){\r\n\t\t\tif (!props){\r\n\t\t\t\textend(this,this._saved);\r\n\t\t\t} else {\r\n\t\t\t\teach(props,function(key){\r\n\t\t\t\t\tthis[key] = this._saved[key];\r\n\t\t\t\t},this);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tsave : function(){\r\n\t\t\tthis._saved = clone(this);\r\n\t\t\tdelete this._saved._saved;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tupdate : function(newProps){\r\n\t\t\teach(newProps,function(value,key){\r\n\t\t\t\tthis._saved[key] = this[key];\r\n\t\t\t\tthis[key] = value;\r\n\t\t\t},this);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\ttransition : function(props,ease){\r\n\t\t\teach(props,function(value,key){\r\n\t\t\t\tthis[key] = ((value - this._saved[key]) * ease) + this._saved[key];\r\n\t\t\t},this);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\ttooltipPosition : function(){\r\n\t\t\treturn {\r\n\t\t\t\tx : this.x,\r\n\t\t\t\ty : this.y\r\n\t\t\t};\r\n\t\t},\r\n\t\thasValue: function(){\r\n\t\t\treturn isNumber(this.value);\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Element.extend = inherits;\r\n\r\n\r\n\tChart.Point = Chart.Element.extend({\r\n\t\tdisplay: true,\r\n\t\tinRange: function(chartX,chartY){\r\n\t\t\tvar hitDetectionRange = this.hitDetectionRadius + this.radius;\r\n\t\t\treturn ((Math.pow(chartX-this.x, 2)+Math.pow(chartY-this.y, 2)) < Math.pow(hitDetectionRange,2));\r\n\t\t},\r\n\t\tdraw : function(){\r\n\t\t\tif (this.display){\r\n\t\t\t\tvar ctx = this.ctx;\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\tctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);\r\n\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\tctx.strokeStyle = this.strokeColor;\r\n\t\t\t\tctx.lineWidth = this.strokeWidth;\r\n\r\n\t\t\t\tctx.fillStyle = this.fillColor;\r\n\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//Quick debug for bezier curve splining\r\n\t\t\t//Highlights control points and the line between them.\r\n\t\t\t//Handy for dev - stripped in the min version.\r\n\r\n\t\t\t// ctx.save();\r\n\t\t\t// ctx.fillStyle = \"black\";\r\n\t\t\t// ctx.strokeStyle = \"black\"\r\n\t\t\t// ctx.beginPath();\r\n\t\t\t// ctx.arc(this.controlPoints.inner.x,this.controlPoints.inner.y, 2, 0, Math.PI*2);\r\n\t\t\t// ctx.fill();\r\n\r\n\t\t\t// ctx.beginPath();\r\n\t\t\t// ctx.arc(this.controlPoints.outer.x,this.controlPoints.outer.y, 2, 0, Math.PI*2);\r\n\t\t\t// ctx.fill();\r\n\r\n\t\t\t// ctx.moveTo(this.controlPoints.inner.x,this.controlPoints.inner.y);\r\n\t\t\t// ctx.lineTo(this.x, this.y);\r\n\t\t\t// ctx.lineTo(this.controlPoints.outer.x,this.controlPoints.outer.y);\r\n\t\t\t// ctx.stroke();\r\n\r\n\t\t\t// ctx.restore();\r\n\r\n\r\n\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Arc = Chart.Element.extend({\r\n\t\tinRange : function(chartX,chartY){\r\n\r\n\t\t\tvar pointRelativePosition = helpers.getAngleFromPoint(this, {\r\n\t\t\t\tx: chartX,\r\n\t\t\t\ty: chartY\r\n\t\t\t});\r\n\r\n\t\t\t// Normalize all angles to 0 - 2*PI (0 - 360°)\r\n\t\t\tvar pointRelativeAngle = pointRelativePosition.angle % (Math.PI * 2),\r\n\t\t\t    startAngle = (Math.PI * 2 + this.startAngle) % (Math.PI * 2),\r\n\t\t\t    endAngle = (Math.PI * 2 + this.endAngle) % (Math.PI * 2) || 360;\r\n\r\n\t\t\t// Calculate wether the pointRelativeAngle is between the start and the end angle\r\n\t\t\tvar betweenAngles = (endAngle < startAngle) ?\r\n\t\t\t\tpointRelativeAngle <= endAngle || pointRelativeAngle >= startAngle:\r\n\t\t\t\tpointRelativeAngle >= startAngle && pointRelativeAngle <= endAngle;\r\n\r\n\t\t\t//Check if within the range of the open/close angle\r\n\t\t\tvar withinRadius = (pointRelativePosition.distance >= this.innerRadius && pointRelativePosition.distance <= this.outerRadius);\r\n\r\n\t\t\treturn (betweenAngles && withinRadius);\r\n\t\t\t//Ensure within the outside of the arc centre, but inside arc outer\r\n\t\t},\r\n\t\ttooltipPosition : function(){\r\n\t\t\tvar centreAngle = this.startAngle + ((this.endAngle - this.startAngle) / 2),\r\n\t\t\t\trangeFromCentre = (this.outerRadius - this.innerRadius) / 2 + this.innerRadius;\r\n\t\t\treturn {\r\n\t\t\t\tx : this.x + (Math.cos(centreAngle) * rangeFromCentre),\r\n\t\t\t\ty : this.y + (Math.sin(centreAngle) * rangeFromCentre)\r\n\t\t\t};\r\n\t\t},\r\n\t\tdraw : function(animationPercent){\r\n\r\n\t\t\tvar easingDecimal = animationPercent || 1;\r\n\r\n\t\t\tvar ctx = this.ctx;\r\n\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\tctx.arc(this.x, this.y, this.outerRadius < 0 ? 0 : this.outerRadius, this.startAngle, this.endAngle);\r\n\r\n            ctx.arc(this.x, this.y, this.innerRadius < 0 ? 0 : this.innerRadius, this.endAngle, this.startAngle, true);\r\n\r\n\t\t\tctx.closePath();\r\n\t\t\tctx.strokeStyle = this.strokeColor;\r\n\t\t\tctx.lineWidth = this.strokeWidth;\r\n\r\n\t\t\tctx.fillStyle = this.fillColor;\r\n\r\n\t\t\tctx.fill();\r\n\t\t\tctx.lineJoin = 'bevel';\r\n\r\n\t\t\tif (this.showStroke){\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Rectangle = Chart.Element.extend({\r\n\t\tdraw : function(){\r\n\t\t\tvar ctx = this.ctx,\r\n\t\t\t\thalfWidth = this.width/2,\r\n\t\t\t\tleftX = this.x - halfWidth,\r\n\t\t\t\trightX = this.x + halfWidth,\r\n\t\t\t\ttop = this.base - (this.base - this.y),\r\n\t\t\t\thalfStroke = this.strokeWidth / 2;\r\n\r\n\t\t\t// Canvas doesn't allow us to stroke inside the width so we can\r\n\t\t\t// adjust the sizes to fit if we're setting a stroke on the line\r\n\t\t\tif (this.showStroke){\r\n\t\t\t\tleftX += halfStroke;\r\n\t\t\t\trightX -= halfStroke;\r\n\t\t\t\ttop += halfStroke;\r\n\t\t\t}\r\n\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\tctx.fillStyle = this.fillColor;\r\n\t\t\tctx.strokeStyle = this.strokeColor;\r\n\t\t\tctx.lineWidth = this.strokeWidth;\r\n\r\n\t\t\t// It'd be nice to keep this class totally generic to any rectangle\r\n\t\t\t// and simply specify which border to miss out.\r\n\t\t\tctx.moveTo(leftX, this.base);\r\n\t\t\tctx.lineTo(leftX, top);\r\n\t\t\tctx.lineTo(rightX, top);\r\n\t\t\tctx.lineTo(rightX, this.base);\r\n\t\t\tctx.fill();\r\n\t\t\tif (this.showStroke){\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t},\r\n\t\theight : function(){\r\n\t\t\treturn this.base - this.y;\r\n\t\t},\r\n\t\tinRange : function(chartX,chartY){\r\n\t\t\treturn (chartX >= this.x - this.width/2 && chartX <= this.x + this.width/2) && (chartY >= this.y && chartY <= this.base);\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Animation = Chart.Element.extend({\r\n\t\tcurrentStep: null, // the current animation step\r\n\t\tnumSteps: 60, // default number of steps\r\n\t\teasing: \"\", // the easing to use for this animation\r\n\t\trender: null, // render function used by the animation service\r\n\t\t\r\n\t\tonAnimationProgress: null, // user specified callback to fire on each step of the animation \r\n\t\tonAnimationComplete: null, // user specified callback to fire when the animation finishes\r\n\t});\r\n\t\r\n\tChart.Tooltip = Chart.Element.extend({\r\n\t\tdraw : function(){\r\n\r\n\t\t\tvar ctx = this.chart.ctx;\r\n\r\n\t\t\tctx.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\r\n\r\n\t\t\tthis.xAlign = \"center\";\r\n\t\t\tthis.yAlign = \"above\";\r\n\r\n\t\t\t//Distance between the actual element.y position and the start of the tooltip caret\r\n\t\t\tvar caretPadding = this.caretPadding = 2;\r\n\r\n\t\t\tvar tooltipWidth = ctx.measureText(this.text).width + 2*this.xPadding,\r\n\t\t\t\ttooltipRectHeight = this.fontSize + 2*this.yPadding,\r\n\t\t\t\ttooltipHeight = tooltipRectHeight + this.caretHeight + caretPadding;\r\n\r\n\t\t\tif (this.x + tooltipWidth/2 >this.chart.width){\r\n\t\t\t\tthis.xAlign = \"left\";\r\n\t\t\t} else if (this.x - tooltipWidth/2 < 0){\r\n\t\t\t\tthis.xAlign = \"right\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this.y - tooltipHeight < 0){\r\n\t\t\t\tthis.yAlign = \"below\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar tooltipX = this.x - tooltipWidth/2,\r\n\t\t\t\ttooltipY = this.y - tooltipHeight;\r\n\r\n\t\t\tctx.fillStyle = this.fillColor;\r\n\r\n\t\t\t// Custom Tooltips\r\n\t\t\tif(this.custom){\r\n\t\t\t\tthis.custom(this);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tswitch(this.yAlign)\r\n\t\t\t\t{\r\n\t\t\t\tcase \"above\":\r\n\t\t\t\t\t//Draw a caret above the x/y\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(this.x,this.y - caretPadding);\r\n\t\t\t\t\tctx.lineTo(this.x + this.caretHeight, this.y - (caretPadding + this.caretHeight));\r\n\t\t\t\t\tctx.lineTo(this.x - this.caretHeight, this.y - (caretPadding + this.caretHeight));\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"below\":\r\n\t\t\t\t\ttooltipY = this.y + caretPadding + this.caretHeight;\r\n\t\t\t\t\t//Draw a caret below the x/y\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(this.x, this.y + caretPadding);\r\n\t\t\t\t\tctx.lineTo(this.x + this.caretHeight, this.y + caretPadding + this.caretHeight);\r\n\t\t\t\t\tctx.lineTo(this.x - this.caretHeight, this.y + caretPadding + this.caretHeight);\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch(this.xAlign)\r\n\t\t\t\t{\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\ttooltipX = this.x - tooltipWidth + (this.cornerRadius + this.caretHeight);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\ttooltipX = this.x - (this.cornerRadius + this.caretHeight);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdrawRoundedRectangle(ctx,tooltipX,tooltipY,tooltipWidth,tooltipRectHeight,this.cornerRadius);\r\n\r\n\t\t\t\tctx.fill();\r\n\r\n\t\t\t\tctx.fillStyle = this.textColor;\r\n\t\t\t\tctx.textAlign = \"center\";\r\n\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\tctx.fillText(this.text, tooltipX + tooltipWidth/2, tooltipY + tooltipRectHeight/2);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tChart.MultiTooltip = Chart.Element.extend({\r\n\t\tinitialize : function(){\r\n\t\t\tthis.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\r\n\r\n\t\t\tthis.titleFont = fontString(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);\r\n\r\n\t\t\tthis.titleHeight = this.title ? this.titleFontSize * 1.5 : 0;\r\n\t\t\tthis.height = (this.labels.length * this.fontSize) + ((this.labels.length-1) * (this.fontSize/2)) + (this.yPadding*2) + this.titleHeight;\r\n\r\n\t\t\tthis.ctx.font = this.titleFont;\r\n\r\n\t\t\tvar titleWidth = this.ctx.measureText(this.title).width,\r\n\t\t\t\t//Label has a legend square as well so account for this.\r\n\t\t\t\tlabelWidth = longestText(this.ctx,this.font,this.labels) + this.fontSize + 3,\r\n\t\t\t\tlongestTextWidth = max([labelWidth,titleWidth]);\r\n\r\n\t\t\tthis.width = longestTextWidth + (this.xPadding*2);\r\n\r\n\r\n\t\t\tvar halfHeight = this.height/2;\r\n\r\n\t\t\t//Check to ensure the height will fit on the canvas\r\n\t\t\tif (this.y - halfHeight < 0 ){\r\n\t\t\t\tthis.y = halfHeight;\r\n\t\t\t} else if (this.y + halfHeight > this.chart.height){\r\n\t\t\t\tthis.y = this.chart.height - halfHeight;\r\n\t\t\t}\r\n\r\n\t\t\t//Decide whether to align left or right based on position on canvas\r\n\t\t\tif (this.x > this.chart.width/2){\r\n\t\t\t\tthis.x -= this.xOffset + this.width;\r\n\t\t\t} else {\r\n\t\t\t\tthis.x += this.xOffset;\r\n\t\t\t}\r\n\r\n\r\n\t\t},\r\n\t\tgetLineHeight : function(index){\r\n\t\t\tvar baseLineHeight = this.y - (this.height/2) + this.yPadding,\r\n\t\t\t\tafterTitleIndex = index-1;\r\n\r\n\t\t\t//If the index is zero, we're getting the title\r\n\t\t\tif (index === 0){\r\n\t\t\t\treturn baseLineHeight + this.titleHeight / 3;\r\n\t\t\t} else{\r\n\t\t\t\treturn baseLineHeight + ((this.fontSize * 1.5 * afterTitleIndex) + this.fontSize / 2) + this.titleHeight;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdraw : function(){\r\n\t\t\t// Custom Tooltips\r\n\t\t\tif(this.custom){\r\n\t\t\t\tthis.custom(this);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdrawRoundedRectangle(this.ctx,this.x,this.y - this.height/2,this.width,this.height,this.cornerRadius);\r\n\t\t\t\tvar ctx = this.ctx;\r\n\t\t\t\tctx.fillStyle = this.fillColor;\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\tctx.textAlign = \"left\";\r\n\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\tctx.fillStyle = this.titleTextColor;\r\n\t\t\t\tctx.font = this.titleFont;\r\n\r\n\t\t\t\tctx.fillText(this.title,this.x + this.xPadding, this.getLineHeight(0));\r\n\r\n\t\t\t\tctx.font = this.font;\r\n\t\t\t\thelpers.each(this.labels,function(label,index){\r\n\t\t\t\t\tctx.fillStyle = this.textColor;\r\n\t\t\t\t\tctx.fillText(label,this.x + this.xPadding + this.fontSize + 3, this.getLineHeight(index + 1));\r\n\r\n\t\t\t\t\t//A bit gnarly, but clearing this rectangle breaks when using explorercanvas (clears whole canvas)\r\n\t\t\t\t\t//ctx.clearRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\r\n\t\t\t\t\t//Instead we'll make a white filled block to put the legendColour palette over.\r\n\r\n\t\t\t\t\tctx.fillStyle = this.legendColorBackground;\r\n\t\t\t\t\tctx.fillRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\r\n\r\n\t\t\t\t\tctx.fillStyle = this.legendColors[index].fill;\r\n\t\t\t\t\tctx.fillRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\r\n\r\n\r\n\t\t\t\t},this);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Scale = Chart.Element.extend({\r\n\t\tinitialize : function(){\r\n\t\t\tthis.fit();\r\n\t\t},\r\n\t\tbuildYLabels : function(){\r\n\t\t\tthis.yLabels = [];\r\n\r\n\t\t\tvar stepDecimalPlaces = getDecimalPlaces(this.stepValue);\r\n\r\n\t\t\tfor (var i=0; i<=this.steps; i++){\r\n\t\t\t\tthis.yLabels.push(template(this.templateString,{value:(this.min + (i * this.stepValue)).toFixed(stepDecimalPlaces)}));\r\n\t\t\t}\r\n\t\t\tthis.yLabelWidth = (this.display && this.showLabels) ? longestText(this.ctx,this.font,this.yLabels) + 10 : 0;\r\n\t\t},\r\n\t\taddXLabel : function(label){\r\n\t\t\tthis.xLabels.push(label);\r\n\t\t\tthis.valuesCount++;\r\n\t\t\tthis.fit();\r\n\t\t},\r\n\t\tremoveXLabel : function(){\r\n\t\t\tthis.xLabels.shift();\r\n\t\t\tthis.valuesCount--;\r\n\t\t\tthis.fit();\r\n\t\t},\r\n\t\t// Fitting loop to rotate x Labels and figure out what fits there, and also calculate how many Y steps to use\r\n\t\tfit: function(){\r\n\t\t\t// First we need the width of the yLabels, assuming the xLabels aren't rotated\r\n\r\n\t\t\t// To do that we need the base line at the top and base of the chart, assuming there is no x label rotation\r\n\t\t\tthis.startPoint = (this.display) ? this.fontSize : 0;\r\n\t\t\tthis.endPoint = (this.display) ? this.height - (this.fontSize * 1.5) - 5 : this.height; // -5 to pad labels\r\n\r\n\t\t\t// Apply padding settings to the start and end point.\r\n\t\t\tthis.startPoint += this.padding;\r\n\t\t\tthis.endPoint -= this.padding;\r\n\r\n\t\t\t// Cache the starting endpoint, excluding the space for x labels\r\n\t\t\tvar cachedEndPoint = this.endPoint;\r\n\r\n\t\t\t// Cache the starting height, so can determine if we need to recalculate the scale yAxis\r\n\t\t\tvar cachedHeight = this.endPoint - this.startPoint,\r\n\t\t\t\tcachedYLabelWidth;\r\n\r\n\t\t\t// Build the current yLabels so we have an idea of what size they'll be to start\r\n\t\t\t/*\r\n\t\t\t *\tThis sets what is returned from calculateScaleRange as static properties of this class:\r\n\t\t\t *\r\n\t\t\t\tthis.steps;\r\n\t\t\t\tthis.stepValue;\r\n\t\t\t\tthis.min;\r\n\t\t\t\tthis.max;\r\n\t\t\t *\r\n\t\t\t */\r\n\t\t\tthis.calculateYRange(cachedHeight);\r\n\r\n\t\t\t// With these properties set we can now build the array of yLabels\r\n\t\t\t// and also the width of the largest yLabel\r\n\t\t\tthis.buildYLabels();\r\n\r\n\t\t\tthis.calculateXLabelRotation();\r\n\r\n\t\t\twhile((cachedHeight > this.endPoint - this.startPoint)){\r\n\t\t\t\tcachedHeight = this.endPoint - this.startPoint;\r\n\t\t\t\tcachedYLabelWidth = this.yLabelWidth;\r\n\r\n\t\t\t\tthis.calculateYRange(cachedHeight);\r\n\t\t\t\tthis.buildYLabels();\r\n\r\n\t\t\t\t// Only go through the xLabel loop again if the yLabel width has changed\r\n\t\t\t\tif (cachedYLabelWidth < this.yLabelWidth){\r\n\t\t\t\t\tthis.endPoint = cachedEndPoint;\r\n\t\t\t\t\tthis.calculateXLabelRotation();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcalculateXLabelRotation : function(){\r\n\t\t\t//Get the width of each grid by calculating the difference\r\n\t\t\t//between x offsets between 0 and 1.\r\n\r\n\t\t\tthis.ctx.font = this.font;\r\n\r\n\t\t\tvar firstWidth = this.ctx.measureText(this.xLabels[0]).width,\r\n\t\t\t\tlastWidth = this.ctx.measureText(this.xLabels[this.xLabels.length - 1]).width,\r\n\t\t\t\tfirstRotated,\r\n\t\t\t\tlastRotated;\r\n\r\n\r\n\t\t\tthis.xScalePaddingRight = lastWidth/2 + 3;\r\n\t\t\tthis.xScalePaddingLeft = (firstWidth/2 > this.yLabelWidth) ? firstWidth/2 : this.yLabelWidth;\r\n\r\n\t\t\tthis.xLabelRotation = 0;\r\n\t\t\tif (this.display){\r\n\t\t\t\tvar originalLabelWidth = longestText(this.ctx,this.font,this.xLabels),\r\n\t\t\t\t\tcosRotation,\r\n\t\t\t\t\tfirstRotatedWidth;\r\n\t\t\t\tthis.xLabelWidth = originalLabelWidth;\r\n\t\t\t\t//Allow 3 pixels x2 padding either side for label readability\r\n\t\t\t\tvar xGridWidth = Math.floor(this.calculateX(1) - this.calculateX(0)) - 6;\r\n\r\n\t\t\t\t//Max label rotate should be 90 - also act as a loop counter\r\n\t\t\t\twhile ((this.xLabelWidth > xGridWidth && this.xLabelRotation === 0) || (this.xLabelWidth > xGridWidth && this.xLabelRotation <= 90 && this.xLabelRotation > 0)){\r\n\t\t\t\t\tcosRotation = Math.cos(toRadians(this.xLabelRotation));\r\n\r\n\t\t\t\t\tfirstRotated = cosRotation * firstWidth;\r\n\t\t\t\t\tlastRotated = cosRotation * lastWidth;\r\n\r\n\t\t\t\t\t// We're right aligning the text now.\r\n\t\t\t\t\tif (firstRotated + this.fontSize / 2 > this.yLabelWidth){\r\n\t\t\t\t\t\tthis.xScalePaddingLeft = firstRotated + this.fontSize / 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.xScalePaddingRight = this.fontSize/2;\r\n\r\n\r\n\t\t\t\t\tthis.xLabelRotation++;\r\n\t\t\t\t\tthis.xLabelWidth = cosRotation * originalLabelWidth;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif (this.xLabelRotation > 0){\r\n\t\t\t\t\tthis.endPoint -= Math.sin(toRadians(this.xLabelRotation))*originalLabelWidth + 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.xLabelWidth = 0;\r\n\t\t\t\tthis.xScalePaddingRight = this.padding;\r\n\t\t\t\tthis.xScalePaddingLeft = this.padding;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t// Needs to be overidden in each Chart type\r\n\t\t// Otherwise we need to pass all the data into the scale class\r\n\t\tcalculateYRange: noop,\r\n\t\tdrawingArea: function(){\r\n\t\t\treturn this.startPoint - this.endPoint;\r\n\t\t},\r\n\t\tcalculateY : function(value){\r\n\t\t\tvar scalingFactor = this.drawingArea() / (this.min - this.max);\r\n\t\t\treturn this.endPoint - (scalingFactor * (value - this.min));\r\n\t\t},\r\n\t\tcalculateX : function(index){\r\n\t\t\tvar isRotated = (this.xLabelRotation > 0),\r\n\t\t\t\t// innerWidth = (this.offsetGridLines) ? this.width - offsetLeft - this.padding : this.width - (offsetLeft + halfLabelWidth * 2) - this.padding,\r\n\t\t\t\tinnerWidth = this.width - (this.xScalePaddingLeft + this.xScalePaddingRight),\r\n\t\t\t\tvalueWidth = innerWidth/Math.max((this.valuesCount - ((this.offsetGridLines) ? 0 : 1)), 1),\r\n\t\t\t\tvalueOffset = (valueWidth * index) + this.xScalePaddingLeft;\r\n\r\n\t\t\tif (this.offsetGridLines){\r\n\t\t\t\tvalueOffset += (valueWidth/2);\r\n\t\t\t}\r\n\r\n\t\t\treturn Math.round(valueOffset);\r\n\t\t},\r\n\t\tupdate : function(newProps){\r\n\t\t\thelpers.extend(this, newProps);\r\n\t\t\tthis.fit();\r\n\t\t},\r\n\t\tdraw : function(){\r\n\t\t\tvar ctx = this.ctx,\r\n\t\t\t\tyLabelGap = (this.endPoint - this.startPoint) / this.steps,\r\n\t\t\t\txStart = Math.round(this.xScalePaddingLeft);\r\n\t\t\tif (this.display){\r\n\t\t\t\tctx.fillStyle = this.textColor;\r\n\t\t\t\tctx.font = this.font;\r\n\t\t\t\teach(this.yLabels,function(labelString,index){\r\n\t\t\t\t\tvar yLabelCenter = this.endPoint - (yLabelGap * index),\r\n\t\t\t\t\t\tlinePositionY = Math.round(yLabelCenter),\r\n\t\t\t\t\t\tdrawHorizontalLine = this.showHorizontalLines;\r\n\r\n\t\t\t\t\tctx.textAlign = \"right\";\r\n\t\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\t\tif (this.showLabels){\r\n\t\t\t\t\t\tctx.fillText(labelString,xStart - 10,yLabelCenter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// This is X axis, so draw it\r\n\t\t\t\t\tif (index === 0 && !drawHorizontalLine){\r\n\t\t\t\t\t\tdrawHorizontalLine = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (drawHorizontalLine){\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (index > 0){\r\n\t\t\t\t\t\t// This is a grid line in the centre, so drop that\r\n\t\t\t\t\t\tctx.lineWidth = this.gridLineWidth;\r\n\t\t\t\t\t\tctx.strokeStyle = this.gridLineColor;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// This is the first line on the scale\r\n\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlinePositionY += helpers.aliasPixel(ctx.lineWidth);\r\n\r\n\t\t\t\t\tif(drawHorizontalLine){\r\n\t\t\t\t\t\tctx.moveTo(xStart, linePositionY);\r\n\t\t\t\t\t\tctx.lineTo(this.width, linePositionY);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(xStart - 5, linePositionY);\r\n\t\t\t\t\tctx.lineTo(xStart, linePositionY);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\t},this);\r\n\r\n\t\t\t\teach(this.xLabels,function(label,index){\r\n\t\t\t\t\tvar xPos = this.calculateX(index) + aliasPixel(this.lineWidth),\r\n\t\t\t\t\t\t// Check to see if line/bar here and decide where to place the line\r\n\t\t\t\t\t\tlinePos = this.calculateX(index - (this.offsetGridLines ? 0.5 : 0)) + aliasPixel(this.lineWidth),\r\n\t\t\t\t\t\tisRotated = (this.xLabelRotation > 0),\r\n\t\t\t\t\t\tdrawVerticalLine = this.showVerticalLines;\r\n\r\n\t\t\t\t\t// This is Y axis, so draw it\r\n\t\t\t\t\tif (index === 0 && !drawVerticalLine){\r\n\t\t\t\t\t\tdrawVerticalLine = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (drawVerticalLine){\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (index > 0){\r\n\t\t\t\t\t\t// This is a grid line in the centre, so drop that\r\n\t\t\t\t\t\tctx.lineWidth = this.gridLineWidth;\r\n\t\t\t\t\t\tctx.strokeStyle = this.gridLineColor;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// This is the first line on the scale\r\n\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (drawVerticalLine){\r\n\t\t\t\t\t\tctx.moveTo(linePos,this.endPoint);\r\n\t\t\t\t\t\tctx.lineTo(linePos,this.startPoint - 3);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\r\n\r\n\t\t\t\t\t// Small lines at the bottom of the base grid line\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(linePos,this.endPoint);\r\n\t\t\t\t\tctx.lineTo(linePos,this.endPoint + 5);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\t\tctx.save();\r\n\t\t\t\t\tctx.translate(xPos,(isRotated) ? this.endPoint + 12 : this.endPoint + 8);\r\n\t\t\t\t\tctx.rotate(toRadians(this.xLabelRotation)*-1);\r\n\t\t\t\t\tctx.font = this.font;\r\n\t\t\t\t\tctx.textAlign = (isRotated) ? \"right\" : \"center\";\r\n\t\t\t\t\tctx.textBaseline = (isRotated) ? \"middle\" : \"top\";\r\n\t\t\t\t\tctx.fillText(label, 0, 0);\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t},this);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tChart.RadialScale = Chart.Element.extend({\r\n\t\tinitialize: function(){\r\n\t\t\tthis.size = min([this.height, this.width]);\r\n\t\t\tthis.drawingArea = (this.display) ? (this.size/2) - (this.fontSize/2 + this.backdropPaddingY) : (this.size/2);\r\n\t\t},\r\n\t\tcalculateCenterOffset: function(value){\r\n\t\t\t// Take into account half font size + the yPadding of the top value\r\n\t\t\tvar scalingFactor = this.drawingArea / (this.max - this.min);\r\n\r\n\t\t\treturn (value - this.min) * scalingFactor;\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tif (!this.lineArc){\r\n\t\t\t\tthis.setScaleSize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.drawingArea = (this.display) ? (this.size/2) - (this.fontSize/2 + this.backdropPaddingY) : (this.size/2);\r\n\t\t\t}\r\n\t\t\tthis.buildYLabels();\r\n\t\t},\r\n\t\tbuildYLabels: function(){\r\n\t\t\tthis.yLabels = [];\r\n\r\n\t\t\tvar stepDecimalPlaces = getDecimalPlaces(this.stepValue);\r\n\r\n\t\t\tfor (var i=0; i<=this.steps; i++){\r\n\t\t\t\tthis.yLabels.push(template(this.templateString,{value:(this.min + (i * this.stepValue)).toFixed(stepDecimalPlaces)}));\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetCircumference : function(){\r\n\t\t\treturn ((Math.PI*2) / this.valuesCount);\r\n\t\t},\r\n\t\tsetScaleSize: function(){\r\n\t\t\t/*\r\n\t\t\t * Right, this is really confusing and there is a lot of maths going on here\r\n\t\t\t * The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\r\n\t\t\t *\r\n\t\t\t * Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\r\n\t\t\t *\r\n\t\t\t * Solution:\r\n\t\t\t *\r\n\t\t\t * We assume the radius of the polygon is half the size of the canvas at first\r\n\t\t\t * at each index we check if the text overlaps.\r\n\t\t\t *\r\n\t\t\t * Where it does, we store that angle and that index.\r\n\t\t\t *\r\n\t\t\t * After finding the largest index and angle we calculate how much we need to remove\r\n\t\t\t * from the shape radius to move the point inwards by that x.\r\n\t\t\t *\r\n\t\t\t * We average the left and right distances to get the maximum shape radius that can fit in the box\r\n\t\t\t * along with labels.\r\n\t\t\t *\r\n\t\t\t * Once we have that, we can find the centre point for the chart, by taking the x text protrusion\r\n\t\t\t * on each side, removing that from the size, halving it and adding the left x protrusion width.\r\n\t\t\t *\r\n\t\t\t * This will mean we have a shape fitted to the canvas, as large as it can be with the labels\r\n\t\t\t * and position it in the most space efficient manner\r\n\t\t\t *\r\n\t\t\t * https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\r\n\t\t\t */\r\n\r\n\r\n\t\t\t// Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\r\n\t\t\t// Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\r\n\t\t\tvar largestPossibleRadius = min([(this.height/2 - this.pointLabelFontSize - 5), this.width/2]),\r\n\t\t\t\tpointPosition,\r\n\t\t\t\ti,\r\n\t\t\t\ttextWidth,\r\n\t\t\t\thalfTextWidth,\r\n\t\t\t\tfurthestRight = this.width,\r\n\t\t\t\tfurthestRightIndex,\r\n\t\t\t\tfurthestRightAngle,\r\n\t\t\t\tfurthestLeft = 0,\r\n\t\t\t\tfurthestLeftIndex,\r\n\t\t\t\tfurthestLeftAngle,\r\n\t\t\t\txProtrusionLeft,\r\n\t\t\t\txProtrusionRight,\r\n\t\t\t\tradiusReductionRight,\r\n\t\t\t\tradiusReductionLeft,\r\n\t\t\t\tmaxWidthRadius;\r\n\t\t\tthis.ctx.font = fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);\r\n\t\t\tfor (i=0;i<this.valuesCount;i++){\r\n\t\t\t\t// 5px to space the text slightly out - similar to what we do in the draw function.\r\n\t\t\t\tpointPosition = this.getPointPosition(i, largestPossibleRadius);\r\n\t\t\t\ttextWidth = this.ctx.measureText(template(this.templateString, { value: this.labels[i] })).width + 5;\r\n\t\t\t\tif (i === 0 || i === this.valuesCount/2){\r\n\t\t\t\t\t// If we're at index zero, or exactly the middle, we're at exactly the top/bottom\r\n\t\t\t\t\t// of the radar chart, so text will be aligned centrally, so we'll half it and compare\r\n\t\t\t\t\t// w/left and right text sizes\r\n\t\t\t\t\thalfTextWidth = textWidth/2;\r\n\t\t\t\t\tif (pointPosition.x + halfTextWidth > furthestRight) {\r\n\t\t\t\t\t\tfurthestRight = pointPosition.x + halfTextWidth;\r\n\t\t\t\t\t\tfurthestRightIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pointPosition.x - halfTextWidth < furthestLeft) {\r\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - halfTextWidth;\r\n\t\t\t\t\t\tfurthestLeftIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (i < this.valuesCount/2) {\r\n\t\t\t\t\t// Less than half the values means we'll left align the text\r\n\t\t\t\t\tif (pointPosition.x + textWidth > furthestRight) {\r\n\t\t\t\t\t\tfurthestRight = pointPosition.x + textWidth;\r\n\t\t\t\t\t\tfurthestRightIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (i > this.valuesCount/2){\r\n\t\t\t\t\t// More than half the values means we'll right align the text\r\n\t\t\t\t\tif (pointPosition.x - textWidth < furthestLeft) {\r\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - textWidth;\r\n\t\t\t\t\t\tfurthestLeftIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\txProtrusionLeft = furthestLeft;\r\n\r\n\t\t\txProtrusionRight = Math.ceil(furthestRight - this.width);\r\n\r\n\t\t\tfurthestRightAngle = this.getIndexAngle(furthestRightIndex);\r\n\r\n\t\t\tfurthestLeftAngle = this.getIndexAngle(furthestLeftIndex);\r\n\r\n\t\t\tradiusReductionRight = xProtrusionRight / Math.sin(furthestRightAngle + Math.PI/2);\r\n\r\n\t\t\tradiusReductionLeft = xProtrusionLeft / Math.sin(furthestLeftAngle + Math.PI/2);\r\n\r\n\t\t\t// Ensure we actually need to reduce the size of the chart\r\n\t\t\tradiusReductionRight = (isNumber(radiusReductionRight)) ? radiusReductionRight : 0;\r\n\t\t\tradiusReductionLeft = (isNumber(radiusReductionLeft)) ? radiusReductionLeft : 0;\r\n\r\n\t\t\tthis.drawingArea = largestPossibleRadius - (radiusReductionLeft + radiusReductionRight)/2;\r\n\r\n\t\t\t//this.drawingArea = min([maxWidthRadius, (this.height - (2 * (this.pointLabelFontSize + 5)))/2])\r\n\t\t\tthis.setCenterPoint(radiusReductionLeft, radiusReductionRight);\r\n\r\n\t\t},\r\n\t\tsetCenterPoint: function(leftMovement, rightMovement){\r\n\r\n\t\t\tvar maxRight = this.width - rightMovement - this.drawingArea,\r\n\t\t\t\tmaxLeft = leftMovement + this.drawingArea;\r\n\r\n\t\t\tthis.xCenter = (maxLeft + maxRight)/2;\r\n\t\t\t// Always vertically in the centre as the text height doesn't change\r\n\t\t\tthis.yCenter = (this.height/2);\r\n\t\t},\r\n\r\n\t\tgetIndexAngle : function(index){\r\n\t\t\tvar angleMultiplier = (Math.PI * 2) / this.valuesCount;\r\n\t\t\t// Start from the top instead of right, so remove a quarter of the circle\r\n\r\n\t\t\treturn index * angleMultiplier - (Math.PI/2);\r\n\t\t},\r\n\t\tgetPointPosition : function(index, distanceFromCenter){\r\n\t\t\tvar thisAngle = this.getIndexAngle(index);\r\n\t\t\treturn {\r\n\t\t\t\tx : (Math.cos(thisAngle) * distanceFromCenter) + this.xCenter,\r\n\t\t\t\ty : (Math.sin(thisAngle) * distanceFromCenter) + this.yCenter\r\n\t\t\t};\r\n\t\t},\r\n\t\tdraw: function(){\r\n\t\t\tif (this.display){\r\n\t\t\t\tvar ctx = this.ctx;\r\n\t\t\t\teach(this.yLabels, function(label, index){\r\n\t\t\t\t\t// Don't draw a centre value\r\n\t\t\t\t\tif (index > 0){\r\n\t\t\t\t\t\tvar yCenterOffset = index * (this.drawingArea/this.steps),\r\n\t\t\t\t\t\t\tyHeight = this.yCenter - yCenterOffset,\r\n\t\t\t\t\t\t\tpointPosition;\r\n\r\n\t\t\t\t\t\t// Draw circular lines around the scale\r\n\t\t\t\t\t\tif (this.lineWidth > 0){\r\n\t\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\t\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\r\n\t\t\t\t\t\t\tif(this.lineArc){\r\n\t\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\t\tctx.arc(this.xCenter, this.yCenter, yCenterOffset, 0, Math.PI*2);\r\n\t\t\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t\t} else{\r\n\t\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\t\tfor (var i=0;i<this.valuesCount;i++)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointPosition = this.getPointPosition(i, this.calculateCenterOffset(this.min + (index * this.stepValue)));\r\n\t\t\t\t\t\t\t\t\tif (i === 0){\r\n\t\t\t\t\t\t\t\t\t\tctx.moveTo(pointPosition.x, pointPosition.y);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tctx.lineTo(pointPosition.x, pointPosition.y);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(this.showLabels){\r\n\t\t\t\t\t\t\tctx.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\r\n\t\t\t\t\t\t\tif (this.showLabelBackdrop){\r\n\t\t\t\t\t\t\t\tvar labelWidth = ctx.measureText(label).width;\r\n\t\t\t\t\t\t\t\tctx.fillStyle = this.backdropColor;\r\n\t\t\t\t\t\t\t\tctx.fillRect(\r\n\t\t\t\t\t\t\t\t\tthis.xCenter - labelWidth/2 - this.backdropPaddingX,\r\n\t\t\t\t\t\t\t\t\tyHeight - this.fontSize/2 - this.backdropPaddingY,\r\n\t\t\t\t\t\t\t\t\tlabelWidth + this.backdropPaddingX*2,\r\n\t\t\t\t\t\t\t\t\tthis.fontSize + this.backdropPaddingY*2\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\t\t\t\tctx.fillStyle = this.fontColor;\r\n\t\t\t\t\t\t\tctx.fillText(label, this.xCenter, yHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tif (!this.lineArc){\r\n\t\t\t\t\tctx.lineWidth = this.angleLineWidth;\r\n\t\t\t\t\tctx.strokeStyle = this.angleLineColor;\r\n\t\t\t\t\tfor (var i = this.valuesCount - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tvar centerOffset = null, outerPosition = null;\r\n\r\n\t\t\t\t\t\tif (this.angleLineWidth > 0 && (i % this.angleLineInterval === 0)){\r\n\t\t\t\t\t\t\tcenterOffset = this.calculateCenterOffset(this.max);\r\n\t\t\t\t\t\t\touterPosition = this.getPointPosition(i, centerOffset);\r\n\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\tctx.moveTo(this.xCenter, this.yCenter);\r\n\t\t\t\t\t\t\tctx.lineTo(outerPosition.x, outerPosition.y);\r\n\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this.backgroundColors && this.backgroundColors.length == this.valuesCount) {\r\n\t\t\t\t\t\t\tif (centerOffset == null)\r\n\t\t\t\t\t\t\t\tcenterOffset = this.calculateCenterOffset(this.max);\r\n\r\n\t\t\t\t\t\t\tif (outerPosition == null)\r\n\t\t\t\t\t\t\t\touterPosition = this.getPointPosition(i, centerOffset);\r\n\r\n\t\t\t\t\t\t\tvar previousOuterPosition = this.getPointPosition(i === 0 ? this.valuesCount - 1 : i - 1, centerOffset);\r\n\t\t\t\t\t\t\tvar nextOuterPosition = this.getPointPosition(i === this.valuesCount - 1 ? 0 : i + 1, centerOffset);\r\n\r\n\t\t\t\t\t\t\tvar previousOuterHalfway = { x: (previousOuterPosition.x + outerPosition.x) / 2, y: (previousOuterPosition.y + outerPosition.y) / 2 };\r\n\t\t\t\t\t\t\tvar nextOuterHalfway = { x: (outerPosition.x + nextOuterPosition.x) / 2, y: (outerPosition.y + nextOuterPosition.y) / 2 };\r\n\r\n\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\tctx.moveTo(this.xCenter, this.yCenter);\r\n\t\t\t\t\t\t\tctx.lineTo(previousOuterHalfway.x, previousOuterHalfway.y);\r\n\t\t\t\t\t\t\tctx.lineTo(outerPosition.x, outerPosition.y);\r\n\t\t\t\t\t\t\tctx.lineTo(nextOuterHalfway.x, nextOuterHalfway.y);\r\n\t\t\t\t\t\t\tctx.fillStyle = this.backgroundColors[i];\r\n\t\t\t\t\t\t\tctx.fill();\r\n\t\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Extra 3px out for some label spacing\r\n\t\t\t\t\t\tvar pointLabelPosition = this.getPointPosition(i, this.calculateCenterOffset(this.max) + 5);\r\n\t\t\t\t\t\tctx.font = fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);\r\n\t\t\t\t\t\tctx.fillStyle = this.pointLabelFontColor;\r\n\r\n\t\t\t\t\t\tvar labelsCount = this.labels.length,\r\n\t\t\t\t\t\t\thalfLabelsCount = this.labels.length/2,\r\n\t\t\t\t\t\t\tquarterLabelsCount = halfLabelsCount/2,\r\n\t\t\t\t\t\t\tupperHalf = (i < quarterLabelsCount || i > labelsCount - quarterLabelsCount),\r\n\t\t\t\t\t\t\texactQuarter = (i === quarterLabelsCount || i === labelsCount - quarterLabelsCount);\r\n\t\t\t\t\t\tif (i === 0){\r\n\t\t\t\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t\t\t} else if(i === halfLabelsCount){\r\n\t\t\t\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t\t\t} else if (i < halfLabelsCount){\r\n\t\t\t\t\t\t\tctx.textAlign = 'left';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tctx.textAlign = 'right';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Set the correct text baseline based on outer positioning\r\n\t\t\t\t\t\tif (exactQuarter){\r\n\t\t\t\t\t\t\tctx.textBaseline = 'middle';\r\n\t\t\t\t\t\t} else if (upperHalf){\r\n\t\t\t\t\t\t\tctx.textBaseline = 'bottom';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tctx.textBaseline = 'top';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tctx.fillText(this.labels[i], pointLabelPosition.x, pointLabelPosition.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tChart.animationService = {\r\n\t\tframeDuration: 17,\r\n\t\tanimations: [],\r\n\t\tdropFrames: 0,\r\n\t\taddAnimation: function(chartInstance, animationObject) {\r\n\t\t\tfor (var index = 0; index < this.animations.length; ++ index){\r\n\t\t\t\tif (this.animations[index].chartInstance === chartInstance){\r\n\t\t\t\t\t// replacing an in progress animation\r\n\t\t\t\t\tthis.animations[index].animationObject = animationObject;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.animations.push({\r\n\t\t\t\tchartInstance: chartInstance,\r\n\t\t\t\tanimationObject: animationObject\r\n\t\t\t});\r\n\r\n\t\t\t// If there are no animations queued, manually kickstart a digest, for lack of a better word\r\n\t\t\tif (this.animations.length == 1) {\r\n\t\t\t\thelpers.requestAnimFrame.call(window, this.digestWrapper);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// Cancel the animation for a given chart instance\r\n\t\tcancelAnimation: function(chartInstance) {\r\n\t\t\tvar index = helpers.findNextWhere(this.animations, function(animationWrapper) {\r\n\t\t\t\treturn animationWrapper.chartInstance === chartInstance;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (index)\r\n\t\t\t{\r\n\t\t\t\tthis.animations.splice(index, 1);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// calls startDigest with the proper context\r\n\t\tdigestWrapper: function() {\r\n\t\t\tChart.animationService.startDigest.call(Chart.animationService);\r\n\t\t},\r\n\t\tstartDigest: function() {\r\n\r\n\t\t\tvar startTime = Date.now();\r\n\t\t\tvar framesToDrop = 0;\r\n\r\n\t\t\tif(this.dropFrames > 1){\r\n\t\t\t\tframesToDrop = Math.floor(this.dropFrames);\r\n\t\t\t\tthis.dropFrames -= framesToDrop;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < this.animations.length; i++) {\r\n\r\n\t\t\t\tif (this.animations[i].animationObject.currentStep === null){\r\n\t\t\t\t\tthis.animations[i].animationObject.currentStep = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.animations[i].animationObject.currentStep += 1 + framesToDrop;\r\n\t\t\t\tif(this.animations[i].animationObject.currentStep > this.animations[i].animationObject.numSteps){\r\n\t\t\t\t\tthis.animations[i].animationObject.currentStep = this.animations[i].animationObject.numSteps;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.animations[i].animationObject.render(this.animations[i].chartInstance, this.animations[i].animationObject);\r\n\t\t\t\t\r\n\t\t\t\t// Check if executed the last frame.\r\n\t\t\t\tif (this.animations[i].animationObject.currentStep == this.animations[i].animationObject.numSteps){\r\n\t\t\t\t\t// Call onAnimationComplete\r\n\t\t\t\t\tthis.animations[i].animationObject.onAnimationComplete.call(this.animations[i].chartInstance);\r\n\t\t\t\t\t// Remove the animation.\r\n\t\t\t\t\tthis.animations.splice(i, 1);\r\n\t\t\t\t\t// Keep the index in place to offset the splice\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar endTime = Date.now();\r\n\t\t\tvar delay = endTime - startTime - this.frameDuration;\r\n\t\t\tvar frameDelay = delay / this.frameDuration;\r\n\r\n\t\t\tif(frameDelay > 1){\r\n\t\t\t\tthis.dropFrames += frameDelay;\r\n\t\t\t}\r\n\r\n\t\t\t// Do we have more stuff to animate?\r\n\t\t\tif (this.animations.length > 0){\r\n\t\t\t\thelpers.requestAnimFrame.call(window, this.digestWrapper);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Attach global event to resize each chart instance when the browser resizes\r\n\thelpers.addEvent(window, \"resize\", (function(){\r\n\t\t// Basic debounce of resize function so it doesn't hurt performance when resizing browser.\r\n\t\tvar timeout;\r\n\t\treturn function(){\r\n\t\t\tclearTimeout(timeout);\r\n\t\t\ttimeout = setTimeout(function(){\r\n\t\t\t\teach(Chart.instances,function(instance){\r\n\t\t\t\t\t// If the responsive flag is set in the chart instance config\r\n\t\t\t\t\t// Cascade the resize event down to the chart.\r\n\t\t\t\t\tif (instance.options.responsive){\r\n\t\t\t\t\t\tinstance.resize(instance.render, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, 50);\r\n\t\t};\r\n\t})());\r\n\r\n\r\n\tif (amd) {\r\n\t\tdefine('Chart', [], function(){\r\n\t\t\treturn Chart;\r\n\t\t});\r\n\t} else if (typeof module === 'object' && module.exports) {\r\n\t\tmodule.exports = Chart;\r\n\t}\r\n\r\n\troot.Chart = Chart;\r\n\r\n\tChart.noConflict = function(){\r\n\t\troot.Chart = previous;\r\n\t\treturn Chart;\r\n\t};\r\n\r\n}).call(this);\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\thelpers = Chart.helpers;\r\n\r\n\r\n\tvar defaultConfig = {\r\n\t\t//Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value\r\n\t\tscaleBeginAtZero : true,\r\n\r\n\t\t//Boolean - Whether grid lines are shown across the chart\r\n\t\tscaleShowGridLines : true,\r\n\r\n\t\t//String - Colour of the grid lines\r\n\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\r\n\r\n\t\t//Number - Width of the grid lines\r\n\t\tscaleGridLineWidth : 1,\r\n\r\n\t\t//Boolean - Whether to show horizontal lines (except X axis)\r\n\t\tscaleShowHorizontalLines: true,\r\n\r\n\t\t//Boolean - Whether to show vertical lines (except Y axis)\r\n\t\tscaleShowVerticalLines: true,\r\n\r\n\t\t//Boolean - If there is a stroke on each bar\r\n\t\tbarShowStroke : true,\r\n\r\n\t\t//Number - Pixel width of the bar stroke\r\n\t\tbarStrokeWidth : 2,\r\n\r\n\t\t//Number - Spacing between each of the X value sets\r\n\t\tbarValueSpacing : 5,\r\n\r\n\t\t//Number - Spacing between data sets within X values\r\n\t\tbarDatasetSpacing : 1,\r\n\r\n\t\t//String - A legend template\r\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=datasets[i].fillColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>\"\r\n\r\n\t};\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\tname: \"Bar\",\r\n\t\tdefaults : defaultConfig,\r\n\t\tinitialize:  function(data){\r\n\r\n\t\t\t//Expose options as a scope variable here so we can access it in the ScaleClass\r\n\t\t\tvar options = this.options;\r\n\r\n\t\t\tthis.ScaleClass = Chart.Scale.extend({\r\n\t\t\t\toffsetGridLines : true,\r\n\t\t\t\tcalculateBarX : function(datasetCount, datasetIndex, barIndex){\r\n\t\t\t\t\t//Reusable method for calculating the xPosition of a given bar based on datasetIndex & width of the bar\r\n\t\t\t\t\tvar xWidth = this.calculateBaseWidth(),\r\n\t\t\t\t\t\txAbsolute = this.calculateX(barIndex) - (xWidth/2),\r\n\t\t\t\t\t\tbarWidth = this.calculateBarWidth(datasetCount);\r\n\r\n\t\t\t\t\treturn xAbsolute + (barWidth * datasetIndex) + (datasetIndex * options.barDatasetSpacing) + barWidth/2;\r\n\t\t\t\t},\r\n\t\t\t\tcalculateBaseWidth : function(){\r\n\t\t\t\t\treturn (this.calculateX(1) - this.calculateX(0)) - (2*options.barValueSpacing);\r\n\t\t\t\t},\r\n\t\t\t\tcalculateBarWidth : function(datasetCount){\r\n\t\t\t\t\t//The padding between datasets is to the right of each bar, providing that there are more than 1 dataset\r\n\t\t\t\t\tvar baseWidth = this.calculateBaseWidth() - ((datasetCount - 1) * options.barDatasetSpacing);\r\n\r\n\t\t\t\t\treturn (baseWidth / datasetCount);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.datasets = [];\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activeBars = (evt.type !== 'mouseout') ? this.getBarsAtEvent(evt) : [];\r\n\r\n\t\t\t\t\tthis.eachBars(function(bar){\r\n\t\t\t\t\t\tbar.restore(['fillColor', 'strokeColor']);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activeBars, function(activeBar){\r\n\t\t\t\t\t\tif (activeBar) {\r\n\t\t\t\t\t\t\tactiveBar.fillColor = activeBar.highlightFill;\r\n\t\t\t\t\t\t\tactiveBar.strokeColor = activeBar.highlightStroke;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTooltip(activeBars);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//Declare the extension of the default point, to cater for the options passed in to the constructor\r\n\t\t\tthis.BarClass = Chart.Rectangle.extend({\r\n\t\t\t\tstrokeWidth : this.options.barStrokeWidth,\r\n\t\t\t\tshowStroke : this.options.barShowStroke,\r\n\t\t\t\tctx : this.chart.ctx\r\n\t\t\t});\r\n\r\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\r\n\t\t\thelpers.each(data.datasets,function(dataset,datasetIndex){\r\n\r\n\t\t\t\tvar datasetObject = {\r\n\t\t\t\t\tlabel : dataset.label || null,\r\n\t\t\t\t\tfillColor : dataset.fillColor,\r\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\r\n\t\t\t\t\tbars : []\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.datasets.push(datasetObject);\r\n\r\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\r\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\t\tdatasetObject.bars.push(new this.BarClass({\r\n\t\t\t\t\t\tvalue : dataPoint,\r\n\t\t\t\t\t\tlabel : data.labels[index],\r\n\t\t\t\t\t\tdatasetLabel: dataset.label,\r\n\t\t\t\t\t\tstrokeColor : (typeof dataset.strokeColor == 'object') ? dataset.strokeColor[index] : dataset.strokeColor,\r\n\t\t\t\t\t\tfillColor : (typeof dataset.fillColor == 'object') ? dataset.fillColor[index] : dataset.fillColor,\r\n\t\t\t\t\t\thighlightFill : (dataset.highlightFill) ? (typeof dataset.highlightFill == 'object') ? dataset.highlightFill[index] : dataset.highlightFill : (typeof dataset.fillColor == 'object') ? dataset.fillColor[index] : dataset.fillColor,\r\n\t\t\t\t\t\thighlightStroke : (dataset.highlightStroke) ? (typeof dataset.highlightStroke == 'object') ? dataset.highlightStroke[index] : dataset.highlightStroke : (typeof dataset.strokeColor == 'object') ? dataset.strokeColor[index] : dataset.strokeColor\r\n\t\t\t\t\t}));\r\n\t\t\t\t},this);\r\n\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.buildScale(data.labels);\r\n\r\n\t\t\tthis.BarClass.prototype.base = this.scale.endPoint;\r\n\r\n\t\t\tthis.eachBars(function(bar, index, datasetIndex){\r\n\t\t\t\thelpers.extend(bar, {\r\n\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length),\r\n\t\t\t\t\tx: this.scale.calculateBarX(this.datasets.length, datasetIndex, index),\r\n\t\t\t\t\ty: this.scale.endPoint\r\n\t\t\t\t});\r\n\t\t\t\tbar.save();\r\n\t\t\t}, this);\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.scale.update();\r\n\t\t\t// Reset any highlight colours before updating.\r\n\t\t\thelpers.each(this.activeElements, function(activeElement){\r\n\t\t\t\tactiveElement.restore(['fillColor', 'strokeColor']);\r\n\t\t\t});\r\n\r\n\t\t\tthis.eachBars(function(bar){\r\n\t\t\t\tbar.save();\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\teachBars : function(callback){\r\n\t\t\thelpers.each(this.datasets,function(dataset, datasetIndex){\r\n\t\t\t\thelpers.each(dataset.bars, callback, this, datasetIndex);\r\n\t\t\t},this);\r\n\t\t},\r\n\t\tgetBarsAtEvent : function(e){\r\n\t\t\tvar barsArray = [],\r\n\t\t\t\teventPosition = helpers.getRelativePosition(e),\r\n\t\t\t\tdatasetIterator = function(dataset){\r\n\t\t\t\t\tbarsArray.push(dataset.bars[barIndex]);\r\n\t\t\t\t},\r\n\t\t\t\tbarIndex;\r\n\r\n\t\t\tfor (var datasetIndex = 0; datasetIndex < this.datasets.length; datasetIndex++) {\r\n\t\t\t\tfor (barIndex = 0; barIndex < this.datasets[datasetIndex].bars.length; barIndex++) {\r\n\t\t\t\t\tif (this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y)){\r\n\t\t\t\t\t\thelpers.each(this.datasets, datasetIterator);\r\n\t\t\t\t\t\treturn barsArray;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn barsArray;\r\n\t\t},\r\n\t\tbuildScale : function(labels){\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar dataTotal = function(){\r\n\t\t\t\tvar values = [];\r\n\t\t\t\tself.eachBars(function(bar){\r\n\t\t\t\t\tvalues.push(bar.value);\r\n\t\t\t\t});\r\n\t\t\t\treturn values;\r\n\t\t\t};\r\n\r\n\t\t\tvar scaleOptions = {\r\n\t\t\t\ttemplateString : this.options.scaleLabel,\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth : this.chart.width,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\ttextColor : this.options.scaleFontColor,\r\n\t\t\t\tfontSize : this.options.scaleFontSize,\r\n\t\t\t\tfontStyle : this.options.scaleFontStyle,\r\n\t\t\t\tfontFamily : this.options.scaleFontFamily,\r\n\t\t\t\tvaluesCount : labels.length,\r\n\t\t\t\tbeginAtZero : this.options.scaleBeginAtZero,\r\n\t\t\t\tintegersOnly : this.options.scaleIntegersOnly,\r\n\t\t\t\tcalculateYRange: function(currentHeight){\r\n\t\t\t\t\tvar updatedRanges = helpers.calculateScaleRange(\r\n\t\t\t\t\t\tdataTotal(),\r\n\t\t\t\t\t\tcurrentHeight,\r\n\t\t\t\t\t\tthis.fontSize,\r\n\t\t\t\t\t\tthis.beginAtZero,\r\n\t\t\t\t\t\tthis.integersOnly\r\n\t\t\t\t\t);\r\n\t\t\t\t\thelpers.extend(this, updatedRanges);\r\n\t\t\t\t},\r\n\t\t\t\txLabels : labels,\r\n\t\t\t\tfont : helpers.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),\r\n\t\t\t\tlineWidth : this.options.scaleLineWidth,\r\n\t\t\t\tlineColor : this.options.scaleLineColor,\r\n\t\t\t\tshowHorizontalLines : this.options.scaleShowHorizontalLines,\r\n\t\t\t\tshowVerticalLines : this.options.scaleShowVerticalLines,\r\n\t\t\t\tgridLineWidth : (this.options.scaleShowGridLines) ? this.options.scaleGridLineWidth : 0,\r\n\t\t\t\tgridLineColor : (this.options.scaleShowGridLines) ? this.options.scaleGridLineColor : \"rgba(0,0,0,0)\",\r\n\t\t\t\tpadding : (this.options.showScale) ? 0 : (this.options.barShowStroke) ? this.options.barStrokeWidth : 0,\r\n\t\t\t\tshowLabels : this.options.scaleShowLabels,\r\n\t\t\t\tdisplay : this.options.showScale\r\n\t\t\t};\r\n\r\n\t\t\tif (this.options.scaleOverride){\r\n\t\t\t\thelpers.extend(scaleOptions, {\r\n\t\t\t\t\tcalculateYRange: helpers.noop,\r\n\t\t\t\t\tsteps: this.options.scaleSteps,\r\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\r\n\t\t\t\t\tmin: this.options.scaleStartValue,\r\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.scale = new this.ScaleClass(scaleOptions);\r\n\t\t},\r\n\t\taddData : function(valuesArray,label){\r\n\t\t\t//Map the values array for each of the datasets\r\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\r\n\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\tthis.datasets[datasetIndex].bars.push(new this.BarClass({\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\tlabel : label,\r\n\t\t\t\t\tdatasetLabel: this.datasets[datasetIndex].label,\r\n\t\t\t\t\tx: this.scale.calculateBarX(this.datasets.length, datasetIndex, this.scale.valuesCount+1),\r\n\t\t\t\t\ty: this.scale.endPoint,\r\n\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length),\r\n\t\t\t\t\tbase : this.scale.endPoint,\r\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].strokeColor,\r\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].fillColor\r\n\t\t\t\t}));\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.scale.addXLabel(label);\r\n\t\t\t//Then re-render the chart.\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tremoveData : function(){\r\n\t\t\tthis.scale.removeXLabel();\r\n\t\t\t//Then re-render the chart.\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\tdataset.bars.shift();\r\n\t\t\t},this);\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\treflow : function(){\r\n\t\t\thelpers.extend(this.BarClass.prototype,{\r\n\t\t\t\ty: this.scale.endPoint,\r\n\t\t\t\tbase : this.scale.endPoint\r\n\t\t\t});\r\n\t\t\tvar newScaleProps = helpers.extend({\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth : this.chart.width\r\n\t\t\t});\r\n\t\t\tthis.scale.update(newScaleProps);\r\n\t\t},\r\n\t\tdraw : function(ease){\r\n\t\t\tvar easingDecimal = ease || 1;\r\n\t\t\tthis.clear();\r\n\r\n\t\t\tvar ctx = this.chart.ctx;\r\n\r\n\t\t\tthis.scale.draw(easingDecimal);\r\n\r\n\t\t\t//Draw all the bars for each dataset\r\n\t\t\thelpers.each(this.datasets,function(dataset,datasetIndex){\r\n\t\t\t\thelpers.each(dataset.bars,function(bar,index){\r\n\t\t\t\t\tif (bar.hasValue()){\r\n\t\t\t\t\t\tbar.base = this.scale.endPoint;\r\n\t\t\t\t\t\t//Transition then draw\r\n\t\t\t\t\t\tbar.transition({\r\n\t\t\t\t\t\t\tx : this.scale.calculateBarX(this.datasets.length, datasetIndex, index),\r\n\t\t\t\t\t\t\ty : this.scale.calculateY(bar.value),\r\n\t\t\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length)\r\n\t\t\t\t\t\t}, easingDecimal).draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t},this);\r\n\r\n\t\t\t},this);\r\n\t\t}\r\n\t});\r\n\r\n\r\n}).call(this);\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\t//Cache a local reference to Chart.helpers\r\n\t\thelpers = Chart.helpers;\r\n\r\n\tvar defaultConfig = {\r\n\t\t//Boolean - Whether we should show a stroke on each segment\r\n\t\tsegmentShowStroke : true,\r\n\r\n\t\t//String - The colour of each segment stroke\r\n\t\tsegmentStrokeColor : \"#fff\",\r\n\r\n\t\t//Number - The width of each segment stroke\r\n\t\tsegmentStrokeWidth : 2,\r\n\r\n\t\t//The percentage of the chart that we cut out of the middle.\r\n\t\tpercentageInnerCutout : 50,\r\n\r\n\t\t//Number - Amount of animation steps\r\n\t\tanimationSteps : 100,\r\n\r\n\t\t//String - Animation easing effect\r\n\t\tanimationEasing : \"easeOutBounce\",\r\n\r\n\t\t//Boolean - Whether we animate the rotation of the Doughnut\r\n\t\tanimateRotate : true,\r\n\r\n\t\t//Boolean - Whether we animate scaling the Doughnut from the centre\r\n\t\tanimateScale : false,\r\n\r\n\t\t//String - A legend template\r\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>\"\r\n\r\n\t};\r\n\r\n\tChart.Type.extend({\r\n\t\t//Passing in a name registers this chart in the Chart namespace\r\n\t\tname: \"Doughnut\",\r\n\t\t//Providing a defaults will also register the defaults in the chart namespace\r\n\t\tdefaults : defaultConfig,\r\n\t\t//Initialize is fired when the chart is initialized - Data is passed in as a parameter\r\n\t\t//Config is automatically merged by the core of Chart.js, and is available at this.options\r\n\t\tinitialize:  function(data){\r\n\r\n\t\t\t//Declare segments as a static property to prevent inheriting across the Chart type prototype\r\n\t\t\tthis.segments = [];\r\n\t\t\tthis.outerRadius = (helpers.min([this.chart.width,this.chart.height]) -\tthis.options.segmentStrokeWidth/2)/2;\r\n\r\n\t\t\tthis.SegmentArc = Chart.Arc.extend({\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\tx : this.chart.width/2,\r\n\t\t\t\ty : this.chart.height/2\r\n\t\t\t});\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activeSegments = (evt.type !== 'mouseout') ? this.getSegmentsAtEvent(evt) : [];\r\n\r\n\t\t\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\t\t\tsegment.restore([\"fillColor\"]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activeSegments,function(activeSegment){\r\n\t\t\t\t\t\tactiveSegment.fillColor = activeSegment.highlightColor;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTooltip(activeSegments);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.calculateTotal(data);\r\n\r\n\t\t\thelpers.each(data,function(datapoint, index){\r\n\t\t\t\tif (!datapoint.color) {\r\n\t\t\t\t\tdatapoint.color = 'hsl(' + (360 * index / data.length) + ', 100%, 50%)';\r\n\t\t\t\t}\r\n\t\t\t\tthis.addData(datapoint, index, true);\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tgetSegmentsAtEvent : function(e){\r\n\t\t\tvar segmentsArray = [];\r\n\r\n\t\t\tvar location = helpers.getRelativePosition(e);\r\n\r\n\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\tif (segment.inRange(location.x,location.y)) segmentsArray.push(segment);\r\n\t\t\t},this);\r\n\t\t\treturn segmentsArray;\r\n\t\t},\r\n\t\taddData : function(segment, atIndex, silent){\r\n\t\t\tvar index = atIndex !== undefined ? atIndex : this.segments.length;\r\n\t\t\tif ( typeof(segment.color) === \"undefined\" ) {\r\n\t\t\t\tsegment.color = Chart.defaults.global.segmentColorDefault[index % Chart.defaults.global.segmentColorDefault.length];\r\n\t\t\t\tsegment.highlight = Chart.defaults.global.segmentHighlightColorDefaults[index % Chart.defaults.global.segmentHighlightColorDefaults.length];\t\t\t\t\r\n\t\t\t}\r\n\t\t\tthis.segments.splice(index, 0, new this.SegmentArc({\r\n\t\t\t\tvalue : segment.value,\r\n\t\t\t\touterRadius : (this.options.animateScale) ? 0 : this.outerRadius,\r\n\t\t\t\tinnerRadius : (this.options.animateScale) ? 0 : (this.outerRadius/100) * this.options.percentageInnerCutout,\r\n\t\t\t\tfillColor : segment.color,\r\n\t\t\t\thighlightColor : segment.highlight || segment.color,\r\n\t\t\t\tshowStroke : this.options.segmentShowStroke,\r\n\t\t\t\tstrokeWidth : this.options.segmentStrokeWidth,\r\n\t\t\t\tstrokeColor : this.options.segmentStrokeColor,\r\n\t\t\t\tstartAngle : Math.PI * 1.5,\r\n\t\t\t\tcircumference : (this.options.animateRotate) ? 0 : this.calculateCircumference(segment.value),\r\n\t\t\t\tlabel : segment.label\r\n\t\t\t}));\r\n\t\t\tif (!silent){\r\n\t\t\t\tthis.reflow();\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcalculateCircumference : function(value) {\r\n\t\t\tif ( this.total > 0 ) {\r\n\t\t\t\treturn (Math.PI*2)*(value / this.total);\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcalculateTotal : function(data){\r\n\t\t\tthis.total = 0;\r\n\t\t\thelpers.each(data,function(segment){\r\n\t\t\t\tthis.total += Math.abs(segment.value);\r\n\t\t\t},this);\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.calculateTotal(this.segments);\r\n\r\n\t\t\t// Reset any highlight colours before updating.\r\n\t\t\thelpers.each(this.activeElements, function(activeElement){\r\n\t\t\t\tactiveElement.restore(['fillColor']);\r\n\t\t\t});\r\n\r\n\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\tsegment.save();\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\r\n\t\tremoveData: function(atIndex){\r\n\t\t\tvar indexToDelete = (helpers.isNumber(atIndex)) ? atIndex : this.segments.length-1;\r\n\t\t\tthis.segments.splice(indexToDelete, 1);\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\treflow : function(){\r\n\t\t\thelpers.extend(this.SegmentArc.prototype,{\r\n\t\t\t\tx : this.chart.width/2,\r\n\t\t\t\ty : this.chart.height/2\r\n\t\t\t});\r\n\t\t\tthis.outerRadius = (helpers.min([this.chart.width,this.chart.height]) -\tthis.options.segmentStrokeWidth/2)/2;\r\n\t\t\thelpers.each(this.segments, function(segment){\r\n\t\t\t\tsegment.update({\r\n\t\t\t\t\touterRadius : this.outerRadius,\r\n\t\t\t\t\tinnerRadius : (this.outerRadius/100) * this.options.percentageInnerCutout\r\n\t\t\t\t});\r\n\t\t\t}, this);\r\n\t\t},\r\n\t\tdraw : function(easeDecimal){\r\n\t\t\tvar animDecimal = (easeDecimal) ? easeDecimal : 1;\r\n\t\t\tthis.clear();\r\n\t\t\thelpers.each(this.segments,function(segment,index){\r\n\t\t\t\tsegment.transition({\r\n\t\t\t\t\tcircumference : this.calculateCircumference(segment.value),\r\n\t\t\t\t\touterRadius : this.outerRadius,\r\n\t\t\t\t\tinnerRadius : (this.outerRadius/100) * this.options.percentageInnerCutout\r\n\t\t\t\t},animDecimal);\r\n\r\n\t\t\t\tsegment.endAngle = segment.startAngle + segment.circumference;\r\n\r\n\t\t\t\tsegment.draw();\r\n\t\t\t\tif (index === 0){\r\n\t\t\t\t\tsegment.startAngle = Math.PI * 1.5;\r\n\t\t\t\t}\r\n\t\t\t\t//Check to see if it's the last segment, if not get the next and update the start angle\r\n\t\t\t\tif (index < this.segments.length-1){\r\n\t\t\t\t\tthis.segments[index+1].startAngle = segment.endAngle;\r\n\t\t\t\t}\r\n\t\t\t},this);\r\n\r\n\t\t}\r\n\t});\r\n\r\n\tChart.types.Doughnut.extend({\r\n\t\tname : \"Pie\",\r\n\t\tdefaults : helpers.merge(defaultConfig,{percentageInnerCutout : 0})\r\n\t});\r\n\r\n}).call(this);\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\thelpers = Chart.helpers;\r\n\r\n\tvar defaultConfig = {\r\n\r\n\t\t///Boolean - Whether grid lines are shown across the chart\r\n\t\tscaleShowGridLines : true,\r\n\r\n\t\t//String - Colour of the grid lines\r\n\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\r\n\r\n\t\t//Number - Width of the grid lines\r\n\t\tscaleGridLineWidth : 1,\r\n\r\n\t\t//Boolean - Whether to show horizontal lines (except X axis)\r\n\t\tscaleShowHorizontalLines: true,\r\n\r\n\t\t//Boolean - Whether to show vertical lines (except Y axis)\r\n\t\tscaleShowVerticalLines: true,\r\n\r\n\t\t//Boolean - Whether the line is curved between points\r\n\t\tbezierCurve : true,\r\n\r\n\t\t//Number - Tension of the bezier curve between points\r\n\t\tbezierCurveTension : 0.4,\r\n\r\n\t\t//Boolean - Whether to show a dot for each point\r\n\t\tpointDot : true,\r\n\r\n\t\t//Number - Radius of each point dot in pixels\r\n\t\tpointDotRadius : 4,\r\n\r\n\t\t//Number - Pixel width of point dot stroke\r\n\t\tpointDotStrokeWidth : 1,\r\n\r\n\t\t//Number - amount extra to add to the radius to cater for hit detection outside the drawn point\r\n\t\tpointHitDetectionRadius : 20,\r\n\r\n\t\t//Boolean - Whether to show a stroke for datasets\r\n\t\tdatasetStroke : true,\r\n\r\n\t\t//Number - Pixel width of dataset stroke\r\n\t\tdatasetStrokeWidth : 2,\r\n\r\n\t\t//Boolean - Whether to fill the dataset with a colour\r\n\t\tdatasetFill : true,\r\n\r\n\t\t//String - A legend template\r\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>\",\r\n\r\n\t\t//Boolean - Whether to horizontally center the label and point dot inside the grid\r\n\t\toffsetGridLines : false\r\n\r\n\t};\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\tname: \"Line\",\r\n\t\tdefaults : defaultConfig,\r\n\t\tinitialize:  function(data){\r\n\t\t\t//Declare the extension of the default point, to cater for the options passed in to the constructor\r\n\t\t\tthis.PointClass = Chart.Point.extend({\r\n\t\t\t\toffsetGridLines : this.options.offsetGridLines,\r\n\t\t\t\tstrokeWidth : this.options.pointDotStrokeWidth,\r\n\t\t\t\tradius : this.options.pointDotRadius,\r\n\t\t\t\tdisplay: this.options.pointDot,\r\n\t\t\t\thitDetectionRadius : this.options.pointHitDetectionRadius,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\tinRange : function(mouseX){\r\n\t\t\t\t\treturn (Math.pow(mouseX-this.x, 2) < Math.pow(this.radius + this.hitDetectionRadius,2));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.datasets = [];\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activePoints = (evt.type !== 'mouseout') ? this.getPointsAtEvent(evt) : [];\r\n\t\t\t\t\tthis.eachPoints(function(point){\r\n\t\t\t\t\t\tpoint.restore(['fillColor', 'strokeColor']);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activePoints, function(activePoint){\r\n\t\t\t\t\t\tactivePoint.fillColor = activePoint.highlightFill;\r\n\t\t\t\t\t\tactivePoint.strokeColor = activePoint.highlightStroke;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTooltip(activePoints);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\r\n\t\t\thelpers.each(data.datasets,function(dataset){\r\n\r\n\t\t\t\tvar datasetObject = {\r\n\t\t\t\t\tlabel : dataset.label || null,\r\n\t\t\t\t\tfillColor : dataset.fillColor,\r\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\r\n\t\t\t\t\tpointColor : dataset.pointColor,\r\n\t\t\t\t\tpointStrokeColor : dataset.pointStrokeColor,\r\n\t\t\t\t\tpoints : []\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.datasets.push(datasetObject);\r\n\r\n\r\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\r\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\t\tdatasetObject.points.push(new this.PointClass({\r\n\t\t\t\t\t\tvalue : dataPoint,\r\n\t\t\t\t\t\tlabel : data.labels[index],\r\n\t\t\t\t\t\tdatasetLabel: dataset.label,\r\n\t\t\t\t\t\tstrokeColor : dataset.pointStrokeColor,\r\n\t\t\t\t\t\tfillColor : dataset.pointColor,\r\n\t\t\t\t\t\thighlightFill : dataset.pointHighlightFill || dataset.pointColor,\r\n\t\t\t\t\t\thighlightStroke : dataset.pointHighlightStroke || dataset.pointStrokeColor\r\n\t\t\t\t\t}));\r\n\t\t\t\t},this);\r\n\r\n\t\t\t\tthis.buildScale(data.labels);\r\n\r\n\r\n\t\t\t\tthis.eachPoints(function(point, index){\r\n\t\t\t\t\thelpers.extend(point, {\r\n\t\t\t\t\t\tx: this.scale.calculateX(index),\r\n\t\t\t\t\t\ty: this.scale.endPoint\r\n\t\t\t\t\t});\r\n\t\t\t\t\tpoint.save();\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t},this);\r\n\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.scale.update();\r\n\t\t\t// Reset any highlight colours before updating.\r\n\t\t\thelpers.each(this.activeElements, function(activeElement){\r\n\t\t\t\tactiveElement.restore(['fillColor', 'strokeColor']);\r\n\t\t\t});\r\n\t\t\tthis.eachPoints(function(point){\r\n\t\t\t\tpoint.save();\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\teachPoints : function(callback){\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\thelpers.each(dataset.points,callback,this);\r\n\t\t\t},this);\r\n\t\t},\r\n\t\tgetPointsAtEvent : function(e){\r\n\t\t\tvar pointsArray = [],\r\n\t\t\t\teventPosition = helpers.getRelativePosition(e);\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\thelpers.each(dataset.points,function(point){\r\n\t\t\t\t\tif (point.inRange(eventPosition.x,eventPosition.y)) pointsArray.push(point);\r\n\t\t\t\t});\r\n\t\t\t},this);\r\n\t\t\treturn pointsArray;\r\n\t\t},\r\n\t\tbuildScale : function(labels){\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar dataTotal = function(){\r\n\t\t\t\tvar values = [];\r\n\t\t\t\tself.eachPoints(function(point){\r\n\t\t\t\t\tvalues.push(point.value);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn values;\r\n\t\t\t};\r\n\r\n\t\t\tvar scaleOptions = {\r\n\t\t\t\ttemplateString : this.options.scaleLabel,\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth : this.chart.width,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\ttextColor : this.options.scaleFontColor,\r\n\t\t\t\toffsetGridLines : this.options.offsetGridLines,\r\n\t\t\t\tfontSize : this.options.scaleFontSize,\r\n\t\t\t\tfontStyle : this.options.scaleFontStyle,\r\n\t\t\t\tfontFamily : this.options.scaleFontFamily,\r\n\t\t\t\tvaluesCount : labels.length,\r\n\t\t\t\tbeginAtZero : this.options.scaleBeginAtZero,\r\n\t\t\t\tintegersOnly : this.options.scaleIntegersOnly,\r\n\t\t\t\tcalculateYRange : function(currentHeight){\r\n\t\t\t\t\tvar updatedRanges = helpers.calculateScaleRange(\r\n\t\t\t\t\t\tdataTotal(),\r\n\t\t\t\t\t\tcurrentHeight,\r\n\t\t\t\t\t\tthis.fontSize,\r\n\t\t\t\t\t\tthis.beginAtZero,\r\n\t\t\t\t\t\tthis.integersOnly\r\n\t\t\t\t\t);\r\n\t\t\t\t\thelpers.extend(this, updatedRanges);\r\n\t\t\t\t},\r\n\t\t\t\txLabels : labels,\r\n\t\t\t\tfont : helpers.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),\r\n\t\t\t\tlineWidth : this.options.scaleLineWidth,\r\n\t\t\t\tlineColor : this.options.scaleLineColor,\r\n\t\t\t\tshowHorizontalLines : this.options.scaleShowHorizontalLines,\r\n\t\t\t\tshowVerticalLines : this.options.scaleShowVerticalLines,\r\n\t\t\t\tgridLineWidth : (this.options.scaleShowGridLines) ? this.options.scaleGridLineWidth : 0,\r\n\t\t\t\tgridLineColor : (this.options.scaleShowGridLines) ? this.options.scaleGridLineColor : \"rgba(0,0,0,0)\",\r\n\t\t\t\tpadding: (this.options.showScale) ? 0 : this.options.pointDotRadius + this.options.pointDotStrokeWidth,\r\n\t\t\t\tshowLabels : this.options.scaleShowLabels,\r\n\t\t\t\tdisplay : this.options.showScale\r\n\t\t\t};\r\n\r\n\t\t\tif (this.options.scaleOverride){\r\n\t\t\t\thelpers.extend(scaleOptions, {\r\n\t\t\t\t\tcalculateYRange: helpers.noop,\r\n\t\t\t\t\tsteps: this.options.scaleSteps,\r\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\r\n\t\t\t\t\tmin: this.options.scaleStartValue,\r\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.scale = new Chart.Scale(scaleOptions);\r\n\t\t},\r\n\t\taddData : function(valuesArray,label){\r\n\t\t\t//Map the values array for each of the datasets\r\n\r\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\r\n\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\tthis.datasets[datasetIndex].points.push(new this.PointClass({\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\tlabel : label,\r\n\t\t\t\t\tdatasetLabel: this.datasets[datasetIndex].label,\r\n\t\t\t\t\tx: this.scale.calculateX(this.scale.valuesCount+1),\r\n\t\t\t\t\ty: this.scale.endPoint,\r\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].pointStrokeColor,\r\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].pointColor\r\n\t\t\t\t}));\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.scale.addXLabel(label);\r\n\t\t\t//Then re-render the chart.\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tremoveData : function(){\r\n\t\t\tthis.scale.removeXLabel();\r\n\t\t\t//Then re-render the chart.\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\tdataset.points.shift();\r\n\t\t\t},this);\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\treflow : function(){\r\n\t\t\tvar newScaleProps = helpers.extend({\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth : this.chart.width\r\n\t\t\t});\r\n\t\t\tthis.scale.update(newScaleProps);\r\n\t\t},\r\n\t\tdraw : function(ease){\r\n\t\t\tvar easingDecimal = ease || 1;\r\n\t\t\tthis.clear();\r\n\r\n\t\t\tvar ctx = this.chart.ctx;\r\n\r\n\t\t\t// Some helper methods for getting the next/prev points\r\n\t\t\tvar hasValue = function(item){\r\n\t\t\t\treturn item.value !== null;\r\n\t\t\t},\r\n\t\t\tnextPoint = function(point, collection, index){\r\n\t\t\t\treturn helpers.findNextWhere(collection, hasValue, index) || point;\r\n\t\t\t},\r\n\t\t\tpreviousPoint = function(point, collection, index){\r\n\t\t\t\treturn helpers.findPreviousWhere(collection, hasValue, index) || point;\r\n\t\t\t};\r\n\r\n\t\t\tif (!this.scale) return;\r\n\t\t\tthis.scale.draw(easingDecimal);\r\n\r\n\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\tvar pointsWithValues = helpers.where(dataset.points, hasValue);\r\n\r\n\t\t\t\t//Transition each point first so that the line and point drawing isn't out of sync\r\n\t\t\t\t//We can use this extra loop to calculate the control points of this dataset also in this loop\r\n\r\n\t\t\t\thelpers.each(dataset.points, function(point, index){\r\n\t\t\t\t\tif (point.hasValue()){\r\n\t\t\t\t\t\tpoint.transition({\r\n\t\t\t\t\t\t\ty : this.scale.calculateY(point.value),\r\n\t\t\t\t\t\t\tx : this.scale.calculateX(index)\r\n\t\t\t\t\t\t}, easingDecimal);\r\n\t\t\t\t\t}\r\n\t\t\t\t},this);\r\n\r\n\r\n\t\t\t\t// Control points need to be calculated in a separate loop, because we need to know the current x/y of the point\r\n\t\t\t\t// This would cause issues when there is no animation, because the y of the next point would be 0, so beziers would be skewed\r\n\t\t\t\tif (this.options.bezierCurve){\r\n\t\t\t\t\thelpers.each(pointsWithValues, function(point, index){\r\n\t\t\t\t\t\tvar tension = (index > 0 && index < pointsWithValues.length - 1) ? this.options.bezierCurveTension : 0;\r\n\t\t\t\t\t\tpoint.controlPoints = helpers.splineCurve(\r\n\t\t\t\t\t\t\tpreviousPoint(point, pointsWithValues, index),\r\n\t\t\t\t\t\t\tpoint,\r\n\t\t\t\t\t\t\tnextPoint(point, pointsWithValues, index),\r\n\t\t\t\t\t\t\ttension\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// Prevent the bezier going outside of the bounds of the graph\r\n\r\n\t\t\t\t\t\t// Cap puter bezier handles to the upper/lower scale bounds\r\n\t\t\t\t\t\tif (point.controlPoints.outer.y > this.scale.endPoint){\r\n\t\t\t\t\t\t\tpoint.controlPoints.outer.y = this.scale.endPoint;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (point.controlPoints.outer.y < this.scale.startPoint){\r\n\t\t\t\t\t\t\tpoint.controlPoints.outer.y = this.scale.startPoint;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Cap inner bezier handles to the upper/lower scale bounds\r\n\t\t\t\t\t\tif (point.controlPoints.inner.y > this.scale.endPoint){\r\n\t\t\t\t\t\t\tpoint.controlPoints.inner.y = this.scale.endPoint;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (point.controlPoints.inner.y < this.scale.startPoint){\r\n\t\t\t\t\t\t\tpoint.controlPoints.inner.y = this.scale.startPoint;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},this);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//Draw the line between all the points\r\n\t\t\t\tctx.lineWidth = this.options.datasetStrokeWidth;\r\n\t\t\t\tctx.strokeStyle = dataset.strokeColor;\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\thelpers.each(pointsWithValues, function(point, index){\r\n\t\t\t\t\tif (index === 0){\r\n\t\t\t\t\t\tctx.moveTo(point.x, point.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(this.options.bezierCurve){\r\n\t\t\t\t\t\t\tvar previous = previousPoint(point, pointsWithValues, index);\r\n\r\n\t\t\t\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\t\t\tprevious.controlPoints.outer.x,\r\n\t\t\t\t\t\t\t\tprevious.controlPoints.outer.y,\r\n\t\t\t\t\t\t\t\tpoint.controlPoints.inner.x,\r\n\t\t\t\t\t\t\t\tpoint.controlPoints.inner.y,\r\n\t\t\t\t\t\t\t\tpoint.x,\r\n\t\t\t\t\t\t\t\tpoint.y\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tctx.lineTo(point.x,point.y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tif (this.options.datasetStroke) {\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.options.datasetFill && pointsWithValues.length > 0){\r\n\t\t\t\t\t//Round off the line by going to the base of the chart, back to the start, then fill.\r\n\t\t\t\t\tctx.lineTo(pointsWithValues[pointsWithValues.length - 1].x, this.scale.endPoint);\r\n\t\t\t\t\tctx.lineTo(pointsWithValues[0].x, this.scale.endPoint);\r\n\t\t\t\t\tctx.fillStyle = dataset.fillColor;\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Now draw the points over the line\r\n\t\t\t\t//A little inefficient double looping, but better than the line\r\n\t\t\t\t//lagging behind the point positions\r\n\t\t\t\thelpers.each(pointsWithValues,function(point){\r\n\t\t\t\t\tpoint.draw();\r\n\t\t\t\t});\r\n\t\t\t},this);\r\n\t\t}\r\n\t});\r\n\r\n\r\n}).call(this);\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\t//Cache a local reference to Chart.helpers\r\n\t\thelpers = Chart.helpers;\r\n\r\n\tvar defaultConfig = {\r\n\t\t//Boolean - Show a backdrop to the scale label\r\n\t\tscaleShowLabelBackdrop : true,\r\n\r\n\t\t//String - The colour of the label backdrop\r\n\t\tscaleBackdropColor : \"rgba(255,255,255,0.75)\",\r\n\r\n\t\t// Boolean - Whether the scale should begin at zero\r\n\t\tscaleBeginAtZero : true,\r\n\r\n\t\t//Number - The backdrop padding above & below the label in pixels\r\n\t\tscaleBackdropPaddingY : 2,\r\n\r\n\t\t//Number - The backdrop padding to the side of the label in pixels\r\n\t\tscaleBackdropPaddingX : 2,\r\n\r\n\t\t//Boolean - Show line for each value in the scale\r\n\t\tscaleShowLine : true,\r\n\r\n\t\t//Boolean - Stroke a line around each segment in the chart\r\n\t\tsegmentShowStroke : true,\r\n\r\n\t\t//String - The colour of the stroke on each segment.\r\n\t\tsegmentStrokeColor : \"#fff\",\r\n\r\n\t\t//Number - The width of the stroke value in pixels\r\n\t\tsegmentStrokeWidth : 2,\r\n\r\n\t\t//Number - Amount of animation steps\r\n\t\tanimationSteps : 100,\r\n\r\n\t\t//String - Animation easing effect.\r\n\t\tanimationEasing : \"easeOutBounce\",\r\n\r\n\t\t//Boolean - Whether to animate the rotation of the chart\r\n\t\tanimateRotate : true,\r\n\r\n\t\t//Boolean - Whether to animate scaling the chart from the centre\r\n\t\tanimateScale : false,\r\n\r\n\t\t//String - A legend template\r\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>\"\r\n\t};\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\t//Passing in a name registers this chart in the Chart namespace\r\n\t\tname: \"PolarArea\",\r\n\t\t//Providing a defaults will also register the defaults in the chart namespace\r\n\t\tdefaults : defaultConfig,\r\n\t\t//Initialize is fired when the chart is initialized - Data is passed in as a parameter\r\n\t\t//Config is automatically merged by the core of Chart.js, and is available at this.options\r\n\t\tinitialize:  function(data){\r\n\t\t\tthis.segments = [];\r\n\t\t\t//Declare segment class as a chart instance specific class, so it can share props for this instance\r\n\t\t\tthis.SegmentArc = Chart.Arc.extend({\r\n\t\t\t\tshowStroke : this.options.segmentShowStroke,\r\n\t\t\t\tstrokeWidth : this.options.segmentStrokeWidth,\r\n\t\t\t\tstrokeColor : this.options.segmentStrokeColor,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\tinnerRadius : 0,\r\n\t\t\t\tx : this.chart.width/2,\r\n\t\t\t\ty : this.chart.height/2\r\n\t\t\t});\r\n\t\t\tthis.scale = new Chart.RadialScale({\r\n\t\t\t\tdisplay: this.options.showScale,\r\n\t\t\t\tfontStyle: this.options.scaleFontStyle,\r\n\t\t\t\tfontSize: this.options.scaleFontSize,\r\n\t\t\t\tfontFamily: this.options.scaleFontFamily,\r\n\t\t\t\tfontColor: this.options.scaleFontColor,\r\n\t\t\t\tshowLabels: this.options.scaleShowLabels,\r\n\t\t\t\tshowLabelBackdrop: this.options.scaleShowLabelBackdrop,\r\n\t\t\t\tbackdropColor: this.options.scaleBackdropColor,\r\n\t\t\t\tbackdropPaddingY : this.options.scaleBackdropPaddingY,\r\n\t\t\t\tbackdropPaddingX: this.options.scaleBackdropPaddingX,\r\n\t\t\t\tlineWidth: (this.options.scaleShowLine) ? this.options.scaleLineWidth : 0,\r\n\t\t\t\tlineColor: this.options.scaleLineColor,\r\n\t\t\t\tlineArc: true,\r\n\t\t\t\twidth: this.chart.width,\r\n\t\t\t\theight: this.chart.height,\r\n\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\tyCenter: this.chart.height/2,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\ttemplateString: this.options.scaleLabel,\r\n\t\t\t\tvaluesCount: data.length\r\n\t\t\t});\r\n\r\n\t\t\tthis.updateScaleRange(data);\r\n\r\n\t\t\tthis.scale.update();\r\n\r\n\t\t\thelpers.each(data,function(segment,index){\r\n\t\t\t\tthis.addData(segment,index,true);\r\n\t\t\t},this);\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activeSegments = (evt.type !== 'mouseout') ? this.getSegmentsAtEvent(evt) : [];\r\n\t\t\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\t\t\tsegment.restore([\"fillColor\"]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activeSegments,function(activeSegment){\r\n\t\t\t\t\t\tactiveSegment.fillColor = activeSegment.highlightColor;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTooltip(activeSegments);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tgetSegmentsAtEvent : function(e){\r\n\t\t\tvar segmentsArray = [];\r\n\r\n\t\t\tvar location = helpers.getRelativePosition(e);\r\n\r\n\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\tif (segment.inRange(location.x,location.y)) segmentsArray.push(segment);\r\n\t\t\t},this);\r\n\t\t\treturn segmentsArray;\r\n\t\t},\r\n\t\taddData : function(segment, atIndex, silent){\r\n\t\t\tvar index = atIndex || this.segments.length;\r\n\r\n\t\t\tthis.segments.splice(index, 0, new this.SegmentArc({\r\n\t\t\t\tfillColor: segment.color,\r\n\t\t\t\thighlightColor: segment.highlight || segment.color,\r\n\t\t\t\tlabel: segment.label,\r\n\t\t\t\tvalue: segment.value,\r\n\t\t\t\touterRadius: (this.options.animateScale) ? 0 : this.scale.calculateCenterOffset(segment.value),\r\n\t\t\t\tcircumference: (this.options.animateRotate) ? 0 : this.scale.getCircumference(),\r\n\t\t\t\tstartAngle: Math.PI * 1.5\r\n\t\t\t}));\r\n\t\t\tif (!silent){\r\n\t\t\t\tthis.reflow();\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveData: function(atIndex){\r\n\t\t\tvar indexToDelete = (helpers.isNumber(atIndex)) ? atIndex : this.segments.length-1;\r\n\t\t\tthis.segments.splice(indexToDelete, 1);\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tcalculateTotal: function(data){\r\n\t\t\tthis.total = 0;\r\n\t\t\thelpers.each(data,function(segment){\r\n\t\t\t\tthis.total += segment.value;\r\n\t\t\t},this);\r\n\t\t\tthis.scale.valuesCount = this.segments.length;\r\n\t\t},\r\n\t\tupdateScaleRange: function(datapoints){\r\n\t\t\tvar valuesArray = [];\r\n\t\t\thelpers.each(datapoints,function(segment){\r\n\t\t\t\tvaluesArray.push(segment.value);\r\n\t\t\t});\r\n\r\n\t\t\tvar scaleSizes = (this.options.scaleOverride) ?\r\n\t\t\t\t{\r\n\t\t\t\t\tsteps: this.options.scaleSteps,\r\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\r\n\t\t\t\t\tmin: this.options.scaleStartValue,\r\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\r\n\t\t\t\t} :\r\n\t\t\t\thelpers.calculateScaleRange(\r\n\t\t\t\t\tvaluesArray,\r\n\t\t\t\t\thelpers.min([this.chart.width, this.chart.height])/2,\r\n\t\t\t\t\tthis.options.scaleFontSize,\r\n\t\t\t\t\tthis.options.scaleBeginAtZero,\r\n\t\t\t\t\tthis.options.scaleIntegersOnly\r\n\t\t\t\t);\r\n\r\n\t\t\thelpers.extend(\r\n\t\t\t\tthis.scale,\r\n\t\t\t\tscaleSizes,\r\n\t\t\t\t{\r\n\t\t\t\t\tsize: helpers.min([this.chart.width, this.chart.height]),\r\n\t\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\t\tyCenter: this.chart.height/2\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.calculateTotal(this.segments);\r\n\r\n\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\tsegment.save();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\treflow : function(){\r\n\t\t\thelpers.extend(this.SegmentArc.prototype,{\r\n\t\t\t\tx : this.chart.width/2,\r\n\t\t\t\ty : this.chart.height/2\r\n\t\t\t});\r\n\t\t\tthis.updateScaleRange(this.segments);\r\n\t\t\tthis.scale.update();\r\n\r\n\t\t\thelpers.extend(this.scale,{\r\n\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\tyCenter: this.chart.height/2\r\n\t\t\t});\r\n\r\n\t\t\thelpers.each(this.segments, function(segment){\r\n\t\t\t\tsegment.update({\r\n\t\t\t\t\touterRadius : this.scale.calculateCenterOffset(segment.value)\r\n\t\t\t\t});\r\n\t\t\t}, this);\r\n\r\n\t\t},\r\n\t\tdraw : function(ease){\r\n\t\t\tvar easingDecimal = ease || 1;\r\n\t\t\t//Clear & draw the canvas\r\n\t\t\tthis.clear();\r\n\t\t\thelpers.each(this.segments,function(segment, index){\r\n\t\t\t\tsegment.transition({\r\n\t\t\t\t\tcircumference : this.scale.getCircumference(),\r\n\t\t\t\t\touterRadius : this.scale.calculateCenterOffset(segment.value)\r\n\t\t\t\t},easingDecimal);\r\n\r\n\t\t\t\tsegment.endAngle = segment.startAngle + segment.circumference;\r\n\r\n\t\t\t\t// If we've removed the first segment we need to set the first one to\r\n\t\t\t\t// start at the top.\r\n\t\t\t\tif (index === 0){\r\n\t\t\t\t\tsegment.startAngle = Math.PI * 1.5;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Check to see if it's the last segment, if not get the next and update the start angle\r\n\t\t\t\tif (index < this.segments.length - 1){\r\n\t\t\t\t\tthis.segments[index+1].startAngle = segment.endAngle;\r\n\t\t\t\t}\r\n\t\t\t\tsegment.draw();\r\n\t\t\t}, this);\r\n\t\t\tthis.scale.draw();\r\n\t\t}\r\n\t});\r\n\r\n}).call(this);\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\thelpers = Chart.helpers;\r\n\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\tname: \"Radar\",\r\n\t\tdefaults:{\r\n\t\t\t//Boolean - Whether to show lines for each scale point\r\n\t\t\tscaleShowLine : true,\r\n\r\n\t\t\t//Boolean - Whether we show the angle lines out of the radar\r\n\t\t\tangleShowLineOut : true,\r\n\r\n\t\t\t//Boolean - Whether to show labels on the scale\r\n\t\t\tscaleShowLabels : false,\r\n\r\n\t\t\t// Boolean - Whether the scale should begin at zero\r\n\t\t\tscaleBeginAtZero : true,\r\n\r\n\t\t\t//String - Colour of the angle line\r\n\t\t\tangleLineColor : \"rgba(0,0,0,.1)\",\r\n\r\n\t\t\t//Number - Pixel width of the angle line\r\n\t\t\tangleLineWidth : 1,\r\n\r\n\t\t\t//Number - Interval at which to draw angle lines (\"every Nth point\")\r\n\t\t\tangleLineInterval: 1,\r\n\r\n\t\t\t//String - Point label font declaration\r\n\t\t\tpointLabelFontFamily : \"'Arial'\",\r\n\r\n\t\t\t//String - Point label font weight\r\n\t\t\tpointLabelFontStyle : \"normal\",\r\n\r\n\t\t\t//Number - Point label font size in pixels\r\n\t\t\tpointLabelFontSize : 10,\r\n\r\n\t\t\t//String - Point label font colour\r\n\t\t\tpointLabelFontColor : \"#666\",\r\n\r\n\t\t\t//Boolean - Whether to show a dot for each point\r\n\t\t\tpointDot : true,\r\n\r\n\t\t\t//Number - Radius of each point dot in pixels\r\n\t\t\tpointDotRadius : 3,\r\n\r\n\t\t\t//Number - Pixel width of point dot stroke\r\n\t\t\tpointDotStrokeWidth : 1,\r\n\r\n\t\t\t//Number - amount extra to add to the radius to cater for hit detection outside the drawn point\r\n\t\t\tpointHitDetectionRadius : 20,\r\n\r\n\t\t\t//Boolean - Whether to show a stroke for datasets\r\n\t\t\tdatasetStroke : true,\r\n\r\n\t\t\t//Number - Pixel width of dataset stroke\r\n\t\t\tdatasetStrokeWidth : 2,\r\n\r\n\t\t\t//Boolean - Whether to fill the dataset with a colour\r\n\t\t\tdatasetFill : true,\r\n\r\n\t\t\t//String - A legend template\r\n\t\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span class=\\\"<%=name.toLowerCase()%>-legend-icon\\\" style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><span class=\\\"<%=name.toLowerCase()%>-legend-text\\\"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>\"\r\n\r\n\t\t},\r\n\r\n\t\tinitialize: function(data){\r\n\t\t\tthis.PointClass = Chart.Point.extend({\r\n\t\t\t\tstrokeWidth : this.options.pointDotStrokeWidth,\r\n\t\t\t\tradius : this.options.pointDotRadius,\r\n\t\t\t\tdisplay: this.options.pointDot,\r\n\t\t\t\thitDetectionRadius : this.options.pointHitDetectionRadius,\r\n\t\t\t\tctx : this.chart.ctx\r\n\t\t\t});\r\n\r\n\t\t\tthis.datasets = [];\r\n\r\n\t\t\tthis.buildScale(data);\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activePointsCollection = (evt.type !== 'mouseout') ? this.getPointsAtEvent(evt) : [];\r\n\r\n\t\t\t\t\tthis.eachPoints(function(point){\r\n\t\t\t\t\t\tpoint.restore(['fillColor', 'strokeColor']);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activePointsCollection, function(activePoint){\r\n\t\t\t\t\t\tactivePoint.fillColor = activePoint.highlightFill;\r\n\t\t\t\t\t\tactivePoint.strokeColor = activePoint.highlightStroke;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.showTooltip(activePointsCollection);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\r\n\t\t\thelpers.each(data.datasets,function(dataset){\r\n\r\n\t\t\t\tvar datasetObject = {\r\n\t\t\t\t\tlabel: dataset.label || null,\r\n\t\t\t\t\tfillColor : dataset.fillColor,\r\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\r\n\t\t\t\t\tpointColor : dataset.pointColor,\r\n\t\t\t\t\tpointStrokeColor : dataset.pointStrokeColor,\r\n\t\t\t\t\tpoints : []\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.datasets.push(datasetObject);\r\n\r\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\r\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\t\tvar pointPosition;\r\n\t\t\t\t\tif (!this.scale.animation){\r\n\t\t\t\t\t\tpointPosition = this.scale.getPointPosition(index, this.scale.calculateCenterOffset(dataPoint));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdatasetObject.points.push(new this.PointClass({\r\n\t\t\t\t\t\tvalue : dataPoint,\r\n\t\t\t\t\t\tlabel : data.labels[index],\r\n\t\t\t\t\t\tdatasetLabel: dataset.label,\r\n\t\t\t\t\t\tx: (this.options.animation) ? this.scale.xCenter : pointPosition.x,\r\n\t\t\t\t\t\ty: (this.options.animation) ? this.scale.yCenter : pointPosition.y,\r\n\t\t\t\t\t\tstrokeColor : dataset.pointStrokeColor,\r\n\t\t\t\t\t\tfillColor : dataset.pointColor,\r\n\t\t\t\t\t\thighlightFill : dataset.pointHighlightFill || dataset.pointColor,\r\n\t\t\t\t\t\thighlightStroke : dataset.pointHighlightStroke || dataset.pointStrokeColor\r\n\t\t\t\t\t}));\r\n\t\t\t\t},this);\r\n\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\teachPoints : function(callback){\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\thelpers.each(dataset.points,callback,this);\r\n\t\t\t},this);\r\n\t\t},\r\n\r\n\t\tgetPointsAtEvent : function(evt){\r\n\t\t\tvar mousePosition = helpers.getRelativePosition(evt),\r\n\t\t\t\tfromCenter = helpers.getAngleFromPoint({\r\n\t\t\t\t\tx: this.scale.xCenter,\r\n\t\t\t\t\ty: this.scale.yCenter\r\n\t\t\t\t}, mousePosition);\r\n\r\n\t\t\tvar anglePerIndex = (Math.PI * 2) /this.scale.valuesCount,\r\n\t\t\t\tpointIndex = Math.round((fromCenter.angle - Math.PI * 1.5) / anglePerIndex),\r\n\t\t\t\tactivePointsCollection = [];\r\n\r\n\t\t\t// If we're at the top, make the pointIndex 0 to get the first of the array.\r\n\t\t\tif (pointIndex >= this.scale.valuesCount || pointIndex < 0){\r\n\t\t\t\tpointIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (fromCenter.distance <= this.scale.drawingArea){\r\n\t\t\t\thelpers.each(this.datasets, function(dataset){\r\n\t\t\t\t\tactivePointsCollection.push(dataset.points[pointIndex]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn activePointsCollection;\r\n\t\t},\r\n\r\n\t\tbuildScale : function(data){\r\n\t\t\tthis.scale = new Chart.RadialScale({\r\n\t\t\t\tdisplay: this.options.showScale,\r\n\t\t\t\tfontStyle: this.options.scaleFontStyle,\r\n\t\t\t\tfontSize: this.options.scaleFontSize,\r\n\t\t\t\tfontFamily: this.options.scaleFontFamily,\r\n\t\t\t\tfontColor: this.options.scaleFontColor,\r\n\t\t\t\tshowLabels: this.options.scaleShowLabels,\r\n\t\t\t\tshowLabelBackdrop: this.options.scaleShowLabelBackdrop,\r\n\t\t\t\tbackdropColor: this.options.scaleBackdropColor,\r\n\t\t\t\tbackgroundColors: this.options.scaleBackgroundColors,\r\n\t\t\t\tbackdropPaddingY : this.options.scaleBackdropPaddingY,\r\n\t\t\t\tbackdropPaddingX: this.options.scaleBackdropPaddingX,\r\n\t\t\t\tlineWidth: (this.options.scaleShowLine) ? this.options.scaleLineWidth : 0,\r\n\t\t\t\tlineColor: this.options.scaleLineColor,\r\n\t\t\t\tangleLineColor : this.options.angleLineColor,\r\n\t\t\t\tangleLineWidth : (this.options.angleShowLineOut) ? this.options.angleLineWidth : 0,\r\n        angleLineInterval: (this.options.angleLineInterval) ? this.options.angleLineInterval : 1,\r\n\t\t\t\t// Point labels at the edge of each line\r\n\t\t\t\tpointLabelFontColor : this.options.pointLabelFontColor,\r\n\t\t\t\tpointLabelFontSize : this.options.pointLabelFontSize,\r\n\t\t\t\tpointLabelFontFamily : this.options.pointLabelFontFamily,\r\n\t\t\t\tpointLabelFontStyle : this.options.pointLabelFontStyle,\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth: this.chart.width,\r\n\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\tyCenter: this.chart.height/2,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\ttemplateString: this.options.scaleLabel,\r\n\t\t\t\tlabels: data.labels,\r\n\t\t\t\tvaluesCount: data.datasets[0].data.length\r\n\t\t\t});\r\n\r\n\t\t\tthis.scale.setScaleSize();\r\n\t\t\tthis.updateScaleRange(data.datasets);\r\n\t\t\tthis.scale.buildYLabels();\r\n\t\t},\r\n\t\tupdateScaleRange: function(datasets){\r\n\t\t\tvar valuesArray = (function(){\r\n\t\t\t\tvar totalDataArray = [];\r\n\t\t\t\thelpers.each(datasets,function(dataset){\r\n\t\t\t\t\tif (dataset.data){\r\n\t\t\t\t\t\ttotalDataArray = totalDataArray.concat(dataset.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\thelpers.each(dataset.points, function(point){\r\n\t\t\t\t\t\t\ttotalDataArray.push(point.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn totalDataArray;\r\n\t\t\t})();\r\n\r\n\r\n\t\t\tvar scaleSizes = (this.options.scaleOverride) ?\r\n\t\t\t\t{\r\n\t\t\t\t\tsteps: this.options.scaleSteps,\r\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\r\n\t\t\t\t\tmin: this.options.scaleStartValue,\r\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\r\n\t\t\t\t} :\r\n\t\t\t\thelpers.calculateScaleRange(\r\n\t\t\t\t\tvaluesArray,\r\n\t\t\t\t\thelpers.min([this.chart.width, this.chart.height])/2,\r\n\t\t\t\t\tthis.options.scaleFontSize,\r\n\t\t\t\t\tthis.options.scaleBeginAtZero,\r\n\t\t\t\t\tthis.options.scaleIntegersOnly\r\n\t\t\t\t);\r\n\r\n\t\t\thelpers.extend(\r\n\t\t\t\tthis.scale,\r\n\t\t\t\tscaleSizes\r\n\t\t\t);\r\n\r\n\t\t},\r\n\t\taddData : function(valuesArray,label){\r\n\t\t\t//Map the values array for each of the datasets\r\n\t\t\tthis.scale.valuesCount++;\r\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\r\n\t\t\t\tvar pointPosition = this.scale.getPointPosition(this.scale.valuesCount, this.scale.calculateCenterOffset(value));\r\n\t\t\t\tthis.datasets[datasetIndex].points.push(new this.PointClass({\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\tlabel : label,\r\n\t\t\t\t\tdatasetLabel: this.datasets[datasetIndex].label,\r\n\t\t\t\t\tx: pointPosition.x,\r\n\t\t\t\t\ty: pointPosition.y,\r\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].pointStrokeColor,\r\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].pointColor\r\n\t\t\t\t}));\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.scale.labels.push(label);\r\n\r\n\t\t\tthis.reflow();\r\n\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tremoveData : function(){\r\n\t\t\tthis.scale.valuesCount--;\r\n\t\t\tthis.scale.labels.shift();\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\tdataset.points.shift();\r\n\t\t\t},this);\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.eachPoints(function(point){\r\n\t\t\t\tpoint.save();\r\n\t\t\t});\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\treflow: function(){\r\n\t\t\thelpers.extend(this.scale, {\r\n\t\t\t\twidth : this.chart.width,\r\n\t\t\t\theight: this.chart.height,\r\n\t\t\t\tsize : helpers.min([this.chart.width, this.chart.height]),\r\n\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\tyCenter: this.chart.height/2\r\n\t\t\t});\r\n\t\t\tthis.updateScaleRange(this.datasets);\r\n\t\t\tthis.scale.setScaleSize();\r\n\t\t\tthis.scale.buildYLabels();\r\n\t\t},\r\n\t\tdraw : function(ease){\r\n\t\t\tvar easeDecimal = ease || 1,\r\n\t\t\t\tctx = this.chart.ctx;\r\n\t\t\tthis.clear();\r\n\t\t\tthis.scale.draw();\r\n\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\r\n\t\t\t\t//Transition each point first so that the line and point drawing isn't out of sync\r\n\t\t\t\thelpers.each(dataset.points,function(point,index){\r\n\t\t\t\t\tif (point.hasValue()){\r\n\t\t\t\t\t\tpoint.transition(this.scale.getPointPosition(index, this.scale.calculateCenterOffset(point.value)), easeDecimal);\r\n\t\t\t\t\t}\r\n\t\t\t\t},this);\r\n\r\n\r\n\r\n\t\t\t\t//Draw the line between all the points\r\n\t\t\t\tctx.lineWidth = this.options.datasetStrokeWidth;\r\n\t\t\t\tctx.strokeStyle = dataset.strokeColor;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\thelpers.each(dataset.points,function(point,index){\r\n\t\t\t\t\tif (index === 0){\r\n\t\t\t\t\t\tctx.moveTo(point.x,point.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tctx.lineTo(point.x,point.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t},this);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tctx.stroke();\r\n\r\n\t\t\t\tctx.fillStyle = dataset.fillColor;\r\n\t\t\t\tif(this.options.datasetFill){\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t}\r\n\t\t\t\t//Now draw the points over the line\r\n\t\t\t\t//A little inefficient double looping, but better than the line\r\n\t\t\t\t//lagging behind the point positions\r\n\t\t\t\thelpers.each(dataset.points,function(point){\r\n\t\t\t\t\tif (point.hasValue()){\r\n\t\t\t\t\t\tpoint.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},this);\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n}).call(this);\r\n\n(function (factory) {\r\n  'use strict';\r\n  if (typeof exports === 'object') {\r\n    // Node/CommonJS\r\n    module.exports = factory(\r\n      typeof angular !== 'undefined' ? angular : require('angular'),\r\n      typeof Chart !== 'undefined' ? Chart : require('chart.js'));\r\n  }  else if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define(['angular', 'chart'], factory);\r\n  } else {\r\n    // Browser globals\r\n    factory(angular, Chart);\r\n  }\r\n}(function (angular, Chart) {\r\n  'use strict';\r\n\r\n  Chart.defaults.global.responsive = true;\r\n  Chart.defaults.global.multiTooltipTemplate = '<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>';\r\n\r\n  Chart.defaults.global.colours = [\r\n    '#97BBCD', // blue\r\n    '#DCDCDC', // light grey\r\n    '#F7464A', // red\r\n    '#46BFBD', // green\r\n    '#FDB45C', // yellow\r\n    '#949FB1', // grey\r\n    '#4D5360'  // dark grey\r\n  ];\r\n\r\n  var usingExcanvas = typeof window.G_vmlCanvasManager === 'object' &&\r\n    window.G_vmlCanvasManager !== null &&\r\n    typeof window.G_vmlCanvasManager.initElement === 'function';\r\n\r\n  if (usingExcanvas) Chart.defaults.global.animation = false;\r\n\r\n  return angular.module('chart.js', [])\r\n    .provider('ChartJs', ChartJsProvider)\r\n    .factory('ChartJsFactory', ['ChartJs', '$timeout', ChartJsFactory])\r\n    .directive('chartBase', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory(); }])\r\n    .directive('chartLine', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Line'); }])\r\n    .directive('chartBar', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Bar'); }])\r\n    .directive('chartRadar', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Radar'); }])\r\n    .directive('chartDoughnut', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Doughnut'); }])\r\n    .directive('chartPie', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Pie'); }])\r\n    .directive('chartPolarArea', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('PolarArea'); }]);\r\n\r\n  /**\r\n   * Wrapper for chart.js\r\n   * Allows configuring chart js using the provider\r\n   *\r\n   * angular.module('myModule', ['chart.js']).config(function(ChartJsProvider) {\r\n   *   ChartJsProvider.setOptions({ responsive: true });\r\n   *   ChartJsProvider.setOptions('Line', { responsive: false });\r\n   * })))\r\n   */\r\n  function ChartJsProvider () {\r\n    var options = {};\r\n    var ChartJs = {\r\n      Chart: Chart,\r\n      getOptions: function (type) {\r\n        var typeOptions = type && options[type] || {};\r\n        return angular.extend({}, options, typeOptions);\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Allow to set global options during configuration\r\n     */\r\n    this.setOptions = function (type, customOptions) {\r\n      // If no type was specified set option for the global object\r\n      if (! customOptions) {\r\n        customOptions = type;\r\n        options = angular.extend(options, customOptions);\r\n        return;\r\n      }\r\n      // Set options for the specific chart\r\n      options[type] = angular.extend(options[type] || {}, customOptions);\r\n    };\r\n\r\n    this.$get = function () {\r\n      return ChartJs;\r\n    };\r\n  }\r\n\r\n  function ChartJsFactory (ChartJs, $timeout) {\r\n    return function chart (type) {\r\n      return {\r\n        restrict: 'CA',\r\n        scope: {\r\n          data: '=?',\r\n          labels: '=?',\r\n          options: '=?',\r\n          series: '=?',\r\n          colours: '=?',\r\n          getColour: '=?',\r\n          chartType: '=',\r\n          legend: '@',\r\n          click: '=?',\r\n          hover: '=?',\r\n\r\n          chartData: '=?',\r\n          chartLabels: '=?',\r\n          chartOptions: '=?',\r\n          chartSeries: '=?',\r\n          chartColours: '=?',\r\n          chartLegend: '@',\r\n          chartClick: '=?',\r\n          chartHover: '=?'\r\n        },\r\n        link: function (scope, elem/*, attrs */) {\r\n          var chart, container = document.createElement('div');\r\n          container.className = 'chart-container';\r\n          elem.replaceWith(container);\r\n          container.appendChild(elem[0]);\r\n\r\n          if (usingExcanvas) window.G_vmlCanvasManager.initElement(elem[0]);\r\n\r\n          ['data', 'labels', 'options', 'series', 'colours', 'legend', 'click', 'hover'].forEach(deprecated);\r\n          function aliasVar (fromName, toName) {\r\n            scope.$watch(fromName, function (newVal) {\r\n              if (typeof newVal === 'undefined') return;\r\n              scope[toName] = newVal;\r\n            });\r\n          }\r\n          /* provide backward compatibility to \"old\" directive names, by\r\n           * having an alias point from the new names to the old names. */\r\n          aliasVar('chartData', 'data');\r\n          aliasVar('chartLabels', 'labels');\r\n          aliasVar('chartOptions', 'options');\r\n          aliasVar('chartSeries', 'series');\r\n          aliasVar('chartColours', 'colours');\r\n          aliasVar('chartLegend', 'legend');\r\n          aliasVar('chartClick', 'click');\r\n          aliasVar('chartHover', 'hover');\r\n\r\n          // Order of setting \"watch\" matter\r\n\r\n          scope.$watch('data', function (newVal, oldVal) {\r\n            if (! newVal || ! newVal.length || (Array.isArray(newVal[0]) && ! newVal[0].length)) {\r\n              destroyChart(chart, scope);\r\n              return;\r\n            }\r\n            var chartType = type || scope.chartType;\r\n            if (! chartType) return;\r\n\r\n            if (chart && canUpdateChart(newVal, oldVal))\r\n              return updateChart(chart, newVal, scope, elem);\r\n\r\n            createChart(chartType);\r\n          }, true);\r\n\r\n          scope.$watch('series', resetChart, true);\r\n          scope.$watch('labels', resetChart, true);\r\n          scope.$watch('options', resetChart, true);\r\n          scope.$watch('colours', resetChart, true);\r\n\r\n          scope.$watch('chartType', function (newVal, oldVal) {\r\n            if (isEmpty(newVal)) return;\r\n            if (angular.equals(newVal, oldVal)) return;\r\n            createChart(newVal);\r\n          });\r\n\r\n          scope.$on('$destroy', function () {\r\n            destroyChart(chart, scope);\r\n          });\r\n\r\n          function resetChart (newVal, oldVal) {\r\n            if (isEmpty(newVal)) return;\r\n            if (angular.equals(newVal, oldVal)) return;\r\n            var chartType = type || scope.chartType;\r\n            if (! chartType) return;\r\n\r\n            // chart.update() doesn't work for series and labels\r\n            // so we have to re-create the chart entirely\r\n            createChart(chartType);\r\n          }\r\n\r\n          function createChart (type) {\r\n            if (isResponsive(type, scope) && elem[0].clientHeight === 0 && container.clientHeight === 0) {\r\n              return $timeout(function () {\r\n                createChart(type);\r\n              }, 50, false);\r\n            }\r\n            if (! scope.data || ! scope.data.length) return;\r\n            scope.getColour = typeof scope.getColour === 'function' ? scope.getColour : getRandomColour;\r\n            var colours = getColours(type, scope);\r\n            var cvs = elem[0], ctx = cvs.getContext('2d');\r\n            var data = Array.isArray(scope.data[0]) ?\r\n              getDataSets(scope.labels, scope.data, scope.series || [], colours) :\r\n              getData(scope.labels, scope.data, colours);\r\n            var options = angular.extend({}, ChartJs.getOptions(type), scope.options);\r\n\r\n            // Destroy old chart if it exists to avoid ghost charts issue\r\n            // https://github.com/jtblin/angular-chart.js/issues/187\r\n            destroyChart(chart, scope);\r\n            chart = new ChartJs.Chart(ctx)[type](data, options);\r\n            scope.$emit('create', chart);\r\n\r\n            // Bind events\r\n            cvs.onclick = scope.click ? getEventHandler(scope, chart, 'click', false) : angular.noop;\r\n            cvs.onmousemove = scope.hover ? getEventHandler(scope, chart, 'hover', true) : angular.noop;\r\n\r\n            if (scope.legend && scope.legend !== 'false') setLegend(elem, chart);\r\n          }\r\n\r\n          function deprecated (attr) {\r\n            if (typeof console !== 'undefined' && ChartJs.getOptions().env !== 'test') {\r\n              var warn = typeof console.warn === 'function' ? console.warn : console.log;\r\n              if (!! scope[attr]) {\r\n                warn.call(console, '\"%s\" is deprecated and will be removed in a future version. ' +\r\n                  'Please use \"chart-%s\" instead.', attr, attr);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      };\r\n    };\r\n\r\n    function canUpdateChart (newVal, oldVal) {\r\n      if (newVal && oldVal && newVal.length && oldVal.length) {\r\n        return Array.isArray(newVal[0]) ?\r\n        newVal.length === oldVal.length && newVal.every(function (element, index) {\r\n          return element.length === oldVal[index].length; }) :\r\n          oldVal.reduce(sum, 0) > 0 ? newVal.length === oldVal.length : false;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    function sum (carry, val) {\r\n      return carry + val;\r\n    }\r\n\r\n    function getEventHandler (scope, chart, action, triggerOnlyOnChange) {\r\n      var lastState = null;\r\n      return function (evt) {\r\n        var atEvent = chart.getPointsAtEvent || chart.getBarsAtEvent || chart.getSegmentsAtEvent;\r\n        if (atEvent) {\r\n          var activePoints = atEvent.call(chart, evt);\r\n          if (triggerOnlyOnChange === false || angular.equals(lastState, activePoints) === false) {\r\n            lastState = activePoints;\r\n            scope[action](activePoints, evt);\r\n            scope.$apply();\r\n          }\r\n        }\r\n      };\r\n    }\r\n\r\n    function getColours (type, scope) {\r\n      var notEnoughColours = false;\r\n      var colours = angular.copy(scope.colours ||\r\n        ChartJs.getOptions(type).colours ||\r\n        Chart.defaults.global.colours\r\n      );\r\n      while (colours.length < scope.data.length) {\r\n        colours.push(scope.getColour());\r\n        notEnoughColours = true;\r\n      }\r\n      // mutate colours in this case as we don't want\r\n      // the colours to change on each refresh\r\n      if (notEnoughColours) scope.colours = colours;\r\n      return colours.map(convertColour);\r\n    }\r\n\r\n    function convertColour (colour) {\r\n      if (typeof colour === 'object' && colour !== null) return colour;\r\n      if (typeof colour === 'string' && colour[0] === '#') return getColour(hexToRgb(colour.substr(1)));\r\n      return getRandomColour();\r\n    }\r\n\r\n    function getRandomColour () {\r\n      var colour = [getRandomInt(0, 255), getRandomInt(0, 255), getRandomInt(0, 255)];\r\n      return getColour(colour);\r\n    }\r\n\r\n    function getColour (colour) {\r\n      return {\r\n        fillColor: rgba(colour, 0.2),\r\n        strokeColor: rgba(colour, 1),\r\n        pointColor: rgba(colour, 1),\r\n        pointStrokeColor: '#fff',\r\n        pointHighlightFill: '#fff',\r\n        pointHighlightStroke: rgba(colour, 0.8)\r\n      };\r\n    }\r\n\r\n    function getRandomInt (min, max) {\r\n      return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    }\r\n\r\n    function rgba (colour, alpha) {\r\n      if (usingExcanvas) {\r\n        // rgba not supported by IE8\r\n        return 'rgb(' + colour.join(',') + ')';\r\n      } else {\r\n        return 'rgba(' + colour.concat(alpha).join(',') + ')';\r\n      }\r\n    }\r\n\r\n    // Credit: http://stackoverflow.com/a/11508164/1190235\r\n    function hexToRgb (hex) {\r\n      var bigint = parseInt(hex, 16),\r\n        r = (bigint >> 16) & 255,\r\n        g = (bigint >> 8) & 255,\r\n        b = bigint & 255;\r\n\r\n      return [r, g, b];\r\n    }\r\n\r\n    function getDataSets (labels, data, series, colours) {\r\n      return {\r\n        labels: labels,\r\n        datasets: data.map(function (item, i) {\r\n          return angular.extend({}, colours[i], {\r\n            label: series[i],\r\n            data: item\r\n          });\r\n        })\r\n      };\r\n    }\r\n\r\n    function getData (labels, data, colours) {\r\n      return labels.map(function (label, i) {\r\n        return angular.extend({}, colours[i], {\r\n          label: label,\r\n          value: data[i],\r\n          color: colours[i].strokeColor,\r\n          highlight: colours[i].pointHighlightStroke\r\n        });\r\n      });\r\n    }\r\n\r\n    function setLegend (elem, chart) {\r\n      var $parent = elem.parent(),\r\n          $oldLegend = $parent.find('chart-legend'),\r\n          legend = '<chart-legend>' + chart.generateLegend() + '</chart-legend>';\r\n      if ($oldLegend.length) $oldLegend.replaceWith(legend);\r\n      else $parent.append(legend);\r\n    }\r\n\r\n    function updateChart (chart, values, scope, elem) {\r\n      if (Array.isArray(scope.data[0])) {\r\n        chart.datasets.forEach(function (dataset, i) {\r\n          (dataset.points || dataset.bars).forEach(function (dataItem, j) {\r\n            dataItem.value = values[i][j];\r\n          });\r\n        });\r\n      } else {\r\n        chart.segments.forEach(function (segment, i) {\r\n          segment.value = values[i];\r\n        });\r\n      }\r\n      chart.update();\r\n      scope.$emit('update', chart);\r\n      if (scope.legend && scope.legend !== 'false') setLegend(elem, chart);\r\n    }\r\n\r\n    function isEmpty (value) {\r\n      return ! value ||\r\n        (Array.isArray(value) && ! value.length) ||\r\n        (typeof value === 'object' && ! Object.keys(value).length);\r\n    }\r\n\r\n    function isResponsive (type, scope) {\r\n      var options = angular.extend({}, Chart.defaults.global, ChartJs.getOptions(type), scope.options);\r\n      return options.responsive;\r\n    }\r\n\r\n    function destroyChart(chart, scope) {\r\n      if(! chart) return;\r\n      chart.destroy();\r\n      scope.$emit('destroy', chart);\r\n    }\r\n  }\r\n}));\r\n\n//# sourceMappingURL=chart.js.map\n"],"sourceRoot":"/source/"}